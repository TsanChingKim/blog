---
title: "菜单组件"
date: 2025-10-22
categories: ["Android组件"]
description: "详细介绍Android各种菜单组件的使用方法，包括OptionMenu选项菜单、ContextMenu上下文菜单和PopupMenu弹出菜单"
featureimage: "/images/menu-components.jpg"
featureimagecaption: "Android菜单组件示意图"
draft: false
showComments: true
---

# 菜单组件

## OptionMenu 选项菜单

选项菜单是一个应用主菜单，用于放置对应用产生全局影响的操作

- onCreateOptionsMenu()：将menu赋值到页面当中
- onOptionItemSelected()：当选择菜单项时做的操作

xml属性：
- showAsAction
	- always：直接在标题栏显示
	- never：不显示
	- ifRoom：有空间就显示

## ContextMenu 上下文菜单

在长按时弹出的一个菜单

首先进行上下文菜单的注册：`registerForContextMenu(View控件对象)`
在类中创建上下文：`onCreateContextMenu()`
选中时的处理：`onContextItemSelected()`
在长按触发器时，在顶部会出现一个菜单来进行操作

## PopupMenu 弹出菜单

一个模态形式展示的弹出风格的菜单，绑在View上，一般出现在被绑定的View的下方

### 步骤
1. 实例化PopupMenu对象
2. 加载菜单资源：利用MenuInflater
3. 将`R.menu.xx`对应的菜单资源加载到弹出式菜单中
4. 为PopupMenu设置点击监听器
5. `menu.show()`展示这个菜单
# Menu的创建方式
## Java方式定义
## XML方式定义

## 总结
>[!info] 经验分享
>xml定义Menu的优势：清晰地菜单结构，将菜单内容与应用的逻辑代码分离，资源适配更容易
>
>Menu显示：`onCreateOptionsMenu()`方法必须返回true，`onOptionItemSelected()`方法返回true且调用父类的默认实现


