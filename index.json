[{"content":" Activity æ´»åŠ¨ç»„ä»¶ # Activity æ˜¯ Android åº”ç”¨çš„æ ¸å¿ƒç»„ä»¶ï¼Œä»£è¡¨ä¸€ä¸ªç”¨æˆ·ç•Œé¢å±å¹•ã€‚æ¯ä¸ª Activity éƒ½æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ç”¨æˆ·äº¤äº’å•å…ƒã€‚\nActivity åŸºæœ¬æ¦‚å¿µ # ä»€ä¹ˆæ˜¯ Activity # Activity æ˜¯ Android åº”ç”¨çš„å››å¤§ç»„ä»¶ä¹‹ä¸€ï¼Œä»£è¡¨åº”ç”¨ä¸­çš„ä¸€ä¸ªå±å¹•æˆ–ç•Œé¢ã€‚æ¯ä¸ª Activity éƒ½æœ‰å…¶ç”Ÿå‘½å‘¨æœŸï¼Œç”±ç³»ç»Ÿç®¡ç†ã€‚\nActivity ä¸ Layout çš„å…³ç³» # class MainActivity : AppCompatActivity() { override fun onCreate(savedInstanceState: Bundle?) { super.onCreate(savedInstanceState) // è®¾ç½®å¸ƒå±€æ–‡ä»¶ setContentView(R.layout.activity_main) // åˆå§‹åŒ–ç•Œé¢ initViews() } private fun initViews() { // é€šè¿‡ findViewById è·å–å¸ƒå±€ä¸­çš„æ§ä»¶ val textView = findViewById\u0026lt;TextView\u0026gt;(R.id.textView) val button = findViewById\u0026lt;Button\u0026gt;(R.id.button) // è®¾ç½®æ§ä»¶å±æ€§ textView.text = \u0026#34;Hello Activity!\u0026#34; button.setOnClickListener { Toast.makeText(this, \u0026#34;æŒ‰é’®è¢«ç‚¹å‡»\u0026#34;, Toast.LENGTH_SHORT).show() } } } Activity å¯åŠ¨æ–¹å¼ # 1. æ˜¾å¼å¯åŠ¨ # é€šè¿‡æŒ‡å®šå…·ä½“çš„ Activity ç±»æ¥å¯åŠ¨ï¼š\nclass MainActivity : AppCompatActivity() { private lateinit var startButton: Button override fun onCreate(savedInstanceState: Bundle?) { super.onCreate(savedInstanceState) setContentView(R.layout.activity_main) initViews() setupClickListeners() } private fun initViews() { startButton = findViewById(R.id.startButton) } private fun setupClickListeners() { startButton.setOnClickListener { // æ˜¾å¼å¯åŠ¨ SecondActivity val intent = Intent(this, SecondActivity::class.java) startActivity(intent) } } } 2. éšå¼å¯åŠ¨ # é€šè¿‡ Intent çš„ actionã€categoryã€data ç­‰å±æ€§æ¥å¯åŠ¨ï¼š\nclass MainActivity : AppCompatActivity() { private lateinit var openWebButton: Button private lateinit var dialButton: Button override fun onCreate(savedInstanceState: Bundle?) { super.onCreate(savedInstanceState) setContentView(R.layout.activity_main) initViews() setupClickListeners() } private fun initViews() { openWebButton = findViewById(R.id.openWebButton) dialButton = findViewById(R.id.dialButton) } private fun setupClickListeners() { // æ‰“å¼€ç½‘é¡µ openWebButton.setOnClickListener { val intent = Intent(Intent.ACTION_VIEW).apply { data = Uri.parse(\u0026#34;https://www.example.com\u0026#34;) } startActivity(intent) } // æ‹¨æ‰“ç”µè¯ dialButton.setOnClickListener { val intent = Intent(Intent.ACTION_DIAL).apply { data = Uri.parse(\u0026#34;tel:10086\u0026#34;) } startActivity(intent) } } } 3. startActivityForResult # å¯åŠ¨ Activity å¹¶ç­‰å¾…è¿”å›ç»“æœï¼š\nclass MainActivity : AppCompatActivity() { private lateinit var selectImageButton: Button private val REQUEST_CODE_SELECT_IMAGE = 1001 override fun onCreate(savedInstanceState: Bundle?) { super.onCreate(savedInstanceState) setContentView(R.layout.activity_main) initViews() setupClickListeners() } private fun initViews() { selectImageButton = findViewById(R.id.selectImageButton) } private fun setupClickListeners() { selectImageButton.setOnClickListener { val intent = Intent(Intent.ACTION_PICK).apply { type = \u0026#34;image/*\u0026#34; } startActivityForResult(intent, REQUEST_CODE_SELECT_IMAGE) } } override fun onActivityResult(requestCode: Int, resultCode: Int, data: Intent?) { super.onActivityResult(requestCode, resultCode, data) if (requestCode == REQUEST_CODE_SELECT_IMAGE \u0026amp;\u0026amp; resultCode == RESULT_OK) { data?.data?.let { imageUri -\u0026gt; // å¤„ç†é€‰æ‹©çš„å›¾ç‰‡ handleSelectedImage(imageUri) } } } private fun handleSelectedImage(imageUri: Uri) { Toast.makeText(this, \u0026#34;å›¾ç‰‡å·²é€‰æ‹©: $imageUri\u0026#34;, Toast.LENGTH_SHORT).show() } } Activity å¯åŠ¨æ¨¡å¼ # 1. Standardï¼ˆæ ‡å‡†æ¨¡å¼ï¼‰ # é»˜è®¤æ¨¡å¼ï¼Œæ¯æ¬¡å¯åŠ¨éƒ½ä¼šåˆ›å»ºæ–°çš„ Activity å®ä¾‹ï¼š\n\u0026lt;!-- AndroidManifest.xml --\u0026gt; \u0026lt;activity android:name=\u0026#34;.MainActivity\u0026#34; android:launchMode=\u0026#34;standard\u0026#34; /\u0026gt; class MainActivity : AppCompatActivity() { override fun onCreate(savedInstanceState: Bundle?) { super.onCreate(savedInstanceState) setContentView(R.layout.activity_main) Log.d(\u0026#34;Activity\u0026#34;, \u0026#34;onCreate: ${this.hashCode()}\u0026#34;) } override fun onNewIntent(intent: Intent?) { super.onNewIntent(intent) Log.d(\u0026#34;Activity\u0026#34;, \u0026#34;onNewIntent: ${this.hashCode()}\u0026#34;) } } 2. SingleTopï¼ˆé¡¶éƒ¨å¤ç”¨æ¨¡å¼ï¼‰ # å¦‚æœ Activity å·²ç»åœ¨æ ˆé¡¶ï¼Œåˆ™ä¸ä¼šåˆ›å»ºæ–°å®ä¾‹ï¼š\n\u0026lt;activity android:name=\u0026#34;.MainActivity\u0026#34; android:launchMode=\u0026#34;singleTop\u0026#34; /\u0026gt; class MainActivity : AppCompatActivity() { override fun onCreate(savedInstanceState: Bundle?) { super.onCreate(savedInstanceState) setContentView(R.layout.activity_main) Log.d(\u0026#34;Activity\u0026#34;, \u0026#34;onCreate: ${this.hashCode()}\u0026#34;) } override fun onNewIntent(intent: Intent?) { super.onNewIntent(intent) Log.d(\u0026#34;Activity\u0026#34;, \u0026#34;onNewIntent: ${this.hashCode()}\u0026#34;) // å¤„ç†æ–°çš„ Intent handleNewIntent(intent) } private fun handleNewIntent(intent: Intent?) { // æ›´æ–°ç•Œé¢æˆ–å¤„ç†æ–°æ•°æ® Toast.makeText(this, \u0026#34;æ”¶åˆ°æ–°çš„ Intent\u0026#34;, Toast.LENGTH_SHORT).show() } } 3. SingleTaskï¼ˆå•ä»»åŠ¡æ¨¡å¼ï¼‰ # æ•´ä¸ªåº”ç”¨ä¸­åªæœ‰ä¸€ä¸ªå®ä¾‹ï¼Œä¼šæ¸…é™¤å…¶ä¸Šçš„æ‰€æœ‰ Activityï¼š\n\u0026lt;activity android:name=\u0026#34;.MainActivity\u0026#34; android:launchMode=\u0026#34;singleTask\u0026#34; /\u0026gt; class MainActivity : AppCompatActivity() { override fun onCreate(savedInstanceState: Bundle?) { super.onCreate(savedInstanceState) setContentView(R.layout.activity_main) Log.d(\u0026#34;Activity\u0026#34;, \u0026#34;onCreate: ${this.hashCode()}\u0026#34;) } override fun onNewIntent(intent: Intent?) { super.onNewIntent(intent) Log.d(\u0026#34;Activity\u0026#34;, \u0026#34;onNewIntent: ${this.hashCode()}\u0026#34;) // å¤„ç†æ–°çš„ Intent handleNewIntent(intent) } private fun handleNewIntent(intent: Intent?) { // æ›´æ–°ç•Œé¢æˆ–å¤„ç†æ–°æ•°æ® Toast.makeText(this, \u0026#34;å›åˆ°ä¸»ç•Œé¢\u0026#34;, Toast.LENGTH_SHORT).show() } } 4. SingleInstanceï¼ˆå•å®ä¾‹æ¨¡å¼ï¼‰ # å•ç‹¬çš„ä»»åŠ¡æ ˆï¼Œæ•´ä¸ªç³»ç»Ÿä¸­åªæœ‰ä¸€ä¸ªå®ä¾‹ï¼š\n\u0026lt;activity android:name=\u0026#34;.MainActivity\u0026#34; android:launchMode=\u0026#34;singleInstance\u0026#34; /\u0026gt; Activity ç”Ÿå‘½å‘¨æœŸ # ç”Ÿå‘½å‘¨æœŸæ–¹æ³•è¯¦è§£ # class LifecycleActivity : AppCompatActivity() { override fun onCreate(savedInstanceState: Bundle?) { super.onCreate(savedInstanceState) setContentView(R.layout.activity_lifecycle) Log.d(\u0026#34;Lifecycle\u0026#34;, \u0026#34;onCreate\u0026#34;) // åˆå§‹åŒ–ç•Œé¢å’Œæ•°æ® initViews() initData() } override fun onStart() { super.onStart() Log.d(\u0026#34;Lifecycle\u0026#34;, \u0026#34;onStart\u0026#34;) // Activity å˜ä¸ºå¯è§çŠ¶æ€ } override fun onResume() { super.onResume() Log.d(\u0026#34;Lifecycle\u0026#34;, \u0026#34;onResume\u0026#34;) // Activity è·å¾—ç„¦ç‚¹ï¼Œå¯ä»¥æ¥æ”¶ç”¨æˆ·è¾“å…¥ startLocationUpdates() } override fun onPause() { super.onPause() Log.d(\u0026#34;Lifecycle\u0026#34;, \u0026#34;onPause\u0026#34;) // Activity å¤±å»ç„¦ç‚¹ï¼Œæš‚åœæ“ä½œ stopLocationUpdates() } override fun onStop() { super.onStop() Log.d(\u0026#34;Lifecycle\u0026#34;, \u0026#34;onStop\u0026#34;) // Activity ä¸å¯è§ } override fun onRestart() { super.onRestart() Log.d(\u0026#34;Lifecycle\u0026#34;, \u0026#34;onRestart\u0026#34;) // ä»åœæ­¢çŠ¶æ€é‡æ–°å¯åŠ¨ } override fun onDestroy() { super.onDestroy() Log.d(\u0026#34;Lifecycle\u0026#34;, \u0026#34;onDestroy\u0026#34;) // é‡Šæ”¾èµ„æº releaseResources() } private fun initViews() { // åˆå§‹åŒ–ç•Œé¢æ§ä»¶ } private fun initData() { // åˆå§‹åŒ–æ•°æ® } private fun startLocationUpdates() { // å¼€å§‹ä½ç½®æ›´æ–° } private fun stopLocationUpdates() { // åœæ­¢ä½ç½®æ›´æ–° } private fun releaseResources() { // é‡Šæ”¾èµ„æº } } ç”Ÿå‘½å‘¨æœŸçŠ¶æ€å›¾ # graph TD A[onCreate] --\u003e B[onStart] B --\u003e C[onResume] C --\u003e D[onPause] D --\u003e E[onStop] E --\u003e F[onDestroy] D --\u003e C E --\u003e B E --\u003e F G[onRestart] --\u003e B E --\u003e G ä¿å­˜å’Œæ¢å¤çŠ¶æ€ # class StateActivity : AppCompatActivity() { private lateinit var editText: EditText private lateinit var counterText: TextView private var counter = 0 override fun onCreate(savedInstanceState: Bundle?) { super.onCreate(savedInstanceState) setContentView(R.layout.activity_state) initViews() // æ¢å¤ä¿å­˜çš„çŠ¶æ€ savedInstanceState?.let { counter = it.getInt(\u0026#34;counter\u0026#34;, 0) updateCounterDisplay() } } private fun initViews() { editText = findViewById(R.id.editText) counterText = findViewById(R.id.counterText) findViewById\u0026lt;Button\u0026gt;(R.id.incrementButton).setOnClickListener { counter++ updateCounterDisplay() } } private fun updateCounterDisplay() { counterText.text = \u0026#34;è®¡æ•°: $counter\u0026#34; } override fun onSaveInstanceState(outState: Bundle) { super.onSaveInstanceState(outState) // ä¿å­˜çŠ¶æ€ outState.putInt(\u0026#34;counter\u0026#34;, counter) outState.putString(\u0026#34;editText\u0026#34;, editText.text.toString()) } override fun onRestoreInstanceState(savedInstanceState: Bundle) { super.onRestoreInstanceState(savedInstanceState) // æ¢å¤çŠ¶æ€ counter = savedInstanceState.getInt(\u0026#34;counter\u0026#34;, 0) editText.setText(savedInstanceState.getString(\u0026#34;editText\u0026#34;, \u0026#34;\u0026#34;)) updateCounterDisplay() } } Activity æ•°æ®ä¼ é€’ # 1. ä¼ é€’ç®€å•æ•°æ® # class MainActivity : AppCompatActivity() { private lateinit var startButton: Button override fun onCreate(savedInstanceState: Bundle?) { super.onCreate(savedInstanceState) setContentView(R.layout.activity_main) initViews() setupClickListeners() } private fun initViews() { startButton = findViewById(R.id.startButton) } private fun setupClickListeners() { startButton.setOnClickListener { val intent = Intent(this, SecondActivity::class.java).apply { // ä¼ é€’ç®€å•æ•°æ® putExtra(\u0026#34;name\u0026#34;, \u0026#34;å¼ ä¸‰\u0026#34;) putExtra(\u0026#34;age\u0026#34;, 25) putExtra(\u0026#34;isStudent\u0026#34;, true) } startActivity(intent) } } } class SecondActivity : AppCompatActivity() { override fun onCreate(savedInstanceState: Bundle?) { super.onCreate(savedInstanceState) setContentView(R.layout.activity_second) // æ¥æ”¶ä¼ é€’çš„æ•°æ® val name = intent.getStringExtra(\u0026#34;name\u0026#34;) val age = intent.getIntExtra(\u0026#34;age\u0026#34;, 0) val isStudent = intent.getBooleanExtra(\u0026#34;isStudent\u0026#34;, false) // æ˜¾ç¤ºæ•°æ® findViewById\u0026lt;TextView\u0026gt;(R.id.nameText).text = \u0026#34;å§“å: $name\u0026#34; findViewById\u0026lt;TextView\u0026gt;(R.id.ageText).text = \u0026#34;å¹´é¾„: $age\u0026#34; findViewById\u0026lt;TextView\u0026gt;(R.id.studentText).text = \u0026#34;å­¦ç”Ÿ: $isStudent\u0026#34; } } 2. ä¼ é€’å¯¹è±¡æ•°æ® # // æ•°æ®ç±» data class User( val name: String, val age: Int, val email: String ) : Parcelable { constructor(parcel: Parcel) : this( parcel.readString() ?: \u0026#34;\u0026#34;, parcel.readInt(), parcel.readString() ?: \u0026#34;\u0026#34; ) override fun writeToParcel(parcel: Parcel, flags: Int) { parcel.writeString(name) parcel.writeInt(age) parcel.writeString(email) } override fun describeContents(): Int = 0 companion object CREATOR : Parcelable.Creator\u0026lt;User\u0026gt; { override fun createFromParcel(parcel: Parcel): User = User(parcel) override fun newArray(size: Int): Array\u0026lt;User?\u0026gt; = arrayOfNulls(size) } } class MainActivity : AppCompatActivity() { private lateinit var startButton: Button override fun onCreate(savedInstanceState: Bundle?) { super.onCreate(savedInstanceState) setContentView(R.layout.activity_main) initViews() setupClickListeners() } private fun initViews() { startButton = findViewById(R.id.startButton) } private fun setupClickListeners() { startButton.setOnClickListener { val user = User(\u0026#34;æå››\u0026#34;, 30, \u0026#34;lisi@example.com\u0026#34;) val intent = Intent(this, SecondActivity::class.java).apply { putExtra(\u0026#34;user\u0026#34;, user) } startActivity(intent) } } } class SecondActivity : AppCompatActivity() { override fun onCreate(savedInstanceState: Bundle?) { super.onCreate(savedInstanceState) setContentView(R.layout.activity_second) // æ¥æ”¶ä¼ é€’çš„å¯¹è±¡ val user = intent.getParcelableExtra\u0026lt;User\u0026gt;(\u0026#34;user\u0026#34;) user?.let { findViewById\u0026lt;TextView\u0026gt;(R.id.nameText).text = \u0026#34;å§“å: ${it.name}\u0026#34; findViewById\u0026lt;TextView\u0026gt;(R.id.ageText).text = \u0026#34;å¹´é¾„: ${it.age}\u0026#34; findViewById\u0026lt;TextView\u0026gt;(R.id.emailText).text = \u0026#34;é‚®ç®±: ${it.email}\u0026#34; } } } 3. è¿”å›æ•°æ®ç»™ä¸Šä¸€ä¸ª Activity # class SecondActivity : AppCompatActivity() { private lateinit var resultButton: Button override fun onCreate(savedInstanceState: Bundle?) { super.onCreate(savedInstanceState) setContentView(R.layout.activity_second) initViews() setupClickListeners() } private fun initViews() { resultButton = findViewById(R.id.resultButton) } private fun setupClickListeners() { resultButton.setOnClickListener { val resultIntent = Intent().apply { putExtra(\u0026#34;result\u0026#34;, \u0026#34;æ“ä½œæˆåŠŸ\u0026#34;) putExtra(\u0026#34;code\u0026#34;, 200) } setResult(RESULT_OK, resultIntent) finish() } } } class MainActivity : AppCompatActivity() { private val REQUEST_CODE_SECOND = 1001 override fun onCreate(savedInstanceState: Bundle?) { super.onCreate(savedInstanceState) setContentView(R.layout.activity_main) initViews() setupClickListeners() } private fun initViews() { findViewById\u0026lt;Button\u0026gt;(R.id.startButton).setOnClickListener { val intent = Intent(this, SecondActivity::class.java) startActivityForResult(intent, REQUEST_CODE_SECOND) } } private fun setupClickListeners() { // ç‚¹å‡»äº‹ä»¶å·²åœ¨ initViews ä¸­è®¾ç½® } override fun onActivityResult(requestCode: Int, resultCode: Int, data: Intent?) { super.onActivityResult(requestCode, resultCode, data) if (requestCode == REQUEST_CODE_SECOND \u0026amp;\u0026amp; resultCode == RESULT_OK) { val result = data?.getStringExtra(\u0026#34;result\u0026#34;) val code = data?.getIntExtra(\u0026#34;code\u0026#34;, 0) Toast.makeText(this, \u0026#34;ç»“æœ: $result, ä»£ç : $code\u0026#34;, Toast.LENGTH_SHORT).show() } } } Activity æœ€ä½³å®è·µ # 1. å†…å­˜æ³„æ¼é˜²æŠ¤ # class MainActivity : AppCompatActivity() { private var handler: Handler? = null private var runnable: Runnable? = null override fun onCreate(savedInstanceState: Bundle?) { super.onCreate(savedInstanceState) setContentView(R.layout.activity_main) // ä½¿ç”¨å¼±å¼•ç”¨é¿å…å†…å­˜æ³„æ¼ handler = Handler(Looper.getMainLooper()) runnable = Runnable { // æ›´æ–°ç•Œé¢ updateUI() } handler?.postDelayed(runnable!!, 1000) } override fun onDestroy() { super.onDestroy() // æ¸…ç†èµ„æº handler?.removeCallbacks(runnable!!) handler = null runnable = null } private fun updateUI() { // æ›´æ–°ç•Œé¢é€»è¾‘ } } 2. çŠ¶æ€ä¿å­˜å’Œæ¢å¤ # class MainActivity : AppCompatActivity() { private lateinit var editText: EditText private var userInput: String = \u0026#34;\u0026#34; override fun onCreate(savedInstanceState: Bundle?) { super.onCreate(savedInstanceState) setContentView(R.layout.activity_main) initViews() // æ¢å¤ä¿å­˜çš„çŠ¶æ€ savedInstanceState?.let { userInput = it.getString(\u0026#34;userInput\u0026#34;, \u0026#34;\u0026#34;) editText.setText(userInput) } } private fun initViews() { editText = findViewById(R.id.editText) editText.addTextChangedListener(object : TextWatcher { override fun beforeTextChanged(s: CharSequence?, start: Int, count: Int, after: Int) {} override fun onTextChanged(s: CharSequence?, start: Int, before: Int, count: Int) { userInput = s.toString() } override fun afterTextChanged(s: Editable?) {} }) } override fun onSaveInstanceState(outState: Bundle) { super.onSaveInstanceState(outState) outState.putString(\u0026#34;userInput\u0026#34;, userInput) } } 3. æƒé™å¤„ç† # class MainActivity : AppCompatActivity() { private val REQUEST_CODE_PERMISSION = 1001 override fun onCreate(savedInstanceState: Bundle?) { super.onCreate(savedInstanceState) setContentView(R.layout.activity_main) checkPermissions() } private fun checkPermissions() { if (ContextCompat.checkSelfPermission(this, Manifest.permission.CAMERA) != PackageManager.PERMISSION_GRANTED) { ActivityCompat.requestPermissions( this, arrayOf(Manifest.permission.CAMERA), REQUEST_CODE_PERMISSION ) } else { // æƒé™å·²æˆäºˆï¼Œæ‰§è¡Œç›¸å…³æ“ä½œ openCamera() } } override fun onRequestPermissionsResult( requestCode: Int, permissions: Array\u0026lt;out String\u0026gt;, grantResults: IntArray ) { super.onRequestPermissionsResult(requestCode, permissions, grantResults) if (requestCode == REQUEST_CODE_PERMISSION) { if (grantResults.isNotEmpty() \u0026amp;\u0026amp; grantResults[0] == PackageManager.PERMISSION_GRANTED) { // æƒé™å·²æˆäºˆ openCamera() } else { // æƒé™è¢«æ‹’ç» Toast.makeText(this, \u0026#34;éœ€è¦ç›¸æœºæƒé™\u0026#34;, Toast.LENGTH_SHORT).show() } } } private fun openCamera() { // æ‰“å¼€ç›¸æœº Toast.makeText(this, \u0026#34;ç›¸æœºå·²æ‰“å¼€\u0026#34;, Toast.LENGTH_SHORT).show() } } ğŸ“‹ æ€»ç»“ # Activity æ˜¯ Android åº”ç”¨çš„æ ¸å¿ƒç»„ä»¶ï¼š\nç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼šç†è§£ onCreateã€onStartã€onResume ç­‰ç”Ÿå‘½å‘¨æœŸæ–¹æ³• å¯åŠ¨æ¨¡å¼ï¼šStandardã€SingleTopã€SingleTaskã€SingleInstance å››ç§æ¨¡å¼ æ•°æ®ä¼ é€’ï¼šé€šè¿‡ Intent ä¼ é€’ç®€å•æ•°æ®å’Œå¯¹è±¡ çŠ¶æ€ä¿å­˜ï¼šä½¿ç”¨ onSaveInstanceState ä¿å­˜å’Œæ¢å¤çŠ¶æ€ æœ€ä½³å®è·µï¼šé¿å…å†…å­˜æ³„æ¼ã€æ­£ç¡®å¤„ç†æƒé™ã€åˆç†ä½¿ç”¨ç”Ÿå‘½å‘¨æœŸ æŒæ¡ Activity çš„ä½¿ç”¨æ–¹æ³•æ˜¯ Android å¼€å‘çš„åŸºç¡€ï¼Œå¯¹äºæ„å»ºé«˜è´¨é‡çš„åº”ç”¨è‡³å…³é‡è¦ã€‚\n","date":"24 October 2025","externalUrl":null,"permalink":"/posts/android/11---activity-%E6%B4%BB%E5%8A%A8%E7%BB%84%E4%BB%B6/","section":"Posts","summary":"è¯¦ç»†ä»‹ç»Android Activityæ´»åŠ¨ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸã€å¯åŠ¨æ¨¡å¼ã€æ•°æ®ä¼ é€’å’Œæœ€ä½³å®è·µ","title":"Activity æ´»åŠ¨ç»„ä»¶","type":"posts"},{"content":" AlertDialog æ¶ˆæ¯æç¤º # AlertDialog æ˜¯ Android ä¸­æœ€å¸¸ç”¨çš„å¯¹è¯æ¡†ç»„ä»¶ï¼Œç”¨äºå‘ç”¨æˆ·ä¼ é€’ä¿¡æ¯ã€æç¤ºæˆ–è­¦å‘Šç”¨æˆ·çš„è¡Œä¸ºã€‚\nAlertDialog åŸºæœ¬æ¦‚å¿µ # AlertDialog æ˜¯ä¸€ä¸ªæ¨¡æ€å¯¹è¯æ¡†ï¼Œç”¨äºæ˜¾ç¤ºé‡è¦ä¿¡æ¯æˆ–è·å–ç”¨æˆ·ç¡®è®¤ã€‚å®ƒæä¾›äº†å¤šç§æ ·å¼å’Œäº¤äº’æ–¹å¼ã€‚\nåŸºæœ¬æ–¹æ³• # æ–¹æ³• è¯´æ˜ ç¤ºä¾‹ setTitle() è®¾ç½®å¯¹è¯æ¡†æ ‡é¢˜ setTitle(\u0026quot;æç¤º\u0026quot;) setMessage() è®¾ç½®å¯¹è¯æ¡†å†…å®¹ setMessage(\u0026quot;ç¡®å®šè¦åˆ é™¤å—ï¼Ÿ\u0026quot;) setPositiveButton() è®¾ç½®ç¡®è®¤æŒ‰é’® setPositiveButton(\u0026quot;ç¡®å®š\u0026quot;) setNegativeButton() è®¾ç½®å–æ¶ˆæŒ‰é’® setNegativeButton(\u0026quot;å–æ¶ˆ\u0026quot;) setNeutralButton() è®¾ç½®ä¸­æ€§æŒ‰é’® setNeutralButton(\u0026quot;ç¨å\u0026quot;) create() åˆ›å»ºå¯¹è¯æ¡† builder.create() show() æ˜¾ç¤ºå¯¹è¯æ¡† dialog.show() åŸºæœ¬ä½¿ç”¨ç¤ºä¾‹ # 1. ç®€å•æç¤ºå¯¹è¯æ¡† # class AlertDialogActivity : AppCompatActivity() { private lateinit var showDialogButton: Button override fun onCreate(savedInstanceState: Bundle?) { super.onCreate(savedInstanceState) setContentView(R.layout.activity_alert_dialog) initViews() setupClickListeners() } private fun initViews() { showDialogButton = findViewById(R.id.showDialogButton) } private fun setupClickListeners() { showDialogButton.setOnClickListener { showSimpleDialog() } } private fun showSimpleDialog() { AlertDialog.Builder(this) .setTitle(\u0026#34;æç¤º\u0026#34;) .setMessage(\u0026#34;è¿™æ˜¯ä¸€ä¸ªç®€å•çš„æç¤ºå¯¹è¯æ¡†\u0026#34;) .setPositiveButton(\u0026#34;ç¡®å®š\u0026#34;) { dialog, which -\u0026gt; Toast.makeText(this, \u0026#34;ç‚¹å‡»äº†ç¡®å®š\u0026#34;, Toast.LENGTH_SHORT).show() } .setNegativeButton(\u0026#34;å–æ¶ˆ\u0026#34;) { dialog, which -\u0026gt; Toast.makeText(this, \u0026#34;ç‚¹å‡»äº†å–æ¶ˆ\u0026#34;, Toast.LENGTH_SHORT).show() } .show() } } 2. ç¡®è®¤å¯¹è¯æ¡† # class ConfirmDialogActivity : AppCompatActivity() { private lateinit var deleteButton: Button private lateinit var exitButton: Button override fun onCreate(savedInstanceState: Bundle?) { super.onCreate(savedInstanceState) setContentView(R.layout.activity_confirm_dialog) initViews() setupClickListeners() } private fun initViews() { deleteButton = findViewById(R.id.deleteButton) exitButton = findViewById(R.id.exitButton) } private fun setupClickListeners() { deleteButton.setOnClickListener { showDeleteConfirmDialog() } exitButton.setOnClickListener { showExitConfirmDialog() } } private fun showDeleteConfirmDialog() { AlertDialog.Builder(this) .setTitle(\u0026#34;åˆ é™¤ç¡®è®¤\u0026#34;) .setMessage(\u0026#34;ç¡®å®šè¦åˆ é™¤è¿™ä¸ªé¡¹ç›®å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ’¤é”€ã€‚\u0026#34;) .setPositiveButton(\u0026#34;åˆ é™¤\u0026#34;) { dialog, which -\u0026gt; performDelete() } .setNegativeButton(\u0026#34;å–æ¶ˆ\u0026#34;) { dialog, which -\u0026gt; Toast.makeText(this, \u0026#34;å–æ¶ˆåˆ é™¤\u0026#34;, Toast.LENGTH_SHORT).show() } .setIcon(android.R.drawable.ic_dialog_alert) .show() } private fun showExitConfirmDialog() { AlertDialog.Builder(this) .setTitle(\u0026#34;é€€å‡ºåº”ç”¨\u0026#34;) .setMessage(\u0026#34;ç¡®å®šè¦é€€å‡ºåº”ç”¨å—ï¼Ÿ\u0026#34;) .setPositiveButton(\u0026#34;é€€å‡º\u0026#34;) { dialog, which -\u0026gt; finish() } .setNegativeButton(\u0026#34;å–æ¶ˆ\u0026#34;) { dialog, which -\u0026gt; Toast.makeText(this, \u0026#34;å–æ¶ˆé€€å‡º\u0026#34;, Toast.LENGTH_SHORT).show() } .setNeutralButton(\u0026#34;æœ€å°åŒ–\u0026#34;) { dialog, which -\u0026gt; moveTaskToBack(true) } .show() } private fun performDelete() { Toast.makeText(this, \u0026#34;åˆ é™¤æˆåŠŸ\u0026#34;, Toast.LENGTH_SHORT).show() // æ‰§è¡Œåˆ é™¤æ“ä½œ } } 3. åˆ—è¡¨é€‰æ‹©å¯¹è¯æ¡† # class ListDialogActivity : AppCompatActivity() { private lateinit var showListButton: Button private lateinit var showMultiChoiceButton: Button private val items = arrayOf(\u0026#34;é€‰é¡¹1\u0026#34;, \u0026#34;é€‰é¡¹2\u0026#34;, \u0026#34;é€‰é¡¹3\u0026#34;, \u0026#34;é€‰é¡¹4\u0026#34;, \u0026#34;é€‰é¡¹5\u0026#34;) private val selectedItems = booleanArrayOf(false, false, false, false, false) override fun onCreate(savedInstanceState: Bundle?) { super.onCreate(savedInstanceState) setContentView(R.layout.activity_list_dialog) initViews() setupClickListeners() } private fun initViews() { showListButton = findViewById(R.id.showListButton) showMultiChoiceButton = findViewById(R.id.showMultiChoiceButton) } private fun setupClickListeners() { showListButton.setOnClickListener { showSingleChoiceDialog() } showMultiChoiceButton.setOnClickListener { showMultiChoiceDialog() } } private fun showSingleChoiceDialog() { AlertDialog.Builder(this) .setTitle(\u0026#34;é€‰æ‹©é€‰é¡¹\u0026#34;) .setItems(items) { dialog, which -\u0026gt; Toast.makeText(this, \u0026#34;é€‰æ‹©äº†: ${items[which]}\u0026#34;, Toast.LENGTH_SHORT).show() } .setNegativeButton(\u0026#34;å–æ¶ˆ\u0026#34;) { dialog, which -\u0026gt; Toast.makeText(this, \u0026#34;å–æ¶ˆé€‰æ‹©\u0026#34;, Toast.LENGTH_SHORT).show() } .show() } private fun showMultiChoiceDialog() { AlertDialog.Builder(this) .setTitle(\u0026#34;å¤šé€‰é€‰é¡¹\u0026#34;) .setMultiChoiceItems(items, selectedItems) { dialog, which, isChecked -\u0026gt; selectedItems[which] = isChecked } .setPositiveButton(\u0026#34;ç¡®å®š\u0026#34;) { dialog, which -\u0026gt; val selectedOptions = mutableListOf\u0026lt;String\u0026gt;() selectedItems.forEachIndexed { index, isSelected -\u0026gt; if (isSelected) { selectedOptions.add(items[index]) } } Toast.makeText(this, \u0026#34;é€‰æ‹©äº†: ${selectedOptions.joinToString(\u0026#34;, \u0026#34;)}\u0026#34;, Toast.LENGTH_LONG).show() } .setNegativeButton(\u0026#34;å–æ¶ˆ\u0026#34;) { dialog, which -\u0026gt; Toast.makeText(this, \u0026#34;å–æ¶ˆé€‰æ‹©\u0026#34;, Toast.LENGTH_SHORT).show() } .show() } } è‡ªå®šä¹‰å¯¹è¯æ¡† # 1. è‡ªå®šä¹‰å¸ƒå±€å¯¹è¯æ¡† # class CustomDialogActivity : AppCompatActivity() { private lateinit var showCustomDialogButton: Button private lateinit var showLoginDialogButton: Button override fun onCreate(savedInstanceState: Bundle?) { super.onCreate(savedInstanceState) setContentView(R.layout.activity_custom_dialog) initViews() setupClickListeners() } private fun initViews() { showCustomDialogButton = findViewById(R.id.showCustomDialogButton) showLoginDialogButton = findViewById(R.id.showLoginDialogButton) } private fun setupClickListeners() { showCustomDialogButton.setOnClickListener { showCustomLayoutDialog() } showLoginDialogButton.setOnClickListener { showLoginDialog() } } private fun showCustomLayoutDialog() { val dialogView = layoutInflater.inflate(R.layout.dialog_custom, null) val editText = dialogView.findViewById\u0026lt;EditText\u0026gt;(R.id.editText) val checkBox = dialogView.findViewById\u0026lt;CheckBox\u0026gt;(R.id.checkBox) AlertDialog.Builder(this) .setTitle(\u0026#34;è‡ªå®šä¹‰å¯¹è¯æ¡†\u0026#34;) .setView(dialogView) .setPositiveButton(\u0026#34;ç¡®å®š\u0026#34;) { dialog, which -\u0026gt; val inputText = editText.text.toString() val isChecked = checkBox.isChecked Toast.makeText(this, \u0026#34;è¾“å…¥: $inputText, å‹¾é€‰: $isChecked\u0026#34;, Toast.LENGTH_SHORT).show() } .setNegativeButton(\u0026#34;å–æ¶ˆ\u0026#34;) { dialog, which -\u0026gt; Toast.makeText(this, \u0026#34;å–æ¶ˆæ“ä½œ\u0026#34;, Toast.LENGTH_SHORT).show() } .show() } private fun showLoginDialog() { val dialogView = layoutInflater.inflate(R.layout.dialog_login, null) val usernameEditText = dialogView.findViewById\u0026lt;EditText\u0026gt;(R.id.usernameEditText) val passwordEditText = dialogView.findViewById\u0026lt;EditText\u0026gt;(R.id.passwordEditText) val rememberCheckBox = dialogView.findViewById\u0026lt;CheckBox\u0026gt;(R.id.rememberCheckBox) AlertDialog.Builder(this) .setTitle(\u0026#34;ç”¨æˆ·ç™»å½•\u0026#34;) .setView(dialogView) .setPositiveButton(\u0026#34;ç™»å½•\u0026#34;) { dialog, which -\u0026gt; val username = usernameEditText.text.toString() val password = passwordEditText.text.toString() val remember = rememberCheckBox.isChecked if (username.isNotEmpty() \u0026amp;\u0026amp; password.isNotEmpty()) { performLogin(username, password, remember) } else { Toast.makeText(this, \u0026#34;è¯·è¾“å…¥ç”¨æˆ·åå’Œå¯†ç \u0026#34;, Toast.LENGTH_SHORT).show() } } .setNegativeButton(\u0026#34;å–æ¶ˆ\u0026#34;) { dialog, which -\u0026gt; Toast.makeText(this, \u0026#34;å–æ¶ˆç™»å½•\u0026#34;, Toast.LENGTH_SHORT).show() } .setCancelable(false) .show() } private fun performLogin(username: String, password: String, remember: Boolean) { Toast.makeText(this, \u0026#34;ç™»å½•æˆåŠŸ: $username, è®°ä½å¯†ç : $remember\u0026#34;, Toast.LENGTH_SHORT).show() // æ‰§è¡Œç™»å½•é€»è¾‘ } } 2. è‡ªå®šä¹‰æ ·å¼å¯¹è¯æ¡† # \u0026lt;!-- res/values/styles.xml --\u0026gt; \u0026lt;style name=\u0026#34;CustomDialogTheme\u0026#34; parent=\u0026#34;Theme.AppCompat.Dialog\u0026#34;\u0026gt; \u0026lt;item name=\u0026#34;android:windowBackground\u0026#34;\u0026gt;@drawable/dialog_background\u0026lt;/item\u0026gt; \u0026lt;item name=\u0026#34;android:windowAnimationStyle\u0026#34;\u0026gt;@style/DialogAnimation\u0026lt;/item\u0026gt; \u0026lt;/style\u0026gt; \u0026lt;style name=\u0026#34;DialogAnimation\u0026#34;\u0026gt; \u0026lt;item name=\u0026#34;android:windowEnterAnimation\u0026#34;\u0026gt;@anim/dialog_enter\u0026lt;/item\u0026gt; \u0026lt;item name=\u0026#34;android:windowExitAnimation\u0026#34;\u0026gt;@anim/dialog_exit\u0026lt;/item\u0026gt; \u0026lt;/style\u0026gt; class StyledDialogActivity : AppCompatActivity() { private lateinit var showStyledDialogButton: Button override fun onCreate(savedInstanceState: Bundle?) { super.onCreate(savedInstanceState) setContentView(R.layout.activity_styled_dialog) initViews() setupClickListeners() } private fun initViews() { showStyledDialogButton = findViewById(R.id.showStyledDialogButton) } private fun setupClickListeners() { showStyledDialogButton.setOnClickListener { showStyledDialog() } } private fun showStyledDialog() { val dialog = AlertDialog.Builder(this, R.style.CustomDialogTheme) .setTitle(\u0026#34;æ ·å¼å¯¹è¯æ¡†\u0026#34;) .setMessage(\u0026#34;è¿™æ˜¯ä¸€ä¸ªè‡ªå®šä¹‰æ ·å¼çš„å¯¹è¯æ¡†\u0026#34;) .setPositiveButton(\u0026#34;ç¡®å®š\u0026#34;) { dialog, which -\u0026gt; Toast.makeText(this, \u0026#34;ç‚¹å‡»äº†ç¡®å®š\u0026#34;, Toast.LENGTH_SHORT).show() } .setNegativeButton(\u0026#34;å–æ¶ˆ\u0026#34;) { dialog, which -\u0026gt; Toast.makeText(this, \u0026#34;ç‚¹å‡»äº†å–æ¶ˆ\u0026#34;, Toast.LENGTH_SHORT).show() } .create() dialog.show() // è‡ªå®šä¹‰æŒ‰é’®æ ·å¼ dialog.getButton(AlertDialog.BUTTON_POSITIVE)?.setTextColor(ContextCompat.getColor(this, R.color.primary)) dialog.getButton(AlertDialog.BUTTON_NEGATIVE)?.setTextColor(ContextCompat.getColor(this, R.color.secondary)) } } å®é™…åº”ç”¨åœºæ™¯ # 1. æƒé™è¯·æ±‚å¯¹è¯æ¡† # class PermissionDialogActivity : AppCompatActivity() { private lateinit var requestPermissionButton: Button override fun onCreate(savedInstanceState: Bundle?) { super.onCreate(savedInstanceState) setContentView(R.layout.activity_permission_dialog) initViews() setupClickListeners() } private fun initViews() { requestPermissionButton = findViewById(R.id.requestPermissionButton) } private fun setupClickListeners() { requestPermissionButton.setOnClickListener { showPermissionDialog() } } private fun showPermissionDialog() { AlertDialog.Builder(this) .setTitle(\u0026#34;æƒé™è¯·æ±‚\u0026#34;) .setMessage(\u0026#34;åº”ç”¨éœ€è¦è®¿é—®ç›¸æœºæƒé™æ¥æ‹ç…§ï¼Œæ˜¯å¦å…è®¸ï¼Ÿ\u0026#34;) .setPositiveButton(\u0026#34;å…è®¸\u0026#34;) { dialog, which -\u0026gt; requestCameraPermission() } .setNegativeButton(\u0026#34;æ‹’ç»\u0026#34;) { dialog, which -\u0026gt; Toast.makeText(this, \u0026#34;æƒé™è¢«æ‹’ç»\u0026#34;, Toast.LENGTH_SHORT).show() } .setIcon(android.R.drawable.ic_dialog_info) .show() } private fun requestCameraPermission() { if (ContextCompat.checkSelfPermission(this, Manifest.permission.CAMERA) != PackageManager.PERMISSION_GRANTED) { ActivityCompat.requestPermissions(this, arrayOf(Manifest.permission.CAMERA), 1001) } } } 2. ç½‘ç»œé”™è¯¯å¯¹è¯æ¡† # class NetworkErrorDialogActivity : AppCompatActivity() { private lateinit var simulateErrorButton: Button override fun onCreate(savedInstanceState: Bundle?) { super.onCreate(savedInstanceState) setContentView(R.layout.activity_network_error_dialog) initViews() setupClickListeners() } private fun initViews() { simulateErrorButton = findViewById(R.id.simulateErrorButton) } private fun setupClickListeners() { simulateErrorButton.setOnClickListener { showNetworkErrorDialog() } } private fun showNetworkErrorDialog() { AlertDialog.Builder(this) .setTitle(\u0026#34;ç½‘ç»œé”™è¯¯\u0026#34;) .setMessage(\u0026#34;ç½‘ç»œè¿æ¥å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè®¾ç½®åé‡è¯•\u0026#34;) .setPositiveButton(\u0026#34;é‡è¯•\u0026#34;) { dialog, which -\u0026gt; retryNetworkRequest() } .setNegativeButton(\u0026#34;å–æ¶ˆ\u0026#34;) { dialog, which -\u0026gt; Toast.makeText(this, \u0026#34;å–æ¶ˆæ“ä½œ\u0026#34;, Toast.LENGTH_SHORT).show() } .setNeutralButton(\u0026#34;è®¾ç½®\u0026#34;) { dialog, which -\u0026gt; openNetworkSettings() } .setIcon(android.R.drawable.ic_dialog_alert) .setCancelable(false) .show() } private fun retryNetworkRequest() { Toast.makeText(this, \u0026#34;æ­£åœ¨é‡è¯•...\u0026#34;, Toast.LENGTH_SHORT).show() // æ‰§è¡Œé‡è¯•é€»è¾‘ } private fun openNetworkSettings() { Toast.makeText(this, \u0026#34;æ‰“å¼€ç½‘ç»œè®¾ç½®\u0026#34;, Toast.LENGTH_SHORT).show() // æ‰“å¼€ç½‘ç»œè®¾ç½®é¡µé¢ } } 3. æ›´æ–°æç¤ºå¯¹è¯æ¡† # class UpdateDialogActivity : AppCompatActivity() { private lateinit var showUpdateButton: Button override fun onCreate(savedInstanceState: Bundle?) { super.onCreate(savedInstanceState) setContentView(R.layout.activity_update_dialog) initViews() setupClickListeners() } private fun initViews() { showUpdateButton = findViewById(R.id.showUpdateButton) } private fun setupClickListeners() { showUpdateButton.setOnClickListener { showUpdateDialog() } } private fun showUpdateDialog() { AlertDialog.Builder(this) .setTitle(\u0026#34;å‘ç°æ–°ç‰ˆæœ¬\u0026#34;) .setMessage(\u0026#34;å‘ç°æ–°ç‰ˆæœ¬ v2.0.0ï¼Œæ˜¯å¦ç«‹å³æ›´æ–°ï¼Ÿ\\n\\næ›´æ–°å†…å®¹ï¼š\\nâ€¢ ä¿®å¤å·²çŸ¥é—®é¢˜\\nâ€¢ æ–°å¢åŠŸèƒ½\\nâ€¢ æ€§èƒ½ä¼˜åŒ–\u0026#34;) .setPositiveButton(\u0026#34;ç«‹å³æ›´æ–°\u0026#34;) { dialog, which -\u0026gt; startUpdate() } .setNegativeButton(\u0026#34;ç¨åæ›´æ–°\u0026#34;) { dialog, which -\u0026gt; Toast.makeText(this, \u0026#34;ç¨åæ›´æ–°\u0026#34;, Toast.LENGTH_SHORT).show() } .setNeutralButton(\u0026#34;è·³è¿‡æ­¤ç‰ˆæœ¬\u0026#34;) { dialog, which -\u0026gt; skipThisVersion() } .setIcon(android.R.drawable.ic_dialog_info) .setCancelable(false) .show() } private fun startUpdate() { Toast.makeText(this, \u0026#34;å¼€å§‹æ›´æ–°...\u0026#34;, Toast.LENGTH_SHORT).show() // æ‰§è¡Œæ›´æ–°é€»è¾‘ } private fun skipThisVersion() { Toast.makeText(this, \u0026#34;è·³è¿‡æ­¤ç‰ˆæœ¬\u0026#34;, Toast.LENGTH_SHORT).show() // è®°å½•è·³è¿‡ç‰ˆæœ¬ } } å¯¹è¯æ¡†æœ€ä½³å®è·µ # 1. å¯¹è¯æ¡†ç®¡ç† # class DialogManager { private var currentDialog: AlertDialog? = null fun showDialog( context: Context, title: String, message: String, positiveText: String = \u0026#34;ç¡®å®š\u0026#34;, negativeText: String = \u0026#34;å–æ¶ˆ\u0026#34;, onPositiveClick: (() -\u0026gt; Unit)? = null, onNegativeClick: (() -\u0026gt; Unit)? = null ) { dismissCurrentDialog() currentDialog = AlertDialog.Builder(context) .setTitle(title) .setMessage(message) .setPositiveButton(positiveText) { dialog, which -\u0026gt; onPositiveClick?.invoke() } .setNegativeButton(negativeText) { dialog, which -\u0026gt; onNegativeClick?.invoke() } .setOnDismissListener { currentDialog = null } .show() } fun dismissCurrentDialog() { currentDialog?.dismiss() currentDialog = null } } 2. å¯¹è¯æ¡†å·¥å…·ç±» # object DialogUtils { fun showConfirmDialog( context: Context, title: String, message: String, onConfirm: () -\u0026gt; Unit ) { AlertDialog.Builder(context) .setTitle(title) .setMessage(message) .setPositiveButton(\u0026#34;ç¡®å®š\u0026#34;) { dialog, which -\u0026gt; onConfirm() } .setNegativeButton(\u0026#34;å–æ¶ˆ\u0026#34;) { dialog, which -\u0026gt; // ä»€ä¹ˆéƒ½ä¸åš } .show() } fun showInfoDialog( context: Context, title: String, message: String ) { AlertDialog.Builder(context) .setTitle(title) .setMessage(message) .setPositiveButton(\u0026#34;ç¡®å®š\u0026#34;) { dialog, which -\u0026gt; // ä»€ä¹ˆéƒ½ä¸åš } .show() } fun showErrorDialog( context: Context, title: String = \u0026#34;é”™è¯¯\u0026#34;, message: String ) { AlertDialog.Builder(context) .setTitle(title) .setMessage(message) .setPositiveButton(\u0026#34;ç¡®å®š\u0026#34;) { dialog, which -\u0026gt; // ä»€ä¹ˆéƒ½ä¸åš } .setIcon(android.R.drawable.ic_dialog_alert) .show() } } ğŸ“‹ æ€»ç»“ # AlertDialog æ˜¯ Android å¼€å‘ä¸­é‡è¦çš„ç”¨æˆ·äº¤äº’ç»„ä»¶ï¼š\nåŸºæœ¬ç”¨æ³•ï¼šæ ‡é¢˜ã€å†…å®¹ã€æŒ‰é’®è®¾ç½® å¤šç§æ ·å¼ï¼šç®€å•æç¤ºã€ç¡®è®¤å¯¹è¯æ¡†ã€åˆ—è¡¨é€‰æ‹© è‡ªå®šä¹‰å¸ƒå±€ï¼šæ”¯æŒè‡ªå®šä¹‰è§†å›¾å’Œæ ·å¼ å®é™…åº”ç”¨ï¼šæƒé™è¯·æ±‚ã€é”™è¯¯æç¤ºã€æ›´æ–°é€šçŸ¥ç­‰åœºæ™¯ æœ€ä½³å®è·µï¼šå¯¹è¯æ¡†ç®¡ç†ã€å·¥å…·ç±»å°è£… æŒæ¡ AlertDialog çš„ä½¿ç”¨æ–¹æ³•å¯¹äºåˆ›å»ºè‰¯å¥½çš„ç”¨æˆ·äº¤äº’ä½“éªŒè‡³å…³é‡è¦ã€‚\n","date":"24 October 2025","externalUrl":null,"permalink":"/posts/android/13---alertdialog-%E6%B6%88%E6%81%AF%E6%8F%90%E7%A4%BA/","section":"Posts","summary":"è¯¦ç»†ä»‹ç»Android AlertDialogæ¶ˆæ¯æç¤ºå¯¹è¯æ¡†çš„ä½¿ç”¨æ–¹æ³•ã€è‡ªå®šä¹‰æ ·å¼å’Œå®é™…åº”ç”¨åœºæ™¯","title":"AlertDialog æ¶ˆæ¯æç¤º","type":"posts"},{"content":"","date":"24 October 2025","externalUrl":null,"permalink":"/categories/android/","section":"Categories","summary":"","title":"Android","type":"categories"},{"content":" Android å¼€å‘æ–¹å¼ # Android UI å¼€å‘ä¸»è¦æœ‰ä¸¤ç§æ–¹å¼ï¼šJava/Kotlin ä»£ç å¼€å‘å’Œ XML æ–‡ä»¶å¼€å‘ã€‚æ¯ç§æ–¹å¼éƒ½æœ‰å…¶ç‰¹ç‚¹å’Œé€‚ç”¨åœºæ™¯ã€‚\nå¼€å‘æ–¹å¼å¯¹æ¯” # 1. Java/Kotlin ä»£ç å¼€å‘ # Java/Kotlin ä»£ç å¼€å‘æ˜¯é€šè¿‡ç¼–ç¨‹è¯­è¨€ç›´æ¥åˆ›å»ºå’Œé…ç½® UI ç»„ä»¶çš„æ–¹å¼ã€‚\nç‰¹ç‚¹ # åŠ¨æ€æ€§ï¼šå¯ä»¥æ ¹æ®è¿è¡Œæ—¶æ¡ä»¶åŠ¨æ€åˆ›å»ºå’Œä¿®æ”¹ UI çµæ´»æ€§ï¼šå¯ä»¥å®Œå…¨æ§åˆ¶ç»„ä»¶çš„åˆ›å»ºå’Œé…ç½®è¿‡ç¨‹ ä»£ç é‡å¤§ï¼šéœ€è¦ç¼–å†™å¤§é‡ä»£ç æ¥åˆ›å»ºå’Œé…ç½® UI ç»„ä»¶ å®ç°æ­¥éª¤ # åˆ›å»ºå¸ƒå±€å¯¹è±¡ï¼ˆå¦‚ LinearLayoutã€RelativeLayout ç­‰ï¼‰ å®šä¹‰å¸ƒå±€å†…å®¹ï¼ˆæ·»åŠ å­è§†å›¾ï¼‰ è®¾ç½®å¸ƒå±€å±æ€§ï¼ˆå®½ã€é«˜ã€èƒŒæ™¯ã€è¾¹è·ç­‰ï¼‰ å°†å¸ƒå±€è®¾ç½®ä¸º Activity çš„å†…å®¹è§†å›¾ ä»£ç ç¤ºä¾‹ # class JavaCodeDevelopmentActivity : AppCompatActivity() { override fun onCreate(savedInstanceState: Bundle?) { super.onCreate(savedInstanceState) // åˆ›å»ºä¸»å¸ƒå±€ val mainLayout = LinearLayout(this).apply { orientation = LinearLayout.VERTICAL layoutParams = LinearLayout.LayoutParams( LinearLayout.LayoutParams.MATCH_PARENT, LinearLayout.LayoutParams.MATCH_PARENT ) setPadding(32, 32, 32, 32) setBackgroundColor(ContextCompat.getColor(this@JavaCodeDevelopmentActivity, R.color.white)) } // åˆ›å»ºæ ‡é¢˜ val titleText = TextView(this).apply { text = \u0026#34;Javaä»£ç å¼€å‘ç¤ºä¾‹\u0026#34; textSize = 24f setTextColor(ContextCompat.getColor(this@JavaCodeDevelopmentActivity, R.color.black)) gravity = Gravity.CENTER layoutParams = LinearLayout.LayoutParams( LinearLayout.LayoutParams.MATCH_PARENT, LinearLayout.LayoutParams.WRAP_CONTENT ).apply { bottomMargin = 32 } } // åˆ›å»ºæŒ‰é’® val button = Button(this).apply { text = \u0026#34;ç‚¹å‡»æˆ‘\u0026#34; layoutParams = LinearLayout.LayoutParams( LinearLayout.LayoutParams.MATCH_PARENT, LinearLayout.LayoutParams.WRAP_CONTENT ).apply { topMargin = 16 } setOnClickListener { Toast.makeText(this@JavaCodeDevelopmentActivity, \u0026#34;æŒ‰é’®è¢«ç‚¹å‡»äº†ï¼\u0026#34;, Toast.LENGTH_SHORT).show() } } // åˆ›å»ºè¾“å…¥æ¡† val editText = EditText(this).apply { hint = \u0026#34;è¯·è¾“å…¥å†…å®¹\u0026#34; layoutParams = LinearLayout.LayoutParams( LinearLayout.LayoutParams.MATCH_PARENT, LinearLayout.LayoutParams.WRAP_CONTENT ).apply { topMargin = 16 } } // æ·»åŠ å­è§†å›¾åˆ°ä¸»å¸ƒå±€ mainLayout.addView(titleText) mainLayout.addView(button) mainLayout.addView(editText) // è®¾ç½®å†…å®¹è§†å›¾ setContentView(mainLayout) } } 2. XML æ–‡ä»¶å¼€å‘ # XML æ–‡ä»¶å¼€å‘æ˜¯é€šè¿‡ XML æ ‡è®°è¯­è¨€å®šä¹‰ UI å¸ƒå±€çš„æ–¹å¼ã€‚\nç‰¹ç‚¹ # å£°æ˜å¼ï¼šé€šè¿‡ XML æ ‡ç­¾å£°æ˜ UI ç»“æ„ å¯è§†åŒ–ï¼šå¯ä»¥åœ¨ Android Studio ä¸­å¯è§†åŒ–ç¼–è¾‘ ä»£ç ç®€æ´ï¼šXML è¯­æ³•ç®€æ´ï¼Œæ˜“äºç†è§£å’Œç»´æŠ¤ é™æ€æ€§ï¼šå¸ƒå±€ç»“æ„åœ¨ç¼–è¯‘æ—¶ç¡®å®š å®ç°æ­¥éª¤ # åœ¨ res/layout ç›®å½•ä¸‹åˆ›å»º XML å¸ƒå±€æ–‡ä»¶ ä½¿ç”¨ XML æ ‡ç­¾å®šä¹‰ UI ç»„ä»¶ è®¾ç½®ç»„ä»¶çš„å±æ€§å’Œæ ·å¼ åœ¨ Activity ä¸­åŠ è½½å¸ƒå±€æ–‡ä»¶ XML å¸ƒå±€ç¤ºä¾‹ # \u0026lt;!-- res/layout/activity_xml_development.xml --\u0026gt; \u0026lt;LinearLayout xmlns:android=\u0026#34;http://schemas.android.com/apk/res/android\u0026#34; android:layout_width=\u0026#34;match_parent\u0026#34; android:layout_height=\u0026#34;match_parent\u0026#34; android:orientation=\u0026#34;vertical\u0026#34; android:padding=\u0026#34;32dp\u0026#34; android:background=\u0026#34;@color/white\u0026#34;\u0026gt; \u0026lt;TextView android:layout_width=\u0026#34;match_parent\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:text=\u0026#34;XMLæ–‡ä»¶å¼€å‘ç¤ºä¾‹\u0026#34; android:textSize=\u0026#34;24sp\u0026#34; android:textColor=\u0026#34;@color/black\u0026#34; android:gravity=\u0026#34;center\u0026#34; android:layout_marginBottom=\u0026#34;32dp\u0026#34; /\u0026gt; \u0026lt;Button android:id=\u0026#34;@+id/button\u0026#34; android:layout_width=\u0026#34;match_parent\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:text=\u0026#34;ç‚¹å‡»æˆ‘\u0026#34; android:layout_marginTop=\u0026#34;16dp\u0026#34; /\u0026gt; \u0026lt;EditText android:id=\u0026#34;@+id/editText\u0026#34; android:layout_width=\u0026#34;match_parent\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:hint=\u0026#34;è¯·è¾“å…¥å†…å®¹\u0026#34; android:layout_marginTop=\u0026#34;16dp\u0026#34; /\u0026gt; \u0026lt;/LinearLayout\u0026gt; Activity ä»£ç  # class XmlDevelopmentActivity : AppCompatActivity() { private lateinit var button: Button private lateinit var editText: EditText override fun onCreate(savedInstanceState: Bundle?) { super.onCreate(savedInstanceState) setContentView(R.layout.activity_xml_development) initViews() setupClickListeners() } private fun initViews() { button = findViewById(R.id.button) editText = findViewById(R.id.editText) } private fun setupClickListeners() { button.setOnClickListener { val inputText = editText.text.toString() if (inputText.isNotEmpty()) { Toast.makeText(this, \u0026#34;è¾“å…¥å†…å®¹: $inputText\u0026#34;, Toast.LENGTH_SHORT).show() } else { Toast.makeText(this, \u0026#34;è¯·è¾“å…¥å†…å®¹\u0026#34;, Toast.LENGTH_SHORT).show() } } } } æ··åˆå¼€å‘æ–¹å¼ # åœ¨å®é™…å¼€å‘ä¸­ï¼Œé€šå¸¸é‡‡ç”¨æ··åˆæ–¹å¼ï¼šXML å®šä¹‰é™æ€å¸ƒå±€ï¼ŒJava/Kotlin ä»£ç å¤„ç†åŠ¨æ€é€»è¾‘ã€‚\næ··åˆå¼€å‘ç¤ºä¾‹ # class HybridDevelopmentActivity : AppCompatActivity() { private lateinit var containerLayout: LinearLayout private lateinit var addButton: Button private lateinit var clearButton: Button override fun onCreate(savedInstanceState: Bundle?) { super.onCreate(savedInstanceState) setContentView(R.layout.activity_hybrid_development) initViews() setupClickListeners() } private fun initViews() { containerLayout = findViewById(R.id.containerLayout) addButton = findViewById(R.id.addButton) clearButton = findViewById(R.id.clearButton) } private fun setupClickListeners() { addButton.setOnClickListener { addDynamicView() } clearButton.setOnClickListener { clearDynamicViews() } } private fun addDynamicView() { // åŠ¨æ€åˆ›å»ºè§†å›¾ val dynamicView = TextView(this).apply { text = \u0026#34;åŠ¨æ€æ·»åŠ çš„è§†å›¾ ${System.currentTimeMillis()}\u0026#34; textSize = 16f setTextColor(ContextCompat.getColor(this@HybridDevelopmentActivity, R.color.black)) setPadding(16, 16, 16, 16) background = ContextCompat.getDrawable(this@HybridDevelopmentActivity, R.drawable.border_background) layoutParams = LinearLayout.LayoutParams( LinearLayout.LayoutParams.MATCH_PARENT, LinearLayout.LayoutParams.WRAP_CONTENT ).apply { topMargin = 8 } } containerLayout.addView(dynamicView) } private fun clearDynamicViews() { containerLayout.removeAllViews() } } æ··åˆå¸ƒå±€æ–‡ä»¶ # \u0026lt;!-- res/layout/activity_hybrid_development.xml --\u0026gt; \u0026lt;LinearLayout xmlns:android=\u0026#34;http://schemas.android.com/apk/res/android\u0026#34; android:layout_width=\u0026#34;match_parent\u0026#34; android:layout_height=\u0026#34;match_parent\u0026#34; android:orientation=\u0026#34;vertical\u0026#34; android:padding=\u0026#34;16dp\u0026#34;\u0026gt; \u0026lt;TextView android:layout_width=\u0026#34;match_parent\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:text=\u0026#34;æ··åˆå¼€å‘ç¤ºä¾‹\u0026#34; android:textSize=\u0026#34;20sp\u0026#34; android:textStyle=\u0026#34;bold\u0026#34; android:gravity=\u0026#34;center\u0026#34; android:layout_marginBottom=\u0026#34;16dp\u0026#34; /\u0026gt; \u0026lt;LinearLayout android:layout_width=\u0026#34;match_parent\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:orientation=\u0026#34;horizontal\u0026#34; android:layout_marginBottom=\u0026#34;16dp\u0026#34;\u0026gt; \u0026lt;Button android:id=\u0026#34;@+id/addButton\u0026#34; android:layout_width=\u0026#34;0dp\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:layout_weight=\u0026#34;1\u0026#34; android:text=\u0026#34;æ·»åŠ è§†å›¾\u0026#34; android:layout_marginEnd=\u0026#34;8dp\u0026#34; /\u0026gt; \u0026lt;Button android:id=\u0026#34;@+id/clearButton\u0026#34; android:layout_width=\u0026#34;0dp\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:layout_weight=\u0026#34;1\u0026#34; android:text=\u0026#34;æ¸…é™¤è§†å›¾\u0026#34; android:layout_marginStart=\u0026#34;8dp\u0026#34; /\u0026gt; \u0026lt;/LinearLayout\u0026gt; \u0026lt;ScrollView android:layout_width=\u0026#34;match_parent\u0026#34; android:layout_height=\u0026#34;0dp\u0026#34; android:layout_weight=\u0026#34;1\u0026#34;\u0026gt; \u0026lt;LinearLayout android:id=\u0026#34;@+id/containerLayout\u0026#34; android:layout_width=\u0026#34;match_parent\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:orientation=\u0026#34;vertical\u0026#34; /\u0026gt; \u0026lt;/ScrollView\u0026gt; \u0026lt;/LinearLayout\u0026gt; å¼€å‘æ–¹å¼é€‰æ‹©å»ºè®® # æ¨èä½¿ç”¨ XML å¼€å‘çš„æƒ…å†µ # é™æ€å¸ƒå±€ï¼šUI ç»“æ„ç›¸å¯¹å›ºå®šï¼Œä¸éœ€è¦åŠ¨æ€å˜åŒ– å¤æ‚å¸ƒå±€ï¼šéœ€è¦åµŒå¥—å¤šä¸ªå¸ƒå±€å®¹å™¨ å›¢é˜Ÿåä½œï¼šè®¾è®¡å¸ˆå’Œå¼€å‘è€…å¯ä»¥åˆ†å·¥åˆä½œ ç»´æŠ¤æ€§ï¼šä»£ç ç»“æ„æ¸…æ™°ï¼Œæ˜“äºç»´æŠ¤ æ¨èä½¿ç”¨ä»£ç å¼€å‘çš„æƒ…å†µ # åŠ¨æ€å¸ƒå±€ï¼šéœ€è¦æ ¹æ®æ•°æ®åŠ¨æ€åˆ›å»º UI å¤æ‚é€»è¾‘ï¼šéœ€è¦å¤æ‚çš„æ¡ä»¶åˆ¤æ–­å’Œå¾ªç¯ æ€§èƒ½è¦æ±‚ï¼šéœ€è¦ç²¾ç¡®æ§åˆ¶å†…å­˜å’Œæ€§èƒ½ ç‰¹æ®Šéœ€æ±‚ï¼šéœ€è¦å®ç°ç‰¹æ®Šçš„ UI æ•ˆæœ æœ€ä½³å®è·µ # 1. å¸ƒå±€ä¼˜åŒ– # class LayoutOptimizationActivity : AppCompatActivity() { override fun onCreate(savedInstanceState: Bundle?) { super.onCreate(savedInstanceState) setContentView(R.layout.activity_layout_optimization) // ä½¿ç”¨ ViewStub å»¶è¿ŸåŠ è½½ val viewStub = findViewById\u0026lt;ViewStub\u0026gt;(R.id.viewStub) viewStub?.inflate() // ä½¿ç”¨ include æ ‡ç­¾å¤ç”¨å¸ƒå±€ setupIncludeLayout() } private fun setupIncludeLayout() { val includeLayout = findViewById\u0026lt;View\u0026gt;(R.id.includeLayout) val titleText = includeLayout.findViewById\u0026lt;TextView\u0026gt;(R.id.titleText) titleText?.text = \u0026#34;å¤ç”¨çš„å¸ƒå±€\u0026#34; } } 2. æ€§èƒ½ä¼˜åŒ– # class PerformanceOptimizationActivity : AppCompatActivity() { private lateinit var recyclerView: RecyclerView private lateinit var adapter: OptimizedAdapter override fun onCreate(savedInstanceState: Bundle?) { super.onCreate(savedInstanceState) setContentView(R.layout.activity_performance_optimization) initViews() setupRecyclerView() } private fun initViews() { recyclerView = findViewById(R.id.recyclerView) } private fun setupRecyclerView() { // ä½¿ç”¨ RecyclerView æ›¿ä»£ ListView adapter = OptimizedAdapter() recyclerView.adapter = adapter recyclerView.layoutManager = LinearLayoutManager(this) // è®¾ç½®å›ºå®šå¤§å°ä¼˜åŒ– recyclerView.setHasFixedSize(true) } } ğŸ“‹ æ€»ç»“ # Android UI å¼€å‘æ–¹å¼çš„é€‰æ‹©ï¼š\nXML å¼€å‘ï¼šé€‚åˆé™æ€å¸ƒå±€ï¼Œä»£ç ç®€æ´ï¼Œæ˜“äºç»´æŠ¤ ä»£ç å¼€å‘ï¼šé€‚åˆåŠ¨æ€å¸ƒå±€ï¼Œçµæ´»æ€§é«˜ï¼Œä½†ä»£ç é‡å¤§ æ··åˆå¼€å‘ï¼šç»“åˆä¸¤è€…ä¼˜åŠ¿ï¼Œæ˜¯æœ€å¸¸ç”¨çš„å¼€å‘æ–¹å¼ æœ€ä½³å®è·µï¼šæ ¹æ®å…·ä½“éœ€æ±‚é€‰æ‹©åˆé€‚çš„å¼€å‘æ–¹å¼ï¼Œæ³¨é‡æ€§èƒ½ä¼˜åŒ– åœ¨å®é™…å¼€å‘ä¸­ï¼Œå»ºè®®ä¼˜å…ˆä½¿ç”¨ XML å¼€å‘ï¼Œåœ¨éœ€è¦åŠ¨æ€æ€§æ—¶å†ç»“åˆä»£ç å¼€å‘ï¼Œè¿™æ ·æ—¢èƒ½ä¿è¯å¼€å‘æ•ˆç‡ï¼Œåˆèƒ½æ»¡è¶³åŠŸèƒ½éœ€æ±‚ã€‚\n","date":"24 October 2025","externalUrl":null,"permalink":"/posts/android/01---android-%E5%BC%80%E5%8F%91%E6%96%B9%E5%BC%8F/","section":"Posts","summary":"è¯¦ç»†ä»‹ç»Android UIå¼€å‘çš„ä¸¤ç§æ–¹å¼ï¼šJavaä»£ç å¼€å‘å’ŒXMLæ–‡ä»¶å¼€å‘ï¼Œä»¥åŠå®ƒä»¬çš„ç‰¹ç‚¹å’Œé€‚ç”¨åœºæ™¯","title":"Android å¼€å‘æ–¹å¼","type":"posts"},{"content":" ArrayAdapter æ•°ç»„é€‚é…å™¨ # ArrayAdapter æ˜¯ Android ä¸­æœ€ç®€å•çš„é€‚é…å™¨ï¼Œç”¨äºå°†æ•°ç»„æˆ–åˆ—è¡¨æ•°æ®ç»‘å®šåˆ° ListView ç­‰åˆ—è¡¨æ§ä»¶ä¸Šã€‚\nArrayAdapter åŸºæœ¬æ¦‚å¿µ # ArrayAdapter æ˜¯ä¸€ä¸ªç®€å•çš„é€‚é…å™¨ï¼Œåªèƒ½ç”¨æ¥æ˜¾ç¤ºå•ä¸€çš„æ–‡æœ¬å†…å®¹ã€‚å®ƒé€‚ç”¨äºç®€å•çš„æ–‡æœ¬åˆ—è¡¨æ˜¾ç¤ºåœºæ™¯ã€‚\næ„é€ æ–¹æ³• # ArrayAdapter(Context context, int resource, int textViewResourceId, List\u0026lt;T\u0026gt; objects) å‚æ•° è¯´æ˜ ç¤ºä¾‹ context ç¯å¢ƒä¸Šä¸‹æ–‡ this resource å¸ƒå±€èµ„æºID R.layout.list_item textViewResourceId æ–‡æœ¬æ§ä»¶ID R.id.textView objects æ•°æ®æº listOf(\u0026quot;é¡¹ç›®1\u0026quot;, \u0026quot;é¡¹ç›®2\u0026quot;) åŸºæœ¬ä½¿ç”¨ç¤ºä¾‹ # 1. ç®€å•æ–‡æœ¬åˆ—è¡¨ # class ArrayAdapterActivity : AppCompatActivity() { private lateinit var listView: ListView private lateinit var adapter: ArrayAdapter\u0026lt;String\u0026gt; private val dataList = mutableListOf( \u0026#34;Androidå¼€å‘\u0026#34;, \u0026#34;Kotlinç¼–ç¨‹\u0026#34;, \u0026#34;JavaåŸºç¡€\u0026#34;, \u0026#34;ç§»åŠ¨å¼€å‘\u0026#34;, \u0026#34;UIè®¾è®¡\u0026#34;, \u0026#34;æ•°æ®åº“\u0026#34;, \u0026#34;ç½‘ç»œç¼–ç¨‹\u0026#34;, \u0026#34;ç®—æ³•\u0026#34; ) override fun onCreate(savedInstanceState: Bundle?) { super.onCreate(savedInstanceState) setContentView(R.layout.activity_array_adapter) initViews() setupAdapter() setupListView() } private fun initViews() { listView = findViewById(R.id.listView) } private fun setupAdapter() { adapter = ArrayAdapter( this, android.R.layout.simple_list_item_1, android.R.id.text1, dataList ) } private fun setupListView() { listView.adapter = adapter listView.onItemClickListener = AdapterView.OnItemClickListener { _, _, position, _ -\u0026gt; val selectedItem = dataList[position] Toast.makeText(this, \u0026#34;é€‰æ‹©äº†: $selectedItem\u0026#34;, Toast.LENGTH_SHORT).show() } listView.onItemLongClickListener = AdapterView.OnItemLongClickListener { _, _, position, _ -\u0026gt; showItemOptions(position) true } } private fun showItemOptions(position: Int) { val item = dataList[position] AlertDialog.Builder(this) .setTitle(\u0026#34;æ“ä½œé€‰é¡¹\u0026#34;) .setMessage(\u0026#34;å¯¹ \u0026#39;$item\u0026#39; æ‰§è¡Œä»€ä¹ˆæ“ä½œï¼Ÿ\u0026#34;) .setPositiveButton(\u0026#34;åˆ é™¤\u0026#34;) { _, _ -\u0026gt; removeItem(position) } .setNegativeButton(\u0026#34;ç¼–è¾‘\u0026#34;) { _, _ -\u0026gt; editItem(position) } .setNeutralButton(\u0026#34;å–æ¶ˆ\u0026#34;) { _, _ -\u0026gt; // ä»€ä¹ˆéƒ½ä¸åš } .show() } private fun removeItem(position: Int) { dataList.removeAt(position) adapter.notifyDataSetChanged() Toast.makeText(this, \u0026#34;å·²åˆ é™¤\u0026#34;, Toast.LENGTH_SHORT).show() } private fun editItem(position: Int) { val currentItem = dataList[position] val editText = EditText(this).apply { setText(currentItem) } AlertDialog.Builder(this) .setTitle(\u0026#34;ç¼–è¾‘é¡¹ç›®\u0026#34;) .setView(editText) .setPositiveButton(\u0026#34;ç¡®å®š\u0026#34;) { _, _ -\u0026gt; val newText = editText.text.toString() if (newText.isNotEmpty()) { dataList[position] = newText adapter.notifyDataSetChanged() Toast.makeText(this, \u0026#34;å·²æ›´æ–°\u0026#34;, Toast.LENGTH_SHORT).show() } } .setNegativeButton(\u0026#34;å–æ¶ˆ\u0026#34;) { _, _ -\u0026gt; // ä»€ä¹ˆéƒ½ä¸åš } .show() } } 2. è‡ªå®šä¹‰å¸ƒå±€é€‚é…å™¨ # class CustomArrayAdapterActivity : AppCompatActivity() { private lateinit var listView: ListView private lateinit var adapter: ArrayAdapter\u0026lt;String\u0026gt; private lateinit var addButton: Button private val dataList = mutableListOf( \u0026#34;é¡¹ç›®1\u0026#34;, \u0026#34;é¡¹ç›®2\u0026#34;, \u0026#34;é¡¹ç›®3\u0026#34;, \u0026#34;é¡¹ç›®4\u0026#34;, \u0026#34;é¡¹ç›®5\u0026#34; ) override fun onCreate(savedInstanceState: Bundle?) { super.onCreate(savedInstanceState) setContentView(R.layout.activity_custom_array_adapter) initViews() setupCustomAdapter() setupListView() setupAddButton() } private fun initViews() { listView = findViewById(R.id.listView) addButton = findViewById(R.id.addButton) } private fun setupCustomAdapter() { adapter = ArrayAdapter( this, R.layout.custom_list_item, R.id.itemText, dataList ) } private fun setupListView() { listView.adapter = adapter listView.onItemClickListener = AdapterView.OnItemClickListener { _, _, position, _ -\u0026gt; val selectedItem = dataList[position] Toast.makeText(this, \u0026#34;é€‰æ‹©äº†: $selectedItem\u0026#34;, Toast.LENGTH_SHORT).show() } } private fun setupAddButton() { addButton.setOnClickListener { addNewItem() } } private fun addNewItem() { val editText = EditText(this).apply { hint = \u0026#34;è¯·è¾“å…¥æ–°é¡¹ç›®\u0026#34; } AlertDialog.Builder(this) .setTitle(\u0026#34;æ·»åŠ æ–°é¡¹ç›®\u0026#34;) .setView(editText) .setPositiveButton(\u0026#34;æ·»åŠ \u0026#34;) { _, _ -\u0026gt; val newItem = editText.text.toString() if (newItem.isNotEmpty()) { dataList.add(newItem) adapter.notifyDataSetChanged() Toast.makeText(this, \u0026#34;å·²æ·»åŠ : $newItem\u0026#34;, Toast.LENGTH_SHORT).show() } } .setNegativeButton(\u0026#34;å–æ¶ˆ\u0026#34;) { _, _ -\u0026gt; // ä»€ä¹ˆéƒ½ä¸åš } .show() } } 3. è‡ªå®šä¹‰å¸ƒå±€æ–‡ä»¶ # \u0026lt;!-- res/layout/custom_list_item.xml --\u0026gt; \u0026lt;LinearLayout xmlns:android=\u0026#34;http://schemas.android.com/apk/res/android\u0026#34; android:layout_width=\u0026#34;match_parent\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:orientation=\u0026#34;horizontal\u0026#34; android:padding=\u0026#34;16dp\u0026#34; android:background=\u0026#34;?android:attr/selectableItemBackground\u0026#34;\u0026gt; \u0026lt;ImageView android:id=\u0026#34;@+id/itemIcon\u0026#34; android:layout_width=\u0026#34;24dp\u0026#34; android:layout_height=\u0026#34;24dp\u0026#34; android:src=\u0026#34;@drawable/ic_item\u0026#34; android:layout_marginEnd=\u0026#34;16dp\u0026#34; /\u0026gt; \u0026lt;TextView android:id=\u0026#34;@+id/itemText\u0026#34; android:layout_width=\u0026#34;0dp\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:layout_weight=\u0026#34;1\u0026#34; android:textSize=\u0026#34;16sp\u0026#34; android:textColor=\u0026#34;@android:color/black\u0026#34; /\u0026gt; \u0026lt;ImageView android:id=\u0026#34;@+id/arrowIcon\u0026#34; android:layout_width=\u0026#34;16dp\u0026#34; android:layout_height=\u0026#34;16dp\u0026#34; android:src=\u0026#34;@drawable/ic_arrow_right\u0026#34; android:layout_gravity=\u0026#34;center_vertical\u0026#34; /\u0026gt; \u0026lt;/LinearLayout\u0026gt; é«˜çº§ç”¨æ³•ç¤ºä¾‹ # 1. å¸¦è¿‡æ»¤åŠŸèƒ½çš„é€‚é…å™¨ # class FilterableArrayAdapterActivity : AppCompatActivity() { private lateinit var listView: ListView private lateinit var searchEditText: EditText private lateinit var adapter: ArrayAdapter\u0026lt;String\u0026gt; private val originalData = listOf( \u0026#34;Androidå¼€å‘\u0026#34;, \u0026#34;Kotlinç¼–ç¨‹\u0026#34;, \u0026#34;JavaåŸºç¡€\u0026#34;, \u0026#34;ç§»åŠ¨å¼€å‘\u0026#34;, \u0026#34;UIè®¾è®¡\u0026#34;, \u0026#34;æ•°æ®åº“\u0026#34;, \u0026#34;ç½‘ç»œç¼–ç¨‹\u0026#34;, \u0026#34;ç®—æ³•\u0026#34;, \u0026#34;Android Studio\u0026#34;, \u0026#34;Kotlinåç¨‹\u0026#34;, \u0026#34;Javaé›†åˆ\u0026#34;, \u0026#34;ç§»åŠ¨ç«¯å¼€å‘\u0026#34;, \u0026#34;Material Design\u0026#34;, \u0026#34;SQLite\u0026#34;, \u0026#34;HTTPåè®®\u0026#34;, \u0026#34;æ’åºç®—æ³•\u0026#34; ) private val filteredData = mutableListOf\u0026lt;String\u0026gt;() override fun onCreate(savedInstanceState: Bundle?) { super.onCreate(savedInstanceState) setContentView(R.layout.activity_filterable_array_adapter) initViews() setupAdapter() setupListView() setupSearch() } private fun initViews() { listView = findViewById(R.id.listView) searchEditText = findViewById(R.id.searchEditText) } private fun setupAdapter() { filteredData.addAll(originalData) adapter = ArrayAdapter( this, android.R.layout.simple_list_item_1, android.R.id.text1, filteredData ) } private fun setupListView() { listView.adapter = adapter listView.onItemClickListener = AdapterView.OnItemClickListener { _, _, position, _ -\u0026gt; val selectedItem = filteredData[position] Toast.makeText(this, \u0026#34;é€‰æ‹©äº†: $selectedItem\u0026#34;, Toast.LENGTH_SHORT).show() } } private fun setupSearch() { searchEditText.addTextChangedListener(object : TextWatcher { override fun beforeTextChanged(s: CharSequence?, start: Int, count: Int, after: Int) {} override fun onTextChanged(s: CharSequence?, start: Int, before: Int, count: Int) { filterData(s.toString()) } override fun afterTextChanged(s: Editable?) {} }) } private fun filterData(query: String) { filteredData.clear() if (query.isEmpty()) { filteredData.addAll(originalData) } else { originalData.forEach { item -\u0026gt; if (item.contains(query, ignoreCase = true)) { filteredData.add(item) } } } adapter.notifyDataSetChanged() } } 2. å¤šé€‰åˆ—è¡¨é€‚é…å™¨ # class MultiSelectArrayAdapterActivity : AppCompatActivity() { private lateinit var listView: ListView private lateinit var adapter: ArrayAdapter\u0026lt;String\u0026gt; private lateinit var selectAllButton: Button private lateinit var clearAllButton: Button private lateinit var selectedCountText: TextView private val dataList = mutableListOf( \u0026#34;é€‰é¡¹1\u0026#34;, \u0026#34;é€‰é¡¹2\u0026#34;, \u0026#34;é€‰é¡¹3\u0026#34;, \u0026#34;é€‰é¡¹4\u0026#34;, \u0026#34;é€‰é¡¹5\u0026#34;, \u0026#34;é€‰é¡¹6\u0026#34;, \u0026#34;é€‰é¡¹7\u0026#34;, \u0026#34;é€‰é¡¹8\u0026#34;, \u0026#34;é€‰é¡¹9\u0026#34;, \u0026#34;é€‰é¡¹10\u0026#34; ) private val selectedItems = mutableSetOf\u0026lt;Int\u0026gt;() override fun onCreate(savedInstanceState: Bundle?) { super.onCreate(savedInstanceState) setContentView(R.layout.activity_multi_select_array_adapter) initViews() setupAdapter() setupListView() setupButtons() } private fun initViews() { listView = findViewById(R.id.listView) selectAllButton = findViewById(R.id.selectAllButton) clearAllButton = findViewById(R.id.clearAllButton) selectedCountText = findViewById(R.id.selectedCountText) } private fun setupAdapter() { adapter = ArrayAdapter( this, android.R.layout.simple_list_item_multiple_choice, android.R.id.text1, dataList ) } private fun setupListView() { listView.adapter = adapter listView.choiceMode = ListView.CHOICE_MODE_MULTIPLE listView.onItemClickListener = AdapterView.OnItemClickListener { _, _, position, _ -\u0026gt; if (selectedItems.contains(position)) { selectedItems.remove(position) } else { selectedItems.add(position) } updateSelectedCount() } updateSelectedCount() } private fun setupButtons() { selectAllButton.setOnClickListener { selectAllItems() } clearAllButton.setOnClickListener { clearAllItems() } } private fun selectAllItems() { selectedItems.clear() for (i in dataList.indices) { selectedItems.add(i) listView.setItemChecked(i, true) } updateSelectedCount() } private fun clearAllItems() { selectedItems.clear() for (i in dataList.indices) { listView.setItemChecked(i, false) } updateSelectedCount() } private fun updateSelectedCount() { selectedCountText.text = \u0026#34;å·²é€‰æ‹©: ${selectedItems.size} é¡¹\u0026#34; } } å®é™…åº”ç”¨åœºæ™¯ # 1. è®¾ç½®åˆ—è¡¨ # class SettingsListActivity : AppCompatActivity() { private lateinit var listView: ListView private lateinit var adapter: ArrayAdapter\u0026lt;String\u0026gt; private val settingsItems = listOf( \u0026#34;è´¦æˆ·è®¾ç½®\u0026#34;, \u0026#34;éšç§è®¾ç½®\u0026#34;, \u0026#34;é€šçŸ¥è®¾ç½®\u0026#34;, \u0026#34;è¯­è¨€è®¾ç½®\u0026#34;, \u0026#34;ä¸»é¢˜è®¾ç½®\u0026#34;, \u0026#34;å­˜å‚¨è®¾ç½®\u0026#34;, \u0026#34;å…³äºåº”ç”¨\u0026#34;, \u0026#34;å¸®åŠ©ä¸åé¦ˆ\u0026#34; ) override fun onCreate(savedInstanceState: Bundle?) { super.onCreate(savedInstanceState) setContentView(R.layout.activity_settings_list) initViews() setupAdapter() setupListView() } private fun initViews() { listView = findViewById(R.id.listView) } private fun setupAdapter() { adapter = ArrayAdapter( this, R.layout.settings_list_item, R.id.settingText, settingsItems ) } private fun setupListView() { listView.adapter = adapter listView.onItemClickListener = AdapterView.OnItemClickListener { _, _, position, _ -\u0026gt; val settingItem = settingsItems[position] openSettingDetail(settingItem) } } private fun openSettingDetail(setting: String) { Toast.makeText(this, \u0026#34;æ‰“å¼€: $setting\u0026#34;, Toast.LENGTH_SHORT).show() // æ ¹æ®è®¾ç½®é¡¹æ‰“å¼€å¯¹åº”çš„è®¾ç½®é¡µé¢ } } 2. å†å²è®°å½•åˆ—è¡¨ # class HistoryListActivity : AppCompatActivity() { private lateinit var listView: ListView private lateinit var adapter: ArrayAdapter\u0026lt;String\u0026gt; private lateinit var clearHistoryButton: Button private val historyList = mutableListOf\u0026lt;String\u0026gt;() override fun onCreate(savedInstanceState: Bundle?) { super.onCreate(savedInstanceState) setContentView(R.layout.activity_history_list) initViews() loadHistory() setupAdapter() setupListView() setupClearButton() } private fun initViews() { listView = findViewById(R.id.listView) clearHistoryButton = findViewById(R.id.clearHistoryButton) } private fun loadHistory() { // æ¨¡æ‹ŸåŠ è½½å†å²è®°å½• historyList.addAll(listOf( \u0026#34;Androidå¼€å‘æ•™ç¨‹\u0026#34;, \u0026#34;KotlinåŸºç¡€è¯­æ³•\u0026#34;, \u0026#34;Javaé›†åˆæ¡†æ¶\u0026#34;, \u0026#34;ç§»åŠ¨ç«¯UIè®¾è®¡\u0026#34;, \u0026#34;æ•°æ®åº“æ“ä½œ\u0026#34; )) } private fun setupAdapter() { adapter = ArrayAdapter( this, R.layout.history_list_item, R.id.historyText, historyList ) } private fun setupListView() { listView.adapter = adapter listView.onItemClickListener = AdapterView.OnItemClickListener { _, _, position, _ -\u0026gt; val historyItem = historyList[position] openHistoryItem(historyItem) } listView.onItemLongClickListener = AdapterView.OnItemLongClickListener { _, _, position, _ -\u0026gt; showHistoryOptions(position) true } } private fun setupClearButton() { clearHistoryButton.setOnClickListener { clearHistory() } } private fun openHistoryItem(item: String) { Toast.makeText(this, \u0026#34;æ‰“å¼€: $item\u0026#34;, Toast.LENGTH_SHORT).show() // æ‰“å¼€å†å²è®°å½•é¡¹ } private fun showHistoryOptions(position: Int) { val item = historyList[position] AlertDialog.Builder(this) .setTitle(\u0026#34;å†å²è®°å½•é€‰é¡¹\u0026#34;) .setMessage(\u0026#34;å¯¹ \u0026#39;$item\u0026#39; æ‰§è¡Œä»€ä¹ˆæ“ä½œï¼Ÿ\u0026#34;) .setPositiveButton(\u0026#34;åˆ é™¤\u0026#34;) { _, _ -\u0026gt; removeHistoryItem(position) } .setNegativeButton(\u0026#34;å–æ¶ˆ\u0026#34;) { _, _ -\u0026gt; // ä»€ä¹ˆéƒ½ä¸åš } .show() } private fun removeHistoryItem(position: Int) { historyList.removeAt(position) adapter.notifyDataSetChanged() Toast.makeText(this, \u0026#34;å·²åˆ é™¤\u0026#34;, Toast.LENGTH_SHORT).show() } private fun clearHistory() { AlertDialog.Builder(this) .setTitle(\u0026#34;æ¸…é™¤å†å²è®°å½•\u0026#34;) .setMessage(\u0026#34;ç¡®å®šè¦æ¸…é™¤æ‰€æœ‰å†å²è®°å½•å—ï¼Ÿ\u0026#34;) .setPositiveButton(\u0026#34;ç¡®å®š\u0026#34;) { _, _ -\u0026gt; historyList.clear() adapter.notifyDataSetChanged() Toast.makeText(this, \u0026#34;å·²æ¸…é™¤æ‰€æœ‰å†å²è®°å½•\u0026#34;, Toast.LENGTH_SHORT).show() } .setNegativeButton(\u0026#34;å–æ¶ˆ\u0026#34;) { _, _ -\u0026gt; // ä»€ä¹ˆéƒ½ä¸åš } .show() } } ArrayAdapter æœ€ä½³å®è·µ # 1. é€‚é…å™¨å·¥å…·ç±» # object ArrayAdapterUtils { fun createSimpleAdapter( context: Context, data: List\u0026lt;String\u0026gt; ): ArrayAdapter\u0026lt;String\u0026gt; { return ArrayAdapter( context, android.R.layout.simple_list_item_1, android.R.id.text1, data ) } fun createCustomAdapter( context: Context, layoutRes: Int, textViewResId: Int, data: List\u0026lt;String\u0026gt; ): ArrayAdapter\u0026lt;String\u0026gt; { return ArrayAdapter( context, layoutRes, textViewResId, data ) } fun createFilterableAdapter( context: Context, data: List\u0026lt;String\u0026gt; ): ArrayAdapter\u0026lt;String\u0026gt; { return object : ArrayAdapter\u0026lt;String\u0026gt;( context, android.R.layout.simple_list_item_1, android.R.id.text1, data ) { override fun getFilter(): Filter { return object : Filter() { override fun performFiltering(constraint: CharSequence?): FilterResults { val results = FilterResults() val filteredList = mutableListOf\u0026lt;String\u0026gt;() if (constraint.isNullOrEmpty()) { filteredList.addAll(data) } else { data.forEach { item -\u0026gt; if (item.contains(constraint, ignoreCase = true)) { filteredList.add(item) } } } results.values = filteredList results.count = filteredList.size return results } override fun publishResults(constraint: CharSequence?, results: FilterResults?) { clear() if (results != null) { addAll(results.values as List\u0026lt;String\u0026gt;) notifyDataSetChanged() } } } } } } } 2. é€‚é…å™¨ç®¡ç†ç±» # class AdapterManager\u0026lt;T\u0026gt; { private var adapter: ArrayAdapter\u0026lt;T\u0026gt;? = null private var dataList = mutableListOf\u0026lt;T\u0026gt;() fun createAdapter( context: Context, layoutRes: Int, textViewResId: Int ): ArrayAdapter\u0026lt;T\u0026gt; { adapter = ArrayAdapter(context, layoutRes, textViewResId, dataList) return adapter!! } fun addItem(item: T) { dataList.add(item) adapter?.notifyDataSetChanged() } fun removeItem(position: Int) { if (position in 0 until dataList.size) { dataList.removeAt(position) adapter?.notifyDataSetChanged() } } fun updateItem(position: Int, item: T) { if (position in 0 until dataList.size) { dataList[position] = item adapter?.notifyDataSetChanged() } } fun clearAll() { dataList.clear() adapter?.notifyDataSetChanged() } fun getItem(position: Int): T? { return if (position in 0 until dataList.size) dataList[position] else null } fun getItemCount(): Int = dataList.size } ğŸ“‹ æ€»ç»“ # ArrayAdapter æ˜¯ Android å¼€å‘ä¸­æœ€ç®€å•çš„é€‚é…å™¨ï¼š\nåŸºæœ¬ç”¨æ³•ï¼šç®€å•çš„æ–‡æœ¬åˆ—è¡¨æ˜¾ç¤º è‡ªå®šä¹‰å¸ƒå±€ï¼šæ”¯æŒè‡ªå®šä¹‰åˆ—è¡¨é¡¹å¸ƒå±€ è¿‡æ»¤åŠŸèƒ½ï¼šæ”¯æŒæ•°æ®è¿‡æ»¤å’Œæœç´¢ å¤šé€‰åŠŸèƒ½ï¼šæ”¯æŒå¤šé€‰åˆ—è¡¨ å®é™…åº”ç”¨ï¼šè®¾ç½®åˆ—è¡¨ã€å†å²è®°å½•ã€ç®€å•èœå•ç­‰åœºæ™¯ æœ€ä½³å®è·µï¼šå·¥å…·ç±»å°è£…ã€é€‚é…å™¨ç®¡ç† æŒæ¡ ArrayAdapter çš„ä½¿ç”¨æ–¹æ³•å¯¹äºåˆ›å»ºç®€å•çš„åˆ—è¡¨ç•Œé¢è‡³å…³é‡è¦ã€‚\n","date":"24 October 2025","externalUrl":null,"permalink":"/posts/android/15---arrayadapter-%E6%95%B0%E7%BB%84%E9%80%82%E9%85%8D%E5%99%A8/","section":"Posts","summary":"è¯¦ç»†ä»‹ç»Android ArrayAdapteræ•°ç»„é€‚é…å™¨çš„ä½¿ç”¨æ–¹æ³•ã€è‡ªå®šä¹‰æ ·å¼å’Œå®é™…åº”ç”¨åœºæ™¯","title":"ArrayAdapter æ•°ç»„é€‚é…å™¨","type":"posts"},{"content":" BaseAdapter åŸºç¡€å•ä¸€å…ƒç´  # BaseAdapter æ˜¯ Android ä¸­æ‰€æœ‰é€‚é…å™¨çš„åŸºç±»ï¼Œæä¾›äº†æœ€å¤§çš„çµæ´»æ€§ï¼Œå¯ä»¥å®Œå…¨è‡ªå®šä¹‰åˆ—è¡¨é¡¹çš„æ˜¾ç¤ºå’Œäº¤äº’ã€‚\nBaseAdapter åŸºæœ¬æ¦‚å¿µ # BaseAdapter æ˜¯æ‰€æœ‰é€‚é…å™¨çš„æŠ½è±¡åŸºç±»ï¼Œä¸ SimpleAdapter çš„åŒºåˆ«åœ¨äºå¯ä»¥å®Œå…¨è‡ªå®šä¹‰æ¯ä¸ªåˆ—è¡¨é¡¹çš„å†…å®¹å’Œæ ·å¼ã€‚å®ƒæä¾›äº†æœ€å¤§çš„çµæ´»æ€§ï¼Œä½†éœ€è¦æ›´å¤šçš„ä»£ç å®ç°ã€‚\næ ¸å¿ƒæ–¹æ³• # æ–¹æ³• è¯´æ˜ è¿”å›å€¼ getCount() è¿”å›æ•°æ®é¡¹æ•°é‡ Int getItem(position) è¿”å›æŒ‡å®šä½ç½®çš„æ•°æ®é¡¹ Any? getItemId(position) è¿”å›æŒ‡å®šä½ç½®çš„æ•°æ®é¡¹ID Long getView(position, convertView, parent) åˆ›å»ºæˆ–å¤ç”¨åˆ—è¡¨é¡¹è§†å›¾ View åŸºæœ¬ä½¿ç”¨ç¤ºä¾‹ # 1. ç®€å•BaseAdapterå®ç° # class BaseAdapterActivity : AppCompatActivity() { private lateinit var listView: ListView private lateinit var adapter: CustomBaseAdapter private val dataList = mutableListOf\u0026lt;String\u0026gt;() override fun onCreate(savedInstanceState: Bundle?) { super.onCreate(savedInstanceState) setContentView(R.layout.activity_base_adapter) initViews() setupData() setupAdapter() setupListView() } private fun initViews() { listView = findViewById(R.id.listView) } private fun setupData() { dataList.addAll(listOf( \u0026#34;Androidå¼€å‘\u0026#34;, \u0026#34;Kotlinç¼–ç¨‹\u0026#34;, \u0026#34;JavaåŸºç¡€\u0026#34;, \u0026#34;ç§»åŠ¨å¼€å‘\u0026#34;, \u0026#34;UIè®¾è®¡\u0026#34;, \u0026#34;æ•°æ®åº“\u0026#34;, \u0026#34;ç½‘ç»œç¼–ç¨‹\u0026#34;, \u0026#34;ç®—æ³•\u0026#34; )) } private fun setupAdapter() { adapter = CustomBaseAdapter(this, dataList) } private fun setupListView() { listView.adapter = adapter listView.onItemClickListener = AdapterView.OnItemClickListener { _, _, position, _ -\u0026gt; val selectedItem = dataList[position] Toast.makeText(this, \u0026#34;é€‰æ‹©äº†: $selectedItem\u0026#34;, Toast.LENGTH_SHORT).show() } listView.onItemLongClickListener = AdapterView.OnItemLongClickListener { _, _, position, _ -\u0026gt; showItemOptions(position) true } } private fun showItemOptions(position: Int) { val item = dataList[position] AlertDialog.Builder(this) .setTitle(\u0026#34;æ“ä½œé€‰é¡¹\u0026#34;) .setMessage(\u0026#34;å¯¹ \u0026#39;$item\u0026#39; æ‰§è¡Œä»€ä¹ˆæ“ä½œï¼Ÿ\u0026#34;) .setPositiveButton(\u0026#34;ç¼–è¾‘\u0026#34;) { _, _ -\u0026gt; editItem(position) } .setNegativeButton(\u0026#34;åˆ é™¤\u0026#34;) { _, _ -\u0026gt; removeItem(position) } .setNeutralButton(\u0026#34;å–æ¶ˆ\u0026#34;) { _, _ -\u0026gt; // ä»€ä¹ˆéƒ½ä¸åš } .show() } private fun editItem(position: Int) { val currentItem = dataList[position] val editText = EditText(this).apply { setText(currentItem) } AlertDialog.Builder(this) .setTitle(\u0026#34;ç¼–è¾‘é¡¹ç›®\u0026#34;) .setView(editText) .setPositiveButton(\u0026#34;ç¡®å®š\u0026#34;) { _, _ -\u0026gt; val newText = editText.text.toString() if (newText.isNotEmpty()) { dataList[position] = newText adapter.notifyDataSetChanged() Toast.makeText(this, \u0026#34;å·²æ›´æ–°\u0026#34;, Toast.LENGTH_SHORT).show() } } .setNegativeButton(\u0026#34;å–æ¶ˆ\u0026#34;) { _, _ -\u0026gt; // ä»€ä¹ˆéƒ½ä¸åš } .show() } private fun removeItem(position: Int) { dataList.removeAt(position) adapter.notifyDataSetChanged() Toast.makeText(this, \u0026#34;å·²åˆ é™¤\u0026#34;, Toast.LENGTH_SHORT).show() } } class CustomBaseAdapter( private val context: Context, private val dataList: MutableList\u0026lt;String\u0026gt; ) : BaseAdapter() { override fun getCount(): Int = dataList.size override fun getItem(position: Int): Any? = dataList[position] override fun getItemId(position: Int): Long = position.toLong() override fun getView(position: Int, convertView: View?, parent: ViewGroup?): View { val view: View val holder: ViewHolder if (convertView == null) { view = LayoutInflater.from(context).inflate(R.layout.base_adapter_item, parent, false) holder = ViewHolder(view) view.tag = holder } else { view = convertView holder = view.tag as ViewHolder } val item = dataList[position] holder.titleText.text = item holder.subtitleText.text = \u0026#34;è¿™æ˜¯ç¬¬ ${position + 1} ä¸ªé¡¹ç›®\u0026#34; // æ ¹æ®ä½ç½®è®¾ç½®ä¸åŒçš„èƒŒæ™¯è‰² when (position % 3) { 0 -\u0026gt; holder.container.setBackgroundColor(ContextCompat.getColor(context, R.color.colorPrimary)) 1 -\u0026gt; holder.container.setBackgroundColor(ContextCompat.getColor(context, R.color.colorAccent)) 2 -\u0026gt; holder.container.setBackgroundColor(ContextCompat.getColor(context, R.color.colorSecondary)) } return view } private class ViewHolder(view: View) { val container: LinearLayout = view.findViewById(R.id.container) val titleText: TextView = view.findViewById(R.id.titleText) val subtitleText: TextView = view.findViewById(R.id.subtitleText) } } 2. è‡ªå®šä¹‰å¸ƒå±€æ–‡ä»¶ # \u0026lt;!-- res/layout/base_adapter_item.xml --\u0026gt; \u0026lt;LinearLayout xmlns:android=\u0026#34;http://schemas.android.com/apk/res/android\u0026#34; android:id=\u0026#34;@+id/container\u0026#34; android:layout_width=\u0026#34;match_parent\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:orientation=\u0026#34;horizontal\u0026#34; android:padding=\u0026#34;16dp\u0026#34; android:background=\u0026#34;?android:attr/selectableItemBackground\u0026#34;\u0026gt; \u0026lt;ImageView android:id=\u0026#34;@+id/iconImage\u0026#34; android:layout_width=\u0026#34;48dp\u0026#34; android:layout_height=\u0026#34;48dp\u0026#34; android:src=\u0026#34;@drawable/ic_default\u0026#34; android:layout_marginEnd=\u0026#34;16dp\u0026#34; android:scaleType=\u0026#34;centerCrop\u0026#34; /\u0026gt; \u0026lt;LinearLayout android:layout_width=\u0026#34;0dp\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:layout_weight=\u0026#34;1\u0026#34; android:orientation=\u0026#34;vertical\u0026#34;\u0026gt; \u0026lt;TextView android:id=\u0026#34;@+id/titleText\u0026#34; android:layout_width=\u0026#34;wrap_content\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:textSize=\u0026#34;16sp\u0026#34; android:textStyle=\u0026#34;bold\u0026#34; android:textColor=\u0026#34;@android:color/white\u0026#34; /\u0026gt; \u0026lt;TextView android:id=\u0026#34;@+id/subtitleText\u0026#34; android:layout_width=\u0026#34;wrap_content\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:textSize=\u0026#34;14sp\u0026#34; android:textColor=\u0026#34;@android:color/white\u0026#34; android:alpha=\u0026#34;0.8\u0026#34; android:layout_marginTop=\u0026#34;4dp\u0026#34; /\u0026gt; \u0026lt;/LinearLayout\u0026gt; \u0026lt;ImageView android:id=\u0026#34;@+id/arrowImage\u0026#34; android:layout_width=\u0026#34;24dp\u0026#34; android:layout_height=\u0026#34;24dp\u0026#34; android:src=\u0026#34;@drawable/ic_arrow_right\u0026#34; android:layout_gravity=\u0026#34;center_vertical\u0026#34; android:tint=\u0026#34;@android:color/white\u0026#34; /\u0026gt; \u0026lt;/LinearLayout\u0026gt; 3. å¤æ‚æ•°æ®æ¨¡å‹BaseAdapter # class ComplexBaseAdapterActivity : AppCompatActivity() { private lateinit var listView: ListView private lateinit var adapter: ComplexBaseAdapter private val dataList = mutableListOf\u0026lt;ContactItem\u0026gt;() override fun onCreate(savedInstanceState: Bundle?) { super.onCreate(savedInstanceState) setContentView(R.layout.activity_complex_base_adapter) initViews() setupData() setupAdapter() setupListView() } private fun initViews() { listView = findViewById(R.id.listView) } private fun setupData() { dataList.addAll(listOf( ContactItem(\u0026#34;å¼ ä¸‰\u0026#34;, \u0026#34;13800138000\u0026#34;, \u0026#34;zhangsan@example.com\u0026#34;, true), ContactItem(\u0026#34;æå››\u0026#34;, \u0026#34;13800138001\u0026#34;, \u0026#34;lisi@example.com\u0026#34;, false), ContactItem(\u0026#34;ç‹äº”\u0026#34;, \u0026#34;13800138002\u0026#34;, \u0026#34;wangwu@example.com\u0026#34;, true), ContactItem(\u0026#34;èµµå…­\u0026#34;, \u0026#34;13800138003\u0026#34;, \u0026#34;zhaoliu@example.com\u0026#34;, false), ContactItem(\u0026#34;é’±ä¸ƒ\u0026#34;, \u0026#34;13800138004\u0026#34;, \u0026#34;qianqi@example.com\u0026#34;, true) )) } private fun setupAdapter() { adapter = ComplexBaseAdapter(this, dataList) } private fun setupListView() { listView.adapter = adapter listView.onItemClickListener = AdapterView.OnItemClickListener { _, _, position, _ -\u0026gt; val contact = dataList[position] showContactDetail(contact) } } private fun showContactDetail(contact: ContactItem) { AlertDialog.Builder(this) .setTitle(\u0026#34;è”ç³»äººè¯¦æƒ…\u0026#34;) .setMessage(\u0026#34;å§“å: ${contact.name}\\nç”µè¯: ${contact.phone}\\né‚®ç®±: ${contact.email}\\nçŠ¶æ€: ${if (contact.isOnline) \u0026#34;åœ¨çº¿\u0026#34; else \u0026#34;ç¦»çº¿\u0026#34;}\u0026#34;) .setPositiveButton(\u0026#34;ç¡®å®š\u0026#34;) { _, _ -\u0026gt; // ä»€ä¹ˆéƒ½ä¸åš } .show() } } data class ContactItem( val name: String, val phone: String, val email: String, val isOnline: Boolean ) class ComplexBaseAdapter( private val context: Context, private val dataList: MutableList\u0026lt;ContactItem\u0026gt; ) : BaseAdapter() { override fun getCount(): Int = dataList.size override fun getItem(position: Int): ContactItem = dataList[position] override fun getItemId(position: Int): Long = position.toLong() override fun getView(position: Int, convertView: View?, parent: ViewGroup?): View { val view: View val holder: ContactViewHolder if (convertView == null) { view = LayoutInflater.from(context).inflate(R.layout.contact_item, parent, false) holder = ContactViewHolder(view) view.tag = holder } else { view = convertView holder = view.tag as ContactViewHolder } val contact = dataList[position] holder.nameText.text = contact.name holder.phoneText.text = contact.phone holder.emailText.text = contact.email // è®¾ç½®åœ¨çº¿çŠ¶æ€ if (contact.isOnline) { holder.statusIndicator.setBackgroundColor(ContextCompat.getColor(context, R.color.online_color)) holder.statusText.text = \u0026#34;åœ¨çº¿\u0026#34; holder.statusText.setTextColor(ContextCompat.getColor(context, R.color.online_color)) } else { holder.statusIndicator.setBackgroundColor(ContextCompat.getColor(context, R.color.offline_color)) holder.statusText.text = \u0026#34;ç¦»çº¿\u0026#34; holder.statusText.setTextColor(ContextCompat.getColor(context, R.color.offline_color)) } // è®¾ç½®å¤´åƒ holder.avatarImage.setImageResource( when (position % 4) { 0 -\u0026gt; android.R.drawable.ic_menu_myplaces 1 -\u0026gt; android.R.drawable.ic_menu_camera 2 -\u0026gt; android.R.drawable.ic_menu_send else -\u0026gt; android.R.drawable.ic_menu_share } ) return view } private class ContactViewHolder(view: View) { val container: LinearLayout = view.findViewById(R.id.container) val avatarImage: ImageView = view.findViewById(R.id.avatarImage) val nameText: TextView = view.findViewById(R.id.nameText) val phoneText: TextView = view.findViewById(R.id.phoneText) val emailText: TextView = view.findViewById(R.id.emailText) val statusIndicator: View = view.findViewById(R.id.statusIndicator) val statusText: TextView = view.findViewById(R.id.statusText) } } 4. å¤æ‚å¸ƒå±€æ–‡ä»¶ # \u0026lt;!-- res/layout/contact_item.xml --\u0026gt; \u0026lt;LinearLayout xmlns:android=\u0026#34;http://schemas.android.com/apk/res/android\u0026#34; android:id=\u0026#34;@+id/container\u0026#34; android:layout_width=\u0026#34;match_parent\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:orientation=\u0026#34;horizontal\u0026#34; android:padding=\u0026#34;16dp\u0026#34; android:background=\u0026#34;?android:attr/selectableItemBackground\u0026#34;\u0026gt; \u0026lt;ImageView android:id=\u0026#34;@+id/avatarImage\u0026#34; android:layout_width=\u0026#34;60dp\u0026#34; android:layout_height=\u0026#34;60dp\u0026#34; android:src=\u0026#34;@drawable/ic_default_avatar\u0026#34; android:layout_marginEnd=\u0026#34;16dp\u0026#34; android:scaleType=\u0026#34;centerCrop\u0026#34; android:background=\u0026#34;@drawable/circle_background\u0026#34; /\u0026gt; \u0026lt;LinearLayout android:layout_width=\u0026#34;0dp\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:layout_weight=\u0026#34;1\u0026#34; android:orientation=\u0026#34;vertical\u0026#34;\u0026gt; \u0026lt;LinearLayout android:layout_width=\u0026#34;match_parent\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:orientation=\u0026#34;horizontal\u0026#34; android:gravity=\u0026#34;center_vertical\u0026#34;\u0026gt; \u0026lt;TextView android:id=\u0026#34;@+id/nameText\u0026#34; android:layout_width=\u0026#34;0dp\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:layout_weight=\u0026#34;1\u0026#34; android:textSize=\u0026#34;18sp\u0026#34; android:textStyle=\u0026#34;bold\u0026#34; android:textColor=\u0026#34;@android:color/black\u0026#34; /\u0026gt; \u0026lt;View android:id=\u0026#34;@+id/statusIndicator\u0026#34; android:layout_width=\u0026#34;12dp\u0026#34; android:layout_height=\u0026#34;12dp\u0026#34; android:layout_marginEnd=\u0026#34;8dp\u0026#34; android:background=\u0026#34;@drawable/circle_background\u0026#34; /\u0026gt; \u0026lt;TextView android:id=\u0026#34;@+id/statusText\u0026#34; android:layout_width=\u0026#34;wrap_content\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:textSize=\u0026#34;12sp\u0026#34; /\u0026gt; \u0026lt;/LinearLayout\u0026gt; \u0026lt;TextView android:id=\u0026#34;@+id/phoneText\u0026#34; android:layout_width=\u0026#34;wrap_content\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:textSize=\u0026#34;14sp\u0026#34; android:textColor=\u0026#34;@android:color/darker_gray\u0026#34; android:layout_marginTop=\u0026#34;4dp\u0026#34; /\u0026gt; \u0026lt;TextView android:id=\u0026#34;@+id/emailText\u0026#34; android:layout_width=\u0026#34;wrap_content\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:textSize=\u0026#34;12sp\u0026#34; android:textColor=\u0026#34;@android:color/darker_gray\u0026#34; android:layout_marginTop=\u0026#34;2dp\u0026#34; /\u0026gt; \u0026lt;/LinearLayout\u0026gt; \u0026lt;/LinearLayout\u0026gt; é«˜çº§ç”¨æ³•ç¤ºä¾‹ # 1. å¤šç±»å‹åˆ—è¡¨é¡¹ # class MultiTypeBaseAdapterActivity : AppCompatActivity() { private lateinit var listView: ListView private lateinit var adapter: MultiTypeBaseAdapter private val dataList = mutableListOf\u0026lt;Any\u0026gt;() override fun onCreate(savedInstanceState: Bundle?) { super.onCreate(savedInstanceState) setContentView(R.layout.activity_multi_type_base_adapter) initViews() setupData() setupAdapter() setupListView() } private fun initViews() { listView = findViewById(R.id.listView) } private fun setupData() { dataList.addAll(listOf( HeaderItem(\u0026#34;è”ç³»äºº\u0026#34;), ContactItem(\u0026#34;å¼ ä¸‰\u0026#34;, \u0026#34;13800138000\u0026#34;, \u0026#34;zhangsan@example.com\u0026#34;, true), ContactItem(\u0026#34;æå››\u0026#34;, \u0026#34;13800138001\u0026#34;, \u0026#34;lisi@example.com\u0026#34;, false), HeaderItem(\u0026#34;ç¾¤ç»„\u0026#34;), GroupItem(\u0026#34;å·¥ä½œç¾¤\u0026#34;, \u0026#34;5äºº\u0026#34;, \u0026#34;æœ€æ–°æ¶ˆæ¯ï¼šæ˜å¤©å¼€ä¼š\u0026#34;), GroupItem(\u0026#34;æœ‹å‹ç¾¤\u0026#34;, \u0026#34;8äºº\u0026#34;, \u0026#34;æœ€æ–°æ¶ˆæ¯ï¼šå‘¨æœ«èšé¤\u0026#34;), HeaderItem(\u0026#34;æœ€è¿‘èŠå¤©\u0026#34;), RecentChatItem(\u0026#34;ç‹äº”\u0026#34;, \u0026#34;ä½ å¥½ï¼Œæœ€è¿‘æ€ä¹ˆæ ·ï¼Ÿ\u0026#34;, \u0026#34;10:30\u0026#34;, 2), RecentChatItem(\u0026#34;èµµå…­\u0026#34;, \u0026#34;å¥½çš„ï¼Œæ²¡é—®é¢˜\u0026#34;, \u0026#34;09:15\u0026#34;, 0) )) } private fun setupAdapter() { adapter = MultiTypeBaseAdapter(this, dataList) } private fun setupListView() { listView.adapter = adapter listView.onItemClickListener = AdapterView.OnItemClickListener { _, _, position, _ -\u0026gt; val item = dataList[position] when (item) { is ContactItem -\u0026gt; showContactDetail(item) is GroupItem -\u0026gt; showGroupDetail(item) is RecentChatItem -\u0026gt; showChatDetail(item) else -\u0026gt; Toast.makeText(this, \u0026#34;ç‚¹å‡»äº†æ ‡é¢˜\u0026#34;, Toast.LENGTH_SHORT).show() } } } private fun showContactDetail(contact: ContactItem) { Toast.makeText(this, \u0026#34;è”ç³»äºº: ${contact.name}\u0026#34;, Toast.LENGTH_SHORT).show() } private fun showGroupDetail(group: GroupItem) { Toast.makeText(this, \u0026#34;ç¾¤ç»„: ${group.name}\u0026#34;, Toast.LENGTH_SHORT).show() } private fun showChatDetail(chat: RecentChatItem) { Toast.makeText(this, \u0026#34;èŠå¤©: ${chat.name}\u0026#34;, Toast.LENGTH_SHORT).show() } } data class HeaderItem(val title: String) data class GroupItem(val name: String, val memberCount: String, val lastMessage: String) data class RecentChatItem(val name: String, val lastMessage: String, val time: String, val unreadCount: Int) class MultiTypeBaseAdapter( private val context: Context, private val dataList: MutableList\u0026lt;Any\u0026gt; ) : BaseAdapter() { companion object { private const val TYPE_HEADER = 0 private const val TYPE_CONTACT = 1 private const val TYPE_GROUP = 2 private const val TYPE_RECENT_CHAT = 3 } override fun getCount(): Int = dataList.size override fun getItem(position: Int): Any = dataList[position] override fun getItemId(position: Int): Long = position.toLong() override fun getViewTypeCount(): Int = 4 override fun getItemViewType(position: Int): Int { return when (dataList[position]) { is HeaderItem -\u0026gt; TYPE_HEADER is ContactItem -\u0026gt; TYPE_CONTACT is GroupItem -\u0026gt; TYPE_GROUP is RecentChatItem -\u0026gt; TYPE_RECENT_CHAT else -\u0026gt; TYPE_HEADER } } override fun getView(position: Int, convertView: View?, parent: ViewGroup?): View { val item = dataList[position] val viewType = getItemViewType(position) when (viewType) { TYPE_HEADER -\u0026gt; { val view = convertView ?: LayoutInflater.from(context).inflate(R.layout.header_item, parent, false) val holder = view.tag as? HeaderViewHolder ?: HeaderViewHolder(view).also { view.tag = it } val header = item as HeaderItem holder.titleText.text = header.title return view } TYPE_CONTACT -\u0026gt; { val view = convertView ?: LayoutInflater.from(context).inflate(R.layout.contact_item, parent, false) val holder = view.tag as? ContactViewHolder ?: ContactViewHolder(view).also { view.tag = it } val contact = item as ContactItem holder.nameText.text = contact.name holder.phoneText.text = contact.phone holder.emailText.text = contact.email return view } TYPE_GROUP -\u0026gt; { val view = convertView ?: LayoutInflater.from(context).inflate(R.layout.group_item, parent, false) val holder = view.tag as? GroupViewHolder ?: GroupViewHolder(view).also { view.tag = it } val group = item as GroupItem holder.nameText.text = group.name holder.memberCountText.text = group.memberCount holder.lastMessageText.text = group.lastMessage return view } TYPE_RECENT_CHAT -\u0026gt; { val view = convertView ?: LayoutInflater.from(context).inflate(R.layout.recent_chat_item, parent, false) val holder = view.tag as? RecentChatViewHolder ?: RecentChatViewHolder(view).also { view.tag = it } val chat = item as RecentChatItem holder.nameText.text = chat.name holder.lastMessageText.text = chat.lastMessage holder.timeText.text = chat.time holder.unreadCountText.text = if (chat.unreadCount \u0026gt; 0) chat.unreadCount.toString() else \u0026#34;\u0026#34; return view } else -\u0026gt; return convertView ?: View(context) } } private class HeaderViewHolder(view: View) { val titleText: TextView = view.findViewById(R.id.titleText) } private class ContactViewHolder(view: View) { val nameText: TextView = view.findViewById(R.id.nameText) val phoneText: TextView = view.findViewById(R.id.phoneText) val emailText: TextView = view.findViewById(R.id.emailText) } private class GroupViewHolder(view: View) { val nameText: TextView = view.findViewById(R.id.nameText) val memberCountText: TextView = view.findViewById(R.id.memberCountText) val lastMessageText: TextView = view.findViewById(R.id.lastMessageText) } private class RecentChatViewHolder(view: View) { val nameText: TextView = view.findViewById(R.id.nameText) val lastMessageText: TextView = view.findViewById(R.id.lastMessageText) val timeText: TextView = view.findViewById(R.id.timeText) val unreadCountText: TextView = view.findViewById(R.id.unreadCountText) } } 2. åŠ¨æ€æ•°æ®æ›´æ–° # class DynamicBaseAdapterActivity : AppCompatActivity() { private lateinit var listView: ListView private lateinit var adapter: DynamicBaseAdapter private lateinit var addButton: Button private lateinit var refreshButton: Button private val dataList = mutableListOf\u0026lt;String\u0026gt;() override fun onCreate(savedInstanceState: Bundle?) { super.onCreate(savedInstanceState) setContentView(R.layout.activity_dynamic_base_adapter) initViews() setupInitialData() setupAdapter() setupListView() setupButtons() } private fun initViews() { listView = findViewById(R.id.listView) addButton = findViewById(R.id.addButton) refreshButton = findViewById(R.id.refreshButton) } private fun setupInitialData() { dataList.addAll(listOf( \u0026#34;åˆå§‹é¡¹ç›®1\u0026#34;, \u0026#34;åˆå§‹é¡¹ç›®2\u0026#34;, \u0026#34;åˆå§‹é¡¹ç›®3\u0026#34; )) } private fun setupAdapter() { adapter = DynamicBaseAdapter(this, dataList) } private fun setupListView() { listView.adapter = adapter listView.onItemClickListener = AdapterView.OnItemClickListener { _, _, position, _ -\u0026gt; val item = dataList[position] Toast.makeText(this, \u0026#34;é€‰æ‹©äº†: $item\u0026#34;, Toast.LENGTH_SHORT).show() } } private fun setupButtons() { addButton.setOnClickListener { addNewItem() } refreshButton.setOnClickListener { refreshData() } } private fun addNewItem() { val editText = EditText(this).apply { hint = \u0026#34;è¯·è¾“å…¥æ–°é¡¹ç›®\u0026#34; } AlertDialog.Builder(this) .setTitle(\u0026#34;æ·»åŠ æ–°é¡¹ç›®\u0026#34;) .setView(editText) .setPositiveButton(\u0026#34;æ·»åŠ \u0026#34;) { _, _ -\u0026gt; val newItem = editText.text.toString() if (newItem.isNotEmpty()) { dataList.add(newItem) adapter.notifyDataSetChanged() Toast.makeText(this, \u0026#34;å·²æ·»åŠ : $newItem\u0026#34;, Toast.LENGTH_SHORT).show() } } .setNegativeButton(\u0026#34;å–æ¶ˆ\u0026#34;) { _, _ -\u0026gt; // ä»€ä¹ˆéƒ½ä¸åš } .show() } private fun refreshData() { dataList.clear() setupInitialData() // æ·»åŠ ä¸€äº›éšæœºæ•°æ® repeat(5) { index -\u0026gt; dataList.add(\u0026#34;åˆ·æ–°é¡¹ç›®${index + 1}\u0026#34;) } adapter.notifyDataSetChanged() Toast.makeText(this, \u0026#34;æ•°æ®å·²åˆ·æ–°\u0026#34;, Toast.LENGTH_SHORT).show() } } class DynamicBaseAdapter( private val context: Context, private val dataList: MutableList\u0026lt;String\u0026gt; ) : BaseAdapter() { override fun getCount(): Int = dataList.size override fun getItem(position: Int): String = dataList[position] override fun getItemId(position: Int): Long = position.toLong() override fun getView(position: Int, convertView: View?, parent: ViewGroup?): View { val view: View val holder: DynamicViewHolder if (convertView == null) { view = LayoutInflater.from(context).inflate(R.layout.dynamic_item, parent, false) holder = DynamicViewHolder(view) view.tag = holder } else { view = convertView holder = view.tag as DynamicViewHolder } val item = dataList[position] holder.titleText.text = item holder.subtitleText.text = \u0026#34;ä½ç½®: $position, æ—¶é—´: ${System.currentTimeMillis()}\u0026#34; // æ ¹æ®ä½ç½®è®¾ç½®ä¸åŒçš„æ ·å¼ when (position % 4) { 0 -\u0026gt; { holder.container.setBackgroundColor(ContextCompat.getColor(context, R.color.colorPrimary)) holder.titleText.setTextColor(ContextCompat.getColor(context, android.R.color.white)) holder.subtitleText.setTextColor(ContextCompat.getColor(context, android.R.color.white)) } 1 -\u0026gt; { holder.container.setBackgroundColor(ContextCompat.getColor(context, R.color.colorAccent)) holder.titleText.setTextColor(ContextCompat.getColor(context, android.R.color.white)) holder.subtitleText.setTextColor(ContextCompat.getColor(context, android.R.color.white)) } 2 -\u0026gt; { holder.container.setBackgroundColor(ContextCompat.getColor(context, R.color.colorSecondary)) holder.titleText.setTextColor(ContextCompat.getColor(context, android.R.color.white)) holder.subtitleText.setTextColor(ContextCompat.getColor(context, android.R.color.white)) } else -\u0026gt; { holder.container.setBackgroundColor(ContextCompat.getColor(context, android.R.color.white)) holder.titleText.setTextColor(ContextCompat.getColor(context, android.R.color.black)) holder.subtitleText.setTextColor(ContextCompat.getColor(context, android.R.color.black)) } } return view } private class DynamicViewHolder(view: View) { val container: LinearLayout = view.findViewById(R.id.container) val titleText: TextView = view.findViewById(R.id.titleText) val subtitleText: TextView = view.findViewById(R.id.subtitleText) } } å®é™…åº”ç”¨åœºæ™¯ # 1. èŠå¤©æ¶ˆæ¯åˆ—è¡¨ # class ChatMessageActivity : AppCompatActivity() { private lateinit var listView: ListView private lateinit var adapter: ChatMessageAdapter private val messageList = mutableListOf\u0026lt;ChatMessage\u0026gt;() override fun onCreate(savedInstanceState: Bundle?) { super.onCreate(savedInstanceState) setContentView(R.layout.activity_chat_message) initViews() setupData() setupAdapter() setupListView() } private fun initViews() { listView = findViewById(R.id.listView) } private fun setupData() { messageList.addAll(listOf( ChatMessage(\u0026#34;å¼ ä¸‰\u0026#34;, \u0026#34;ä½ å¥½ï¼Œæœ€è¿‘æ€ä¹ˆæ ·ï¼Ÿ\u0026#34;, \u0026#34;10:30\u0026#34;, true), ChatMessage(\u0026#34;æˆ‘\u0026#34;, \u0026#34;è¿˜ä¸é”™ï¼Œä½ å‘¢ï¼Ÿ\u0026#34;, \u0026#34;10:32\u0026#34;, false), ChatMessage(\u0026#34;å¼ ä¸‰\u0026#34;, \u0026#34;æˆ‘ä¹Ÿå¾ˆå¥½ï¼Œæ˜å¤©è§é¢å§\u0026#34;, \u0026#34;10:35\u0026#34;, true), ChatMessage(\u0026#34;æˆ‘\u0026#34;, \u0026#34;å¥½çš„ï¼Œæ²¡é—®é¢˜\u0026#34;, \u0026#34;10:36\u0026#34;, false), ChatMessage(\u0026#34;å¼ ä¸‰\u0026#34;, \u0026#34;é‚£å°±è¿™æ ·å®šäº†\u0026#34;, \u0026#34;10:37\u0026#34;, true) )) } private fun setupAdapter() { adapter = ChatMessageAdapter(this, messageList) } private fun setupListView() { listView.adapter = adapter listView.onItemClickListener = AdapterView.OnItemClickListener { _, _, position, _ -\u0026gt; val message = messageList[position] Toast.makeText(this, \u0026#34;æ¶ˆæ¯: ${message.content}\u0026#34;, Toast.LENGTH_SHORT).show() } } } data class ChatMessage( val sender: String, val content: String, val time: String, val isFromMe: Boolean ) class ChatMessageAdapter( private val context: Context, private val messageList: MutableList\u0026lt;ChatMessage\u0026gt; ) : BaseAdapter() { override fun getCount(): Int = messageList.size override fun getItem(position: Int): ChatMessage = messageList[position] override fun getItemId(position: Int): Long = position.toLong() override fun getView(position: Int, convertView: View?, parent: ViewGroup?): View { val message = messageList[position] val view: View val holder: ChatMessageViewHolder if (convertView == null) { view = LayoutInflater.from(context).inflate(R.layout.chat_message_item, parent, false) holder = ChatMessageViewHolder(view) view.tag = holder } else { view = convertView holder = view.tag as ChatMessageViewHolder } holder.senderText.text = message.sender holder.contentText.text = message.content holder.timeText.text = message.time // æ ¹æ®æ¶ˆæ¯æ¥æºè®¾ç½®ä¸åŒçš„æ ·å¼ if (message.isFromMe) { holder.messageContainer.setBackgroundColor(ContextCompat.getColor(context, R.color.my_message_bg)) holder.senderText.setTextColor(ContextCompat.getColor(context, R.color.my_message_text)) holder.contentText.setTextColor(ContextCompat.getColor(context, R.color.my_message_text)) } else { holder.messageContainer.setBackgroundColor(ContextCompat.getColor(context, R.color.other_message_bg)) holder.senderText.setTextColor(ContextCompat.getColor(context, R.color.other_message_text)) holder.contentText.setTextColor(ContextCompat.getColor(context, R.color.other_message_text)) } return view } private class ChatMessageViewHolder(view: View) { val messageContainer: LinearLayout = view.findViewById(R.id.messageContainer) val senderText: TextView = view.findViewById(R.id.senderText) val contentText: TextView = view.findViewById(R.id.contentText) val timeText: TextView = view.findViewById(R.id.timeText) } } BaseAdapter æœ€ä½³å®è·µ # 1. ViewHolderæ¨¡å¼ # abstract class BaseViewHolder { abstract fun bindData(data: Any) } class ContactViewHolder(view: View) : BaseViewHolder() { val nameText: TextView = view.findViewById(R.id.nameText) val phoneText: TextView = view.findViewById(R.id.phoneText) val emailText: TextView = view.findViewById(R.id.emailText) override fun bindData(data: Any) { if (data is ContactItem) { nameText.text = data.name phoneText.text = data.phone emailText.text = data.email } } } 2. é€‚é…å™¨å·¥å…·ç±» # object BaseAdapterUtils { fun \u0026lt;T\u0026gt; createSimpleAdapter( context: Context, data: List\u0026lt;T\u0026gt;, layoutRes: Int, bindView: (View, T, Int) -\u0026gt; Unit ): BaseAdapter { return object : BaseAdapter() { override fun getCount(): Int = data.size override fun getItem(position: Int): T = data[position] override fun getItemId(position: Int): Long = position.toLong() override fun getView(position: Int, convertView: View?, parent: ViewGroup?): View { val view = convertView ?: LayoutInflater.from(context).inflate(layoutRes, parent, false) bindView(view, data[position], position) return view } } } fun createContactAdapter( context: Context, contacts: List\u0026lt;ContactItem\u0026gt; ): BaseAdapter { return createSimpleAdapter(context, contacts, R.layout.contact_item) { view, contact, position -\u0026gt; val nameText = view.findViewById\u0026lt;TextView\u0026gt;(R.id.nameText) val phoneText = view.findViewById\u0026lt;TextView\u0026gt;(R.id.phoneText) val emailText = view.findViewById\u0026lt;TextView\u0026gt;(R.id.emailText) nameText.text = contact.name phoneText.text = contact.phone emailText.text = contact.email } } } ğŸ“‹ æ€»ç»“ # BaseAdapter æ˜¯ Android å¼€å‘ä¸­æœ€çµæ´»çš„é€‚é…å™¨ï¼š\næœ€å¤§çµæ´»æ€§ï¼šå®Œå…¨è‡ªå®šä¹‰åˆ—è¡¨é¡¹å†…å®¹å’Œæ ·å¼ ViewHolderæ¨¡å¼ï¼šæé«˜æ€§èƒ½ï¼Œå‡å°‘findViewByIdè°ƒç”¨ å¤šç±»å‹æ”¯æŒï¼šæ”¯æŒä¸åŒç±»å‹çš„åˆ—è¡¨é¡¹ åŠ¨æ€æ›´æ–°ï¼šæ”¯æŒæ•°æ®çš„åŠ¨æ€æ·»åŠ ã€åˆ é™¤ã€ä¿®æ”¹ å®é™…åº”ç”¨ï¼šèŠå¤©æ¶ˆæ¯ã€å¤æ‚åˆ—è¡¨ã€å¤šç±»å‹æ•°æ®ç­‰åœºæ™¯ æœ€ä½³å®è·µï¼šViewHolderæ¨¡å¼ã€å·¥å…·ç±»å°è£… æŒæ¡ BaseAdapter çš„ä½¿ç”¨æ–¹æ³•å¯¹äºåˆ›å»ºé«˜åº¦è‡ªå®šä¹‰çš„åˆ—è¡¨ç•Œé¢è‡³å…³é‡è¦ã€‚\n","date":"24 October 2025","externalUrl":null,"permalink":"/posts/android/18---baseadapter-%E5%9F%BA%E7%A1%80%E5%8D%95%E4%B8%80%E5%85%83%E7%B4%A0/","section":"Posts","summary":"è¯¦ç»†ä»‹ç»Android BaseAdapterçš„ä½¿ç”¨æ–¹æ³•ã€è‡ªå®šä¹‰å®ç°å’ŒViewHolderæ¨¡å¼","title":"BaseAdapter åŸºç¡€å•ä¸€å…ƒç´ ","type":"posts"},{"content":" Button æŒ‰é’®æ§ä»¶ # Button æ˜¯ Android ä¸­æœ€å¸¸ç”¨çš„äº¤äº’æ§ä»¶ï¼Œç»§æ‰¿è‡ª TextViewï¼Œç”¨äºå“åº”ç”¨æˆ·çš„ç‚¹å‡»æ“ä½œã€‚\nButton åŸºæœ¬å±æ€§ # \u0026lt;Button android:id=\u0026#34;@+id/button\u0026#34; android:layout_width=\u0026#34;wrap_content\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:text=\u0026#34;ç‚¹å‡»æˆ‘\u0026#34; android:textSize=\u0026#34;16sp\u0026#34; android:textColor=\u0026#34;#FFFFFF\u0026#34; android:background=\u0026#34;@drawable/button_background\u0026#34; android:padding=\u0026#34;12dp\u0026#34; android:layout_margin=\u0026#34;8dp\u0026#34; /\u0026gt; ç‚¹å‡»äº‹ä»¶å®ç°æ–¹å¼ # Android æä¾›äº†å››ç§å®ç° Button ç‚¹å‡»äº‹ä»¶çš„æ–¹å¼ï¼š\n1. è‡ªå®šä¹‰å†…éƒ¨ç±»å®ç° # class MainActivity : AppCompatActivity() { private lateinit var button: Button override fun onCreate(savedInstanceState: Bundle?) { super.onCreate(savedInstanceState) setContentView(R.layout.activity_main) initViews() setupButton() } private fun initViews() { button = findViewById(R.id.button) } private fun setupButton() { // åˆ›å»ºè‡ªå®šä¹‰ç‚¹å‡»ç›‘å¬å™¨ val myOnClickListener = MyOnClickListener() button.setOnClickListener(myOnClickListener) } // è‡ªå®šä¹‰å†…éƒ¨ç±» inner class MyOnClickListener : View.OnClickListener { override fun onClick(v: View?) { when (v?.id) { R.id.button -\u0026gt; { Toast.makeText(this@MainActivity, \u0026#34;æŒ‰é’®è¢«ç‚¹å‡»äº†\u0026#34;, Toast.LENGTH_SHORT).show() Log.d(\u0026#34;Button\u0026#34;, \u0026#34;è‡ªå®šä¹‰å†…éƒ¨ç±»å®ç°ç‚¹å‡»äº‹ä»¶\u0026#34;) } } } } } 2. åŒ¿åå†…éƒ¨ç±»å®ç° # class MainActivity : AppCompatActivity() { private lateinit var button: Button override fun onCreate(savedInstanceState: Bundle?) { super.onCreate(savedInstanceState) setContentView(R.layout.activity_main) initViews() setupButton() } private fun initViews() { button = findViewById(R.id.button) } private fun setupButton() { // ä½¿ç”¨åŒ¿åå†…éƒ¨ç±» button.setOnClickListener(object : View.OnClickListener { override fun onClick(v: View?) { Toast.makeText(this@MainActivity, \u0026#34;åŒ¿åå†…éƒ¨ç±»å®ç°ç‚¹å‡»äº‹ä»¶\u0026#34;, Toast.LENGTH_SHORT).show() Log.d(\u0026#34;Button\u0026#34;, \u0026#34;åŒ¿åå†…éƒ¨ç±»å®ç°\u0026#34;) } }) } } 3. Lambda è¡¨è¾¾å¼å®ç°ï¼ˆæ¨èï¼‰ # class MainActivity : AppCompatActivity() { private lateinit var button: Button override fun onCreate(savedInstanceState: Bundle?) { super.onCreate(savedInstanceState) setContentView(R.layout.activity_main) initViews() setupButton() } private fun initViews() { button = findViewById(R.id.button) } private fun setupButton() { // ä½¿ç”¨ Lambda è¡¨è¾¾å¼ï¼ˆæœ€ç®€æ´çš„æ–¹å¼ï¼‰ button.setOnClickListener { Toast.makeText(this, \u0026#34;Lambdaè¡¨è¾¾å¼å®ç°ç‚¹å‡»äº‹ä»¶\u0026#34;, Toast.LENGTH_SHORT).show() Log.d(\u0026#34;Button\u0026#34;, \u0026#34;Lambdaè¡¨è¾¾å¼å®ç°\u0026#34;) // å¯ä»¥åœ¨è¿™é‡Œæ·»åŠ æ›´å¤šé€»è¾‘ handleButtonClick() } } private fun handleButtonClick() { // å¤„ç†æŒ‰é’®ç‚¹å‡»çš„ä¸šåŠ¡é€»è¾‘ val currentTime = System.currentTimeMillis() Log.d(\u0026#34;Button\u0026#34;, \u0026#34;ç‚¹å‡»æ—¶é—´ï¼š$currentTime\u0026#34;) } } 4. å®ç°æ¥å£æ–¹å¼ # class MainActivity : AppCompatActivity(), View.OnClickListener { private lateinit var button: Button private lateinit var button2: Button override fun onCreate(savedInstanceState: Bundle?) { super.onCreate(savedInstanceState) setContentView(R.layout.activity_main) initViews() setupButtons() } private fun initViews() { button = findViewById(R.id.button) button2 = findViewById(R.id.button2) } private fun setupButtons() { // è®¾ç½®ç‚¹å‡»ç›‘å¬å™¨ä¸ºå½“å‰Activity button.setOnClickListener(this) button2.setOnClickListener(this) } override fun onClick(v: View?) { when (v?.id) { R.id.button -\u0026gt; { Toast.makeText(this, \u0026#34;ç¬¬ä¸€ä¸ªæŒ‰é’®è¢«ç‚¹å‡»\u0026#34;, Toast.LENGTH_SHORT).show() Log.d(\u0026#34;Button\u0026#34;, \u0026#34;ç¬¬ä¸€ä¸ªæŒ‰é’®ç‚¹å‡»äº‹ä»¶\u0026#34;) } R.id.button2 -\u0026gt; { Toast.makeText(this, \u0026#34;ç¬¬äºŒä¸ªæŒ‰é’®è¢«ç‚¹å‡»\u0026#34;, Toast.LENGTH_SHORT).show() Log.d(\u0026#34;Button\u0026#34;, \u0026#34;ç¬¬äºŒä¸ªæŒ‰é’®ç‚¹å‡»äº‹ä»¶\u0026#34;) } } } } 5. XML ç»‘å®šå‡½æ•°å®ç° # XML å¸ƒå±€æ–‡ä»¶ # \u0026lt;Button android:id=\u0026#34;@+id/button\u0026#34; android:layout_width=\u0026#34;wrap_content\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:text=\u0026#34;XMLç»‘å®šæŒ‰é’®\u0026#34; android:onClick=\u0026#34;onButtonClick\u0026#34; android:background=\u0026#34;@drawable/button_background\u0026#34; /\u0026gt; Kotlin ä»£ç  # class MainActivity : AppCompatActivity() { override fun onCreate(savedInstanceState: Bundle?) { super.onCreate(savedInstanceState) setContentView(R.layout.activity_main) } // XMLç»‘å®šçš„ç‚¹å‡»äº‹ä»¶æ–¹æ³• fun onButtonClick(view: View) { when (view.id) { R.id.button -\u0026gt; { Toast.makeText(this, \u0026#34;XMLç»‘å®šå®ç°ç‚¹å‡»äº‹ä»¶\u0026#34;, Toast.LENGTH_SHORT).show() Log.d(\u0026#34;Button\u0026#34;, \u0026#34;XMLç»‘å®šå®ç°\u0026#34;) } } } } Button æ ·å¼å®šåˆ¶ # è‡ªå®šä¹‰èƒŒæ™¯æ ·å¼ # åœ¨ res/drawable/button_background.xml ä¸­å®šä¹‰ï¼š\n\u0026lt;?xml version=\u0026#34;1.0\u0026#34; encoding=\u0026#34;utf-8\u0026#34;?\u0026gt; \u0026lt;selector xmlns:android=\u0026#34;http://schemas.android.com/apk/res/android\u0026#34;\u0026gt; \u0026lt;!-- æ­£å¸¸çŠ¶æ€ --\u0026gt; \u0026lt;item android:state_enabled=\u0026#34;true\u0026#34; android:state_pressed=\u0026#34;false\u0026#34;\u0026gt; \u0026lt;shape android:shape=\u0026#34;rectangle\u0026#34;\u0026gt; \u0026lt;solid android:color=\u0026#34;#2196F3\u0026#34; /\u0026gt; \u0026lt;corners android:radius=\u0026#34;8dp\u0026#34; /\u0026gt; \u0026lt;stroke android:width=\u0026#34;1dp\u0026#34; android:color=\u0026#34;#1976D2\u0026#34; /\u0026gt; \u0026lt;/shape\u0026gt; \u0026lt;/item\u0026gt; \u0026lt;!-- æŒ‰ä¸‹çŠ¶æ€ --\u0026gt; \u0026lt;item android:state_pressed=\u0026#34;true\u0026#34;\u0026gt; \u0026lt;shape android:shape=\u0026#34;rectangle\u0026#34;\u0026gt; \u0026lt;solid android:color=\u0026#34;#1976D2\u0026#34; /\u0026gt; \u0026lt;corners android:radius=\u0026#34;8dp\u0026#34; /\u0026gt; \u0026lt;/shape\u0026gt; \u0026lt;/item\u0026gt; \u0026lt;!-- ç¦ç”¨çŠ¶æ€ --\u0026gt; \u0026lt;item android:state_enabled=\u0026#34;false\u0026#34;\u0026gt; \u0026lt;shape android:shape=\u0026#34;rectangle\u0026#34;\u0026gt; \u0026lt;solid android:color=\u0026#34;#CCCCCC\u0026#34; /\u0026gt; \u0026lt;corners android:radius=\u0026#34;8dp\u0026#34; /\u0026gt; \u0026lt;/shape\u0026gt; \u0026lt;/item\u0026gt; \u0026lt;/selector\u0026gt; åº”ç”¨è‡ªå®šä¹‰æ ·å¼ # \u0026lt;Button android:id=\u0026#34;@+id/customButton\u0026#34; android:layout_width=\u0026#34;wrap_content\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:text=\u0026#34;è‡ªå®šä¹‰æ ·å¼æŒ‰é’®\u0026#34; android:textColor=\u0026#34;#FFFFFF\u0026#34; android:textSize=\u0026#34;16sp\u0026#34; android:background=\u0026#34;@drawable/button_background\u0026#34; android:padding=\u0026#34;16dp\u0026#34; /\u0026gt; ç‰¹æ®ŠæŒ‰é’®ç±»å‹ # ImageButton å›¾ç‰‡æŒ‰é’® # \u0026lt;ImageButton android:id=\u0026#34;@+id/imageButton\u0026#34; android:layout_width=\u0026#34;60dp\u0026#34; android:layout_height=\u0026#34;60dp\u0026#34; android:src=\u0026#34;@drawable/ic_add\u0026#34; android:background=\u0026#34;@drawable/image_button_background\u0026#34; android:scaleType=\u0026#34;centerInside\u0026#34; /\u0026gt; private fun setupImageButton() { imageButton.setOnClickListener { Toast.makeText(this, \u0026#34;å›¾ç‰‡æŒ‰é’®è¢«ç‚¹å‡»\u0026#34;, Toast.LENGTH_SHORT).show() } } FloatingActionButton æ‚¬æµ®æŒ‰é’® # \u0026lt;com.google.android.material.floatingactionbutton.FloatingActionButton android:id=\u0026#34;@+id/fab\u0026#34; android:layout_width=\u0026#34;wrap_content\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:layout_gravity=\u0026#34;bottom|end\u0026#34; android:layout_margin=\u0026#34;16dp\u0026#34; android:src=\u0026#34;@drawable/ic_add\u0026#34; app:backgroundTint=\u0026#34;@color/primary\u0026#34; app:tint=\u0026#34;@color/white\u0026#34; /\u0026gt; æŒ‰é’®çŠ¶æ€ç®¡ç† # åŠ¨æ€æ§åˆ¶æŒ‰é’®çŠ¶æ€ # class MainActivity : AppCompatActivity() { private lateinit var submitButton: Button private lateinit var editText: EditText override fun onCreate(savedInstanceState: Bundle?) { super.onCreate(savedInstanceState) setContentView(R.layout.activity_main) initViews() setupButtonState() } private fun initViews() { submitButton = findViewById(R.id.submitButton) editText = findViewById(R.id.editText) } private fun setupButtonState() { // åˆå§‹çŠ¶æ€ç¦ç”¨æŒ‰é’® submitButton.isEnabled = false // ç›‘å¬è¾“å…¥å˜åŒ– editText.addTextChangedListener(object : TextWatcher { override fun beforeTextChanged(s: CharSequence?, start: Int, count: Int, after: Int) {} override fun onTextChanged(s: CharSequence?, start: Int, before: Int, count: Int) { // æ ¹æ®è¾“å…¥å†…å®¹åŠ¨æ€å¯ç”¨/ç¦ç”¨æŒ‰é’® submitButton.isEnabled = s?.isNotEmpty() == true } override fun afterTextChanged(s: Editable?) {} }) // æŒ‰é’®ç‚¹å‡»å¤„ç† submitButton.setOnClickListener { if (submitButton.isEnabled) { handleSubmit() } } } private fun handleSubmit() { val inputText = editText.text.toString() Toast.makeText(this, \u0026#34;æäº¤å†…å®¹ï¼š$inputText\u0026#34;, Toast.LENGTH_SHORT).show() // æäº¤åç¦ç”¨æŒ‰é’®é˜²æ­¢é‡å¤æäº¤ submitButton.isEnabled = false submitButton.text = \u0026#34;å·²æäº¤\u0026#34; } } æŒ‰é’®åŠ¨ç”»æ•ˆæœ # ç‚¹å‡»åŠ¨ç”» # private fun setupButtonAnimation() { button.setOnClickListener { // ç¼©æ”¾åŠ¨ç”» val scaleDown = ObjectAnimator.ofFloat(button, \u0026#34;scaleX\u0026#34;, 1f, 0.9f) val scaleUp = ObjectAnimator.ofFloat(button, \u0026#34;scaleX\u0026#34;, 0.9f, 1f) val animatorSet = AnimatorSet() animatorSet.play(scaleUp).after(scaleDown) animatorSet.duration = 100 animatorSet.start() // æ‰§è¡Œç‚¹å‡»é€»è¾‘ handleButtonClick() } } æœ€ä½³å®è·µ # 1. äº‹ä»¶å¤„ç†æ–¹å¼é€‰æ‹© # æ–¹å¼ é€‚ç”¨åœºæ™¯ ä¼˜ç‚¹ ç¼ºç‚¹ Lambdaè¡¨è¾¾å¼ ç®€å•ç‚¹å‡»äº‹ä»¶ ä»£ç ç®€æ´ ä¸é€‚åˆå¤æ‚é€»è¾‘ è‡ªå®šä¹‰å†…éƒ¨ç±» å¤æ‚äº‹ä»¶å¤„ç† é€»è¾‘æ¸…æ™° ä»£ç è¾ƒå¤š æ¥å£å®ç° å¤šä¸ªæŒ‰é’® ç»Ÿä¸€ç®¡ç† éœ€è¦åˆ¤æ–­ID XMLç»‘å®š ç®€å•åœºæ™¯ å£°æ˜å¼ çµæ´»æ€§å·® 2. æ€§èƒ½ä¼˜åŒ– # // é¿å…åœ¨ç‚¹å‡»äº‹ä»¶ä¸­åˆ›å»ºæ–°å¯¹è±¡ private val clickListener = View.OnClickListener { view -\u0026gt; when (view.id) { R.id.button -\u0026gt; handleClick() } } private fun setupButtons() { button.setOnClickListener(clickListener) } 3. æ— éšœç¢æ”¯æŒ # \u0026lt;Button android:id=\u0026#34;@+id/button\u0026#34; android:layout_width=\u0026#34;wrap_content\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:text=\u0026#34;æäº¤\u0026#34; android:contentDescription=\u0026#34;æäº¤è¡¨å•æ•°æ®\u0026#34; android:importantForAccessibility=\u0026#34;yes\u0026#34; /\u0026gt; ğŸ“‹ æ€»ç»“ # Button æ˜¯ Android å¼€å‘ä¸­æœ€åŸºç¡€çš„äº¤äº’æ§ä»¶ï¼š\nå¤šç§äº‹ä»¶å®ç°æ–¹å¼ï¼šLambdaè¡¨è¾¾å¼ã€å†…éƒ¨ç±»ã€æ¥å£å®ç°ã€XMLç»‘å®š æ ·å¼å®šåˆ¶ï¼šé€šè¿‡drawableèµ„æºå®ç°è‡ªå®šä¹‰å¤–è§‚ çŠ¶æ€ç®¡ç†ï¼šåŠ¨æ€æ§åˆ¶æŒ‰é’®çš„å¯ç”¨/ç¦ç”¨çŠ¶æ€ åŠ¨ç”»æ•ˆæœï¼šæ·»åŠ ç‚¹å‡»åé¦ˆå’Œè¿‡æ¸¡åŠ¨ç”» æœ€ä½³å®è·µï¼šé€‰æ‹©åˆé€‚çš„å®ç°æ–¹å¼ï¼Œæ³¨é‡æ€§èƒ½å’Œç”¨æˆ·ä½“éªŒ æŒæ¡ Button çš„å„ç§ä½¿ç”¨æ–¹æ³•æ˜¯ Android å¼€å‘çš„åŸºç¡€æŠ€èƒ½ã€‚\n","date":"24 October 2025","externalUrl":null,"permalink":"/posts/android/05---button-%E6%8C%89%E9%92%AE%E6%8E%A7%E4%BB%B6/","section":"Posts","summary":"è¯¦ç»†ä»‹ç»Android ButtonæŒ‰é’®æ§ä»¶çš„å››ç§ç‚¹å‡»äº‹ä»¶å®ç°æ–¹å¼ï¼ŒåŒ…æ‹¬è‡ªå®šä¹‰å†…éƒ¨ç±»ã€åŒ¿åå†…éƒ¨ç±»ã€æ¥å£å®ç°å’ŒXMLç»‘å®š","title":"Button æŒ‰é’®æ§ä»¶","type":"posts"},{"content":"","date":"24 October 2025","externalUrl":null,"permalink":"/categories/","section":"Categories","summary":"","title":"Categories","type":"categories"},{"content":" CheckBox é€‰æ‹©æ§ä»¶ # Android æä¾›äº†å¤šç§é€‰æ‹©æ§ä»¶ï¼Œç”¨äºä¸åŒçš„ç”¨æˆ·äº¤äº’åœºæ™¯ã€‚æœ¬æ–‡å°†è¯¦ç»†ä»‹ç»å„ç§é€‰æ‹©æ§ä»¶çš„ä½¿ç”¨æ–¹æ³•ã€‚\nCheckBox å¤é€‰æ¡† # CheckBox æ˜¯ç³»ç»Ÿå°è£…çš„å¤é€‰æ§ä»¶ï¼Œæ”¯æŒä¸¤ç§çŠ¶æ€ï¼šé€‰ä¸­å’Œæœªé€‰ä¸­ã€‚\nåŸºæœ¬å±æ€§ # å±æ€§ è¯´æ˜ ç¤ºä¾‹å€¼ android:checked åˆå§‹é€‰ä¸­çŠ¶æ€ true, false android:text æ˜¾ç¤ºæ–‡æœ¬ \u0026quot;åŒæ„æ¡æ¬¾\u0026quot; android:textOn é€‰ä¸­æ—¶æ˜¾ç¤ºæ–‡æœ¬ \u0026quot;å·²é€‰ä¸­\u0026quot; android:textOff æœªé€‰ä¸­æ—¶æ˜¾ç¤ºæ–‡æœ¬ \u0026quot;æœªé€‰ä¸­\u0026quot; åŸºæœ¬ä½¿ç”¨ # \u0026lt;CheckBox android:id=\u0026#34;@+id/checkBox\u0026#34; android:layout_width=\u0026#34;wrap_content\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:text=\u0026#34;åŒæ„ç”¨æˆ·åè®®\u0026#34; android:checked=\u0026#34;false\u0026#34; /\u0026gt; Kotlin ä»£ç ç¤ºä¾‹ # class CheckBoxActivity : AppCompatActivity() { private lateinit var checkBox: CheckBox private lateinit var submitButton: Button private lateinit var statusText: TextView override fun onCreate(savedInstanceState: Bundle?) { super.onCreate(savedInstanceState) setContentView(R.layout.activity_checkbox) initViews() setupCheckBox() setupSubmitButton() } private fun initViews() { checkBox = findViewById(R.id.checkBox) submitButton = findViewById(R.id.submitButton) statusText = findViewById(R.id.statusText) } private fun setupCheckBox() { // è®¾ç½®é€‰ä¸­çŠ¶æ€å˜åŒ–ç›‘å¬å™¨ checkBox.setOnCheckedChangeListener { _, isChecked -\u0026gt; statusText.text = if (isChecked) \u0026#34;å·²é€‰ä¸­\u0026#34; else \u0026#34;æœªé€‰ä¸­\u0026#34; submitButton.isEnabled = isChecked } } private fun setupSubmitButton() { submitButton.isEnabled = false submitButton.setOnClickListener { if (checkBox.isChecked) { Toast.makeText(this, \u0026#34;æäº¤æˆåŠŸ\u0026#34;, Toast.LENGTH_SHORT).show() } } } // ç¨‹åºæ§åˆ¶é€‰ä¸­çŠ¶æ€ private fun setCheckBoxChecked(checked: Boolean) { checkBox.isChecked = checked } // è·å–é€‰ä¸­çŠ¶æ€ private fun isCheckBoxChecked(): Boolean { return checkBox.isChecked } } å¤šé€‰ç¤ºä¾‹ # class MultiCheckBoxActivity : AppCompatActivity() { private lateinit var checkBoxes: List\u0026lt;CheckBox\u0026gt; private lateinit var selectAllButton: Button private lateinit var clearAllButton: Button private lateinit var submitButton: Button private lateinit var selectedCountText: TextView override fun onCreate(savedInstanceState: Bundle?) { super.onCreate(savedInstanceState) setContentView(R.layout.activity_multi_checkbox) initViews() setupCheckBoxes() setupButtons() } private fun initViews() { checkBoxes = listOf( findViewById(R.id.checkBox1), findViewById(R.id.checkBox2), findViewById(R.id.checkBox3), findViewById(R.id.checkBox4) ) selectAllButton = findViewById(R.id.selectAllButton) clearAllButton = findViewById(R.id.clearAllButton) submitButton = findViewById(R.id.submitButton) selectedCountText = findViewById(R.id.selectedCountText) } private fun setupCheckBoxes() { val options = listOf(\u0026#34;é€‰é¡¹1\u0026#34;, \u0026#34;é€‰é¡¹2\u0026#34;, \u0026#34;é€‰é¡¹3\u0026#34;, \u0026#34;é€‰é¡¹4\u0026#34;) checkBoxes.forEachIndexed { index, checkBox -\u0026gt; checkBox.text = options[index] checkBox.setOnCheckedChangeListener { _, _ -\u0026gt; updateSelectedCount() } } updateSelectedCount() } private fun setupButtons() { selectAllButton.setOnClickListener { selectAll(true) } clearAllButton.setOnClickListener { selectAll(false) } submitButton.setOnClickListener { submitSelectedOptions() } } private fun selectAll(select: Boolean) { checkBoxes.forEach { checkBox -\u0026gt; checkBox.isChecked = select } updateSelectedCount() } private fun updateSelectedCount() { val selectedCount = checkBoxes.count { it.isChecked } selectedCountText.text = \u0026#34;å·²é€‰æ‹©: $selectedCount é¡¹\u0026#34; submitButton.isEnabled = selectedCount \u0026gt; 0 } private fun submitSelectedOptions() { val selectedOptions = checkBoxes .filter { it.isChecked } .map { it.text.toString() } val message = \u0026#34;å·²é€‰æ‹©: ${selectedOptions.joinToString(\u0026#34;, \u0026#34;)}\u0026#34; Toast.makeText(this, message, Toast.LENGTH_LONG).show() } } RadioButton å•é€‰æ¡† # RadioButton æ˜¯å•é€‰æ§ä»¶ï¼Œé€šå¸¸ä¸ RadioGroup ä¸€èµ·ä½¿ç”¨ï¼Œç¡®ä¿ä¸€ç»„ä¸­åªèƒ½é€‰æ‹©ä¸€ä¸ªé€‰é¡¹ã€‚\nåŸºæœ¬å±æ€§ # å±æ€§ è¯´æ˜ ç¤ºä¾‹å€¼ android:checked åˆå§‹é€‰ä¸­çŠ¶æ€ true, false android:text æ˜¾ç¤ºæ–‡æœ¬ \u0026quot;ç”·\u0026quot; android:button è‡ªå®šä¹‰æŒ‰é’®æ ·å¼ @drawable/custom_radio åŸºæœ¬ä½¿ç”¨ # \u0026lt;RadioGroup android:id=\u0026#34;@+id/radioGroup\u0026#34; android:layout_width=\u0026#34;wrap_content\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:orientation=\u0026#34;vertical\u0026#34;\u0026gt; \u0026lt;RadioButton android:id=\u0026#34;@+id/radioButton1\u0026#34; android:layout_width=\u0026#34;wrap_content\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:text=\u0026#34;ç”·\u0026#34; android:checked=\u0026#34;true\u0026#34; /\u0026gt; \u0026lt;RadioButton android:id=\u0026#34;@+id/radioButton2\u0026#34; android:layout_width=\u0026#34;wrap_content\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:text=\u0026#34;å¥³\u0026#34; /\u0026gt; \u0026lt;RadioButton android:id=\u0026#34;@+id/radioButton3\u0026#34; android:layout_width=\u0026#34;wrap_content\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:text=\u0026#34;å…¶ä»–\u0026#34; /\u0026gt; \u0026lt;/RadioGroup\u0026gt; Kotlin ä»£ç ç¤ºä¾‹ # class RadioButtonActivity : AppCompatActivity() { private lateinit var radioGroup: RadioGroup private lateinit var submitButton: Button private lateinit var selectedText: TextView override fun onCreate(savedInstanceState: Bundle?) { super.onCreate(savedInstanceState) setContentView(R.layout.activity_radio_button) initViews() setupRadioGroup() setupSubmitButton() } private fun initViews() { radioGroup = findViewById(R.id.radioGroup) submitButton = findViewById(R.id.submitButton) selectedText = findViewById(R.id.selectedText) } private fun setupRadioGroup() { radioGroup.setOnCheckedChangeListener { _, checkedId -\u0026gt; val selectedRadioButton = findViewById\u0026lt;RadioButton\u0026gt;(checkedId) selectedText.text = \u0026#34;å·²é€‰æ‹©: ${selectedRadioButton.text}\u0026#34; } } private fun setupSubmitButton() { submitButton.setOnClickListener { val checkedRadioButtonId = radioGroup.checkedRadioButtonId if (checkedRadioButtonId != -1) { val selectedRadioButton = findViewById\u0026lt;RadioButton\u0026gt;(checkedRadioButtonId) Toast.makeText(this, \u0026#34;æäº¤: ${selectedRadioButton.text}\u0026#34;, Toast.LENGTH_SHORT).show() } else { Toast.makeText(this, \u0026#34;è¯·é€‰æ‹©ä¸€ä¸ªé€‰é¡¹\u0026#34;, Toast.LENGTH_SHORT).show() } } } // ç¨‹åºæ§åˆ¶é€‰ä¸­çŠ¶æ€ private fun setRadioButtonChecked(radioButtonId: Int) { radioGroup.check(radioButtonId) } // è·å–é€‰ä¸­çš„ RadioButton private fun getSelectedRadioButton(): RadioButton? { val checkedId = radioGroup.checkedRadioButtonId return if (checkedId != -1) findViewById(checkedId) else null } } åŠ¨æ€åˆ›å»º RadioButton # class DynamicRadioButtonActivity : AppCompatActivity() { private lateinit var radioGroup: RadioGroup private lateinit var addOptionButton: Button private lateinit var submitButton: Button private val options = mutableListOf(\u0026#34;é€‰é¡¹1\u0026#34;, \u0026#34;é€‰é¡¹2\u0026#34;, \u0026#34;é€‰é¡¹3\u0026#34;) override fun onCreate(savedInstanceState: Bundle?) { super.onCreate(savedInstanceState) setContentView(R.layout.activity_dynamic_radio_button) initViews() createRadioButtons() setupButtons() } private fun initViews() { radioGroup = findViewById(R.id.radioGroup) addOptionButton = findViewById(R.id.addOptionButton) submitButton = findViewById(R.id.submitButton) } private fun createRadioButtons() { options.forEachIndexed { index, optionText -\u0026gt; val radioButton = RadioButton(this).apply { id = View.generateViewId() text = optionText layoutParams = RadioGroup.LayoutParams( RadioGroup.LayoutParams.WRAP_CONTENT, RadioGroup.LayoutParams.WRAP_CONTENT ) } radioGroup.addView(radioButton) } } private fun setupButtons() { addOptionButton.setOnClickListener { addNewOption() } submitButton.setOnClickListener { submitSelection() } } private fun addNewOption() { val newOptionText = \u0026#34;é€‰é¡¹${options.size + 1}\u0026#34; options.add(newOptionText) val radioButton = RadioButton(this).apply { id = View.generateViewId() text = newOptionText layoutParams = RadioGroup.LayoutParams( RadioGroup.LayoutParams.WRAP_CONTENT, RadioGroup.LayoutParams.WRAP_CONTENT ) } radioGroup.addView(radioButton) Toast.makeText(this, \u0026#34;æ·»åŠ äº†æ–°é€‰é¡¹: $newOptionText\u0026#34;, Toast.LENGTH_SHORT).show() } private fun submitSelection() { val checkedId = radioGroup.checkedRadioButtonId if (checkedId != -1) { val selectedRadioButton = findViewById\u0026lt;RadioButton\u0026gt;(checkedId) Toast.makeText(this, \u0026#34;æäº¤: ${selectedRadioButton.text}\u0026#34;, Toast.LENGTH_SHORT).show() } else { Toast.makeText(this, \u0026#34;è¯·é€‰æ‹©ä¸€ä¸ªé€‰é¡¹\u0026#34;, Toast.LENGTH_SHORT).show() } } } ToggleButton åˆ‡æ¢æŒ‰é’® # ToggleButton æ˜¯åˆ‡æ¢æŒ‰é’®ï¼Œåªæœ‰ä¸¤ç§çŠ¶æ€ï¼šå¼€å’Œå…³ã€‚\nåŸºæœ¬å±æ€§ # å±æ€§ è¯´æ˜ ç¤ºä¾‹å€¼ android:textOn å¼€å¯æ—¶æ˜¾ç¤ºæ–‡æœ¬ \u0026quot;å¼€å¯\u0026quot; android:textOff å…³é—­æ—¶æ˜¾ç¤ºæ–‡æœ¬ \u0026quot;å…³é—­\u0026quot; android:checked åˆå§‹çŠ¶æ€ true, false åŸºæœ¬ä½¿ç”¨ # \u0026lt;ToggleButton android:id=\u0026#34;@+id/toggleButton\u0026#34; android:layout_width=\u0026#34;wrap_content\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:textOn=\u0026#34;å¼€å¯\u0026#34; android:textOff=\u0026#34;å…³é—­\u0026#34; android:checked=\u0026#34;false\u0026#34; /\u0026gt; Kotlin ä»£ç ç¤ºä¾‹ # class ToggleButtonActivity : AppCompatActivity() { private lateinit var toggleButton: ToggleButton private lateinit var statusText: TextView private lateinit var actionButton: Button override fun onCreate(savedInstanceState: Bundle?) { super.onCreate(savedInstanceState) setContentView(R.layout.activity_toggle_button) initViews() setupToggleButton() setupActionButton() } private fun initViews() { toggleButton = findViewById(R.id.toggleButton) statusText = findViewById(R.id.statusText) actionButton = findViewById(R.id.actionButton) } private fun setupToggleButton() { toggleButton.setOnCheckedChangeListener { _, isChecked -\u0026gt; statusText.text = if (isChecked) \u0026#34;çŠ¶æ€: å¼€å¯\u0026#34; else \u0026#34;çŠ¶æ€: å…³é—­\u0026#34; actionButton.isEnabled = isChecked } // åˆå§‹çŠ¶æ€ statusText.text = \u0026#34;çŠ¶æ€: å…³é—­\u0026#34; actionButton.isEnabled = false } private fun setupActionButton() { actionButton.setOnClickListener { if (toggleButton.isChecked) { Toast.makeText(this, \u0026#34;æ‰§è¡Œæ“ä½œ\u0026#34;, Toast.LENGTH_SHORT).show() } } } // ç¨‹åºæ§åˆ¶çŠ¶æ€ private fun setToggleState(checked: Boolean) { toggleButton.isChecked = checked } // è·å–å½“å‰çŠ¶æ€ private fun getToggleState(): Boolean { return toggleButton.isChecked } } SeekBar æ»‘åŠ¨æ¡ # SeekBar æ˜¯æ»‘åŠ¨æ¡æ§ä»¶ï¼Œå¸¸ç”¨äºéŸ³é‡æ§åˆ¶ã€è¿›åº¦è°ƒèŠ‚ç­‰åœºæ™¯ã€‚\nåŸºæœ¬å±æ€§ # å±æ€§ è¯´æ˜ ç¤ºä¾‹å€¼ android:max æœ€å¤§å€¼ 100 android:progress å½“å‰å€¼ 50 android:progressTint è¿›åº¦æ¡é¢œè‰² @color/primary android:thumbTint æ»‘å—é¢œè‰² @color/accent åŸºæœ¬ä½¿ç”¨ # \u0026lt;SeekBar android:id=\u0026#34;@+id/seekBar\u0026#34; android:layout_width=\u0026#34;match_parent\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:max=\u0026#34;100\u0026#34; android:progress=\u0026#34;50\u0026#34; android:progressTint=\u0026#34;@color/primary\u0026#34; android:thumbTint=\u0026#34;@color/accent\u0026#34; /\u0026gt; Kotlin ä»£ç ç¤ºä¾‹ # class SeekBarActivity : AppCompatActivity() { private lateinit var seekBar: SeekBar private lateinit var progressText: TextView private lateinit var resetButton: Button override fun onCreate(savedInstanceState: Bundle?) { super.onCreate(savedInstanceState) setContentView(R.layout.activity_seek_bar) initViews() setupSeekBar() setupResetButton() } private fun initViews() { seekBar = findViewById(R.id.seekBar) progressText = findViewById(R.id.progressText) resetButton = findViewById(R.id.resetButton) } private fun setupSeekBar() { seekBar.max = 100 seekBar.progress = 50 seekBar.setOnSeekBarChangeListener(object : SeekBar.OnSeekBarChangeListener { override fun onProgressChanged(seekBar: SeekBar?, progress: Int, fromUser: Boolean) { progressText.text = \u0026#34;è¿›åº¦: $progress%\u0026#34; // æ ¹æ®è¿›åº¦æ”¹å˜èƒŒæ™¯è‰² val backgroundColor = when { progress \u0026lt; 30 -\u0026gt; Color.RED progress \u0026lt; 70 -\u0026gt; Color.YELLOW else -\u0026gt; Color.GREEN } progressText.setTextColor(backgroundColor) } override fun onStartTrackingTouch(seekBar: SeekBar?) { Toast.makeText(this@SeekBarActivity, \u0026#34;å¼€å§‹æ‹–æ‹½\u0026#34;, Toast.LENGTH_SHORT).show() } override fun onStopTrackingTouch(seekBar: SeekBar?) { Toast.makeText(this@SeekBarActivity, \u0026#34;åœæ­¢æ‹–æ‹½\u0026#34;, Toast.LENGTH_SHORT).show() } }) // åˆå§‹æ˜¾ç¤º progressText.text = \u0026#34;è¿›åº¦: 50%\u0026#34; } private fun setupResetButton() { resetButton.setOnClickListener { seekBar.progress = 0 progressText.text = \u0026#34;è¿›åº¦: 0%\u0026#34; } } // ç¨‹åºæ§åˆ¶è¿›åº¦ private fun setProgress(progress: Int) { seekBar.progress = progress } // è·å–å½“å‰è¿›åº¦ private fun getProgress(): Int { return seekBar.progress } } éŸ³é‡æ§åˆ¶ç¤ºä¾‹ # class VolumeControlActivity : AppCompatActivity() { private lateinit var volumeSeekBar: SeekBar private lateinit var volumeText: TextView private lateinit var muteButton: Button private var isMuted = false private var previousVolume = 50 override fun onCreate(savedInstanceState: Bundle?) { super.onCreate(savedInstanceState) setContentView(R.layout.activity_volume_control) initViews() setupVolumeControl() setupMuteButton() } private fun initViews() { volumeSeekBar = findViewById(R.id.volumeSeekBar) volumeText = findViewById(R.id.volumeText) muteButton = findViewById(R.id.muteButton) } private fun setupVolumeControl() { volumeSeekBar.max = 100 volumeSeekBar.progress = 50 volumeSeekBar.setOnSeekBarChangeListener(object : SeekBar.OnSeekBarChangeListener { override fun onProgressChanged(seekBar: SeekBar?, progress: Int, fromUser: Boolean) { if (!isMuted) { updateVolumeDisplay(progress) } } override fun onStartTrackingTouch(seekBar: SeekBar?) { // å¼€å§‹æ‹–æ‹½ } override fun onStopTrackingTouch(seekBar: SeekBar?) { // åœæ­¢æ‹–æ‹½ } }) updateVolumeDisplay(50) } private fun setupMuteButton() { muteButton.setOnClickListener { toggleMute() } } private fun toggleMute() { if (isMuted) { // å–æ¶ˆé™éŸ³ volumeSeekBar.progress = previousVolume muteButton.text = \u0026#34;é™éŸ³\u0026#34; isMuted = false updateVolumeDisplay(previousVolume) } else { // é™éŸ³ previousVolume = volumeSeekBar.progress volumeSeekBar.progress = 0 muteButton.text = \u0026#34;å–æ¶ˆé™éŸ³\u0026#34; isMuted = true volumeText.text = \u0026#34;éŸ³é‡: é™éŸ³\u0026#34; } } private fun updateVolumeDisplay(volume: Int) { val volumeText = when { volume == 0 -\u0026gt; \u0026#34;éŸ³é‡: é™éŸ³\u0026#34; volume \u0026lt; 30 -\u0026gt; \u0026#34;éŸ³é‡: ä½ ($volume%)\u0026#34; volume \u0026lt; 70 -\u0026gt; \u0026#34;éŸ³é‡: ä¸­ ($volume%)\u0026#34; else -\u0026gt; \u0026#34;éŸ³é‡: é«˜ ($volume%)\u0026#34; } this.volumeText.text = volumeText // æ¨¡æ‹ŸéŸ³é‡å˜åŒ– simulateVolumeChange(volume) } private fun simulateVolumeChange(volume: Int) { // è¿™é‡Œå¯ä»¥æ·»åŠ å®é™…çš„éŸ³é‡æ§åˆ¶é€»è¾‘ Log.d(\u0026#34;VolumeControl\u0026#34;, \u0026#34;éŸ³é‡è®¾ç½®ä¸º: $volume%\u0026#34;) } } å®é™…åº”ç”¨åœºæ™¯ # 1. è®¾ç½®é¡µé¢ # \u0026lt;ScrollView android:layout_width=\u0026#34;match_parent\u0026#34; android:layout_height=\u0026#34;match_parent\u0026#34; android:padding=\u0026#34;16dp\u0026#34;\u0026gt; \u0026lt;LinearLayout android:layout_width=\u0026#34;match_parent\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:orientation=\u0026#34;vertical\u0026#34;\u0026gt; \u0026lt;!-- é€šçŸ¥è®¾ç½® --\u0026gt; \u0026lt;TextView android:layout_width=\u0026#34;wrap_content\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:text=\u0026#34;é€šçŸ¥è®¾ç½®\u0026#34; android:textSize=\u0026#34;18sp\u0026#34; android:textStyle=\u0026#34;bold\u0026#34; android:layout_marginBottom=\u0026#34;16dp\u0026#34; /\u0026gt; \u0026lt;CheckBox android:id=\u0026#34;@+id/pushNotificationCheckBox\u0026#34; android:layout_width=\u0026#34;wrap_content\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:text=\u0026#34;æ¨é€é€šçŸ¥\u0026#34; android:checked=\u0026#34;true\u0026#34; /\u0026gt; \u0026lt;CheckBox android:id=\u0026#34;@+id/emailNotificationCheckBox\u0026#34; android:layout_width=\u0026#34;wrap_content\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:text=\u0026#34;é‚®ä»¶é€šçŸ¥\u0026#34; android:checked=\u0026#34;false\u0026#34; /\u0026gt; \u0026lt;!-- ä¸»é¢˜è®¾ç½® --\u0026gt; \u0026lt;TextView android:layout_width=\u0026#34;wrap_content\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:text=\u0026#34;ä¸»é¢˜è®¾ç½®\u0026#34; android:textSize=\u0026#34;18sp\u0026#34; android:textStyle=\u0026#34;bold\u0026#34; android:layout_marginTop=\u0026#34;32dp\u0026#34; android:layout_marginBottom=\u0026#34;16dp\u0026#34; /\u0026gt; \u0026lt;RadioGroup android:id=\u0026#34;@+id/themeRadioGroup\u0026#34; android:layout_width=\u0026#34;wrap_content\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:orientation=\u0026#34;vertical\u0026#34;\u0026gt; \u0026lt;RadioButton android:id=\u0026#34;@+id/lightThemeRadio\u0026#34; android:layout_width=\u0026#34;wrap_content\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:text=\u0026#34;æµ…è‰²ä¸»é¢˜\u0026#34; android:checked=\u0026#34;true\u0026#34; /\u0026gt; \u0026lt;RadioButton android:id=\u0026#34;@+id/darkThemeRadio\u0026#34; android:layout_width=\u0026#34;wrap_content\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:text=\u0026#34;æ·±è‰²ä¸»é¢˜\u0026#34; /\u0026gt; \u0026lt;RadioButton android:id=\u0026#34;@+id/autoThemeRadio\u0026#34; android:layout_width=\u0026#34;wrap_content\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:text=\u0026#34;è·Ÿéšç³»ç»Ÿ\u0026#34; /\u0026gt; \u0026lt;/RadioGroup\u0026gt; \u0026lt;!-- éŸ³é‡è®¾ç½® --\u0026gt; \u0026lt;TextView android:layout_width=\u0026#34;wrap_content\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:text=\u0026#34;éŸ³é‡è®¾ç½®\u0026#34; android:textSize=\u0026#34;18sp\u0026#34; android:textStyle=\u0026#34;bold\u0026#34; android:layout_marginTop=\u0026#34;32dp\u0026#34; android:layout_marginBottom=\u0026#34;16dp\u0026#34; /\u0026gt; \u0026lt;SeekBar android:id=\u0026#34;@+id/volumeSeekBar\u0026#34; android:layout_width=\u0026#34;match_parent\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:max=\u0026#34;100\u0026#34; android:progress=\u0026#34;50\u0026#34; /\u0026gt; \u0026lt;TextView android:id=\u0026#34;@+id/volumeText\u0026#34; android:layout_width=\u0026#34;wrap_content\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:text=\u0026#34;éŸ³é‡: 50%\u0026#34; android:layout_marginTop=\u0026#34;8dp\u0026#34; /\u0026gt; \u0026lt;/LinearLayout\u0026gt; \u0026lt;/ScrollView\u0026gt; 2. è¡¨å•éªŒè¯ # class FormValidationActivity : AppCompatActivity() { private lateinit var agreementCheckBox: CheckBox private lateinit var genderRadioGroup: RadioGroup private lateinit var submitButton: Button override fun onCreate(savedInstanceState: Bundle?) { super.onCreate(savedInstanceState) setContentView(R.layout.activity_form_validation) initViews() setupValidation() } private fun initViews() { agreementCheckBox = findViewById(R.id.agreementCheckBox) genderRadioGroup = findViewById(R.id.genderRadioGroup) submitButton = findViewById(R.id.submitButton) } private fun setupValidation() { submitButton.setOnClickListener { if (validateForm()) { submitForm() } } } private fun validateForm(): Boolean { var isValid = true // éªŒè¯åè®®å‹¾é€‰ if (!agreementCheckBox.isChecked) { Toast.makeText(this, \u0026#34;è¯·åŒæ„ç”¨æˆ·åè®®\u0026#34;, Toast.LENGTH_SHORT).show() isValid = false } // éªŒè¯æ€§åˆ«é€‰æ‹© if (genderRadioGroup.checkedRadioButtonId == -1) { Toast.makeText(this, \u0026#34;è¯·é€‰æ‹©æ€§åˆ«\u0026#34;, Toast.LENGTH_SHORT).show() isValid = false } return isValid } private fun submitForm() { val selectedGender = findViewById\u0026lt;RadioButton\u0026gt;(genderRadioGroup.checkedRadioButtonId) val message = \u0026#34;æäº¤æˆåŠŸï¼\\næ€§åˆ«: ${selectedGender.text}\\nåè®®: å·²åŒæ„\u0026#34; Toast.makeText(this, message, Toast.LENGTH_LONG).show() } } ğŸ“‹ æ€»ç»“ # Android é€‰æ‹©æ§ä»¶æä¾›äº†ä¸°å¯Œçš„ç”¨æˆ·äº¤äº’æ–¹å¼ï¼š\nCheckBoxï¼šå¤šé€‰åœºæ™¯ï¼Œæ”¯æŒé€‰ä¸­çŠ¶æ€ç›‘å¬ RadioButtonï¼šå•é€‰åœºæ™¯ï¼Œä¸ RadioGroup é…åˆä½¿ç”¨ ToggleButtonï¼šå¼€å…³çŠ¶æ€ï¼Œé€‚åˆè®¾ç½®ç±»åŠŸèƒ½ SeekBarï¼šæ•°å€¼è°ƒèŠ‚ï¼Œå¸¸ç”¨äºéŸ³é‡ã€è¿›åº¦æ§åˆ¶ å®é™…åº”ç”¨ï¼šè®¾ç½®é¡µé¢ã€è¡¨å•éªŒè¯ã€ç”¨æˆ·åå¥½ç­‰åœºæ™¯ æŒæ¡è¿™äº›é€‰æ‹©æ§ä»¶çš„ä½¿ç”¨æ–¹æ³•å¯¹äºåˆ›å»ºè‰¯å¥½çš„ç”¨æˆ·äº¤äº’ä½“éªŒè‡³å…³é‡è¦ã€‚\n","date":"24 October 2025","externalUrl":null,"permalink":"/posts/android/10---checkbox-%E9%80%89%E6%8B%A9%E6%8E%A7%E4%BB%B6/","section":"Posts","summary":"è¯¦ç»†ä»‹ç»Androidé€‰æ‹©æ§ä»¶çš„ä½¿ç”¨æ–¹æ³•ï¼ŒåŒ…æ‹¬CheckBoxã€RadioButtonã€ToggleButtonå’ŒSeekBar","title":"CheckBox é€‰æ‹©æ§ä»¶","type":"posts"},{"content":" ConstraintLayout çº¦æŸå¸ƒå±€ # ConstraintLayout æ˜¯ Android 2.3+ å¼•å…¥çš„å¸ƒå±€å®¹å™¨ï¼Œé€šè¿‡çº¦æŸå…³ç³»æ¥å®šä½å­æ§ä»¶ï¼Œèƒ½å¤Ÿåˆ›å»ºå¤æ‚ä¸”é«˜æ•ˆçš„å¸ƒå±€ã€‚\nConstraintLayout åŸºæœ¬æ¦‚å¿µ # ä»€ä¹ˆæ˜¯çº¦æŸå¸ƒå±€ # ConstraintLayout ä½¿ç”¨çº¦æŸï¼ˆConstraintï¼‰æ¥å®šä¹‰å­æ§ä»¶çš„ä½ç½®å’Œå¤§å°ã€‚æ¯ä¸ªæ§ä»¶é€šè¿‡çº¦æŸå…³ç³»ä¸å…¶ä»–æ§ä»¶æˆ–çˆ¶å®¹å™¨å»ºç«‹è”ç³»ã€‚\nçº¦æŸå¸ƒå±€çš„ä¼˜åŠ¿ # æ‰å¹³åŒ–ç»“æ„ï¼šå‡å°‘å¸ƒå±€åµŒå¥—ï¼Œæå‡æ€§èƒ½ çµæ´»å®šä½ï¼šæ”¯æŒå¤æ‚çš„çº¦æŸå…³ç³» å¯è§†åŒ–è®¾è®¡ï¼šAndroid Studio æä¾›å¯è§†åŒ–ç¼–è¾‘å™¨ å“åº”å¼å¸ƒå±€ï¼šè‡ªåŠ¨é€‚é…ä¸åŒå±å¹•å°ºå¯¸ çº¦æŸå±æ€§è¯¦è§£ # 1. å¯¹é½çº¦æŸ # å½“å‰æ§ä»¶çš„æŸä¸ªæ–¹ä½ä¸å¦ä¸€ä¸ªå‚ç…§ç‰©çš„æŸä¸ªæ–¹ä½å¯¹é½ï¼š\nå±æ€§ è¯´æ˜ å¯¹åº” RelativeLayout app:layout_constraintLeft_toLeftOf å·¦å¯¹é½ alignLeft app:layout_constraintRight_toRightOf å³å¯¹é½ alignRight app:layout_constraintTop_toTopOf ä¸Šå¯¹é½ alignTop app:layout_constraintBottom_toBottomOf ä¸‹å¯¹é½ alignBottom app:layout_constraintStart_toStartOf å¼€å§‹å¯¹é½ alignStart app:layout_constraintEnd_toEndOf ç»“æŸå¯¹é½ alignEnd 2. ä½ç½®çº¦æŸ # å½“å‰æ§ä»¶çš„ A ä¾§åœ¨å‚ç…§ç‰©çš„ B ä¾§ï¼š\nå±æ€§ è¯´æ˜ å¯¹åº” RelativeLayout app:layout_constraintLeft_toRightOf åœ¨å³ä¾§ toRightOf app:layout_constraintRight_toLeftOf åœ¨å·¦ä¾§ toLeftOf app:layout_constraintTop_toBottomOf åœ¨ä¸‹æ–¹ below app:layout_constraintBottom_toTopOf åœ¨ä¸Šæ–¹ above app:layout_constraintStart_toEndOf åœ¨ç»“æŸä¾§ toEndOf app:layout_constraintEnd_toStartOf åœ¨å¼€å§‹ä¾§ toStartOf 3. åç§»çº¦æŸ # å±æ€§ è¯´æ˜ ç¤ºä¾‹å€¼ app:layout_constraintVertical_bias å‚ç›´åç§»é‡ 0.5ï¼ˆæ­£ä¸­é—´ï¼‰ app:layout_constraintHorizontal_bias æ°´å¹³åç§»é‡ 0.3ï¼ˆ30%ä½ç½®ï¼‰ åŸºæœ¬ä½¿ç”¨ç¤ºä¾‹ # 1. å±…ä¸­å¸ƒå±€ # \u0026lt;androidx.constraintlayout.widget.ConstraintLayout android:layout_width=\u0026#34;match_parent\u0026#34; android:layout_height=\u0026#34;match_parent\u0026#34;\u0026gt; \u0026lt;TextView android:id=\u0026#34;@+id/centerText\u0026#34; android:layout_width=\u0026#34;wrap_content\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:text=\u0026#34;å±…ä¸­æ–‡æœ¬\u0026#34; android:textSize=\u0026#34;18sp\u0026#34; app:layout_constraintTop_toTopOf=\u0026#34;parent\u0026#34; app:layout_constraintBottom_toBottomOf=\u0026#34;parent\u0026#34; app:layout_constraintLeft_toLeftOf=\u0026#34;parent\u0026#34; app:layout_constraintRight_toRightOf=\u0026#34;parent\u0026#34; /\u0026gt; \u0026lt;/androidx.constraintlayout.widget.ConstraintLayout\u0026gt; 2. ç›¸å¯¹å®šä½ # \u0026lt;androidx.constraintlayout.widget.ConstraintLayout android:layout_width=\u0026#34;match_parent\u0026#34; android:layout_height=\u0026#34;match_parent\u0026#34;\u0026gt; \u0026lt;!-- å‚ç…§æ§ä»¶ --\u0026gt; \u0026lt;TextView android:id=\u0026#34;@+id/referenceText\u0026#34; android:layout_width=\u0026#34;wrap_content\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:text=\u0026#34;å‚ç…§æ–‡æœ¬\u0026#34; android:textSize=\u0026#34;16sp\u0026#34; app:layout_constraintTop_toTopOf=\u0026#34;parent\u0026#34; app:layout_constraintLeft_toLeftOf=\u0026#34;parent\u0026#34; android:layout_marginTop=\u0026#34;32dp\u0026#34; android:layout_marginLeft=\u0026#34;32dp\u0026#34; /\u0026gt; \u0026lt;!-- ç›¸å¯¹å®šä½çš„æ§ä»¶ --\u0026gt; \u0026lt;TextView android:id=\u0026#34;@+id/relativeText\u0026#34; android:layout_width=\u0026#34;wrap_content\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:text=\u0026#34;ç›¸å¯¹å®šä½æ–‡æœ¬\u0026#34; android:textSize=\u0026#34;16sp\u0026#34; app:layout_constraintTop_toBottomOf=\u0026#34;@id/referenceText\u0026#34; app:layout_constraintLeft_toLeftOf=\u0026#34;@id/referenceText\u0026#34; android:layout_marginTop=\u0026#34;16dp\u0026#34; /\u0026gt; \u0026lt;/androidx.constraintlayout.widget.ConstraintLayout\u0026gt; 3. åç§»å¸ƒå±€ # \u0026lt;androidx.constraintlayout.widget.ConstraintLayout android:layout_width=\u0026#34;match_parent\u0026#34; android:layout_height=\u0026#34;match_parent\u0026#34;\u0026gt; \u0026lt;TextView android:id=\u0026#34;@+id/biasText\u0026#34; android:layout_width=\u0026#34;wrap_content\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:text=\u0026#34;åç§»æ–‡æœ¬\u0026#34; android:textSize=\u0026#34;16sp\u0026#34; app:layout_constraintTop_toTopOf=\u0026#34;parent\u0026#34; app:layout_constraintBottom_toBottomOf=\u0026#34;parent\u0026#34; app:layout_constraintLeft_toLeftOf=\u0026#34;parent\u0026#34; app:layout_constraintRight_toRightOf=\u0026#34;parent\u0026#34; app:layout_constraintHorizontal_bias=\u0026#34;0.3\u0026#34; app:layout_constraintVertical_bias=\u0026#34;0.7\u0026#34; /\u0026gt; \u0026lt;/androidx.constraintlayout.widget.ConstraintLayout\u0026gt; Kotlin ä»£ç ç¤ºä¾‹ # åŠ¨æ€åˆ›å»ºçº¦æŸå¸ƒå±€ # class ConstraintLayoutActivity : AppCompatActivity() { private lateinit var constraintLayout: ConstraintLayout override fun onCreate(savedInstanceState: Bundle?) { super.onCreate(savedInstanceState) setContentView(R.layout.activity_constraint_layout) initViews() createDynamicLayout() } private fun initViews() { constraintLayout = findViewById(R.id.constraintLayout) } private fun createDynamicLayout() { // åˆ›å»ºæ ‡é¢˜æ–‡æœ¬ val titleText = TextView(this).apply { id = View.generateViewId() text = \u0026#34;åŠ¨æ€æ ‡é¢˜\u0026#34; textSize = 20f setTextColor(Color.BLACK) layoutParams = ConstraintLayout.LayoutParams( ConstraintLayout.LayoutParams.WRAP_CONTENT, ConstraintLayout.LayoutParams.WRAP_CONTENT ) } // åˆ›å»ºå†…å®¹æ–‡æœ¬ val contentText = TextView(this).apply { id = View.generateViewId() text = \u0026#34;è¿™æ˜¯åŠ¨æ€åˆ›å»ºçš„å†…å®¹æ–‡æœ¬\u0026#34; textSize = 16f setTextColor(Color.GRAY) layoutParams = ConstraintLayout.LayoutParams( ConstraintLayout.LayoutParams.WRAP_CONTENT, ConstraintLayout.LayoutParams.WRAP_CONTENT ) } // åˆ›å»ºæŒ‰é’® val actionButton = Button(this).apply { id = View.generateViewId() text = \u0026#34;æ“ä½œæŒ‰é’®\u0026#34; layoutParams = ConstraintLayout.LayoutParams( ConstraintLayout.LayoutParams.WRAP_CONTENT, ConstraintLayout.LayoutParams.WRAP_CONTENT ) } // æ·»åŠ æ§ä»¶åˆ°å¸ƒå±€ constraintLayout.addView(titleText) constraintLayout.addView(contentText) constraintLayout.addView(actionButton) // è®¾ç½®çº¦æŸ setupConstraints(titleText, contentText, actionButton) } private fun setupConstraints( titleText: TextView, contentText: TextView, actionButton: Button ) { val layoutParams = constraintLayout.layoutParams as ConstraintLayout.LayoutParams // æ ‡é¢˜æ–‡æœ¬çº¦æŸ - é¡¶éƒ¨å±…ä¸­ val titleParams = titleText.layoutParams as ConstraintLayout.LayoutParams titleParams.topToTop = ConstraintLayout.LayoutParams.PARENT_ID titleParams.leftToLeft = ConstraintLayout.LayoutParams.PARENT_ID titleParams.rightToRight = ConstraintLayout.LayoutParams.PARENT_ID titleParams.topMargin = dpToPx(32) // å†…å®¹æ–‡æœ¬çº¦æŸ - åœ¨æ ‡é¢˜ä¸‹æ–¹ val contentParams = contentText.layoutParams as ConstraintLayout.LayoutParams contentParams.topToBottom = titleText.id contentParams.leftToLeft = ConstraintLayout.LayoutParams.PARENT_ID contentParams.rightToRight = ConstraintLayout.LayoutParams.PARENT_ID contentParams.topMargin = dpToPx(16) // æŒ‰é’®çº¦æŸ - åœ¨å†…å®¹ä¸‹æ–¹å±…ä¸­ val buttonParams = actionButton.layoutParams as ConstraintLayout.LayoutParams buttonParams.topToBottom = contentText.id buttonParams.leftToLeft = ConstraintLayout.LayoutParams.PARENT_ID buttonParams.rightToRight = ConstraintLayout.LayoutParams.PARENT_ID buttonParams.topMargin = dpToPx(24) // åº”ç”¨çº¦æŸ titleText.layoutParams = titleParams contentText.layoutParams = contentParams actionButton.layoutParams = buttonParams } private fun dpToPx(dp: Int): Int { return (dp * resources.displayMetrics.density).toInt() } } å¤æ‚çº¦æŸå¸ƒå±€ç¤ºä¾‹ # class ComplexConstraintActivity : AppCompatActivity() { private lateinit var constraintLayout: ConstraintLayout override fun onCreate(savedInstanceState: Bundle?) { super.onCreate(savedInstanceState) setContentView(R.layout.activity_complex_constraint) initViews() createComplexLayout() } private fun initViews() { constraintLayout = findViewById(R.id.constraintLayout) } private fun createComplexLayout() { // åˆ›å»ºå¤´éƒ¨åŒºåŸŸ val headerView = createHeaderView() constraintLayout.addView(headerView) // åˆ›å»ºä¾§è¾¹æ  val sidebarView = createSidebarView() constraintLayout.addView(sidebarView) // åˆ›å»ºä¸»å†…å®¹åŒºåŸŸ val contentView = createContentView() constraintLayout.addView(contentView) // åˆ›å»ºåº•éƒ¨åŒºåŸŸ val footerView = createFooterView() constraintLayout.addView(footerView) // è®¾ç½®å¤æ‚çº¦æŸ setupComplexConstraints(headerView, sidebarView, contentView, footerView) } private fun createHeaderView(): View { return LinearLayout(this).apply { id = View.generateViewId() orientation = LinearLayout.HORIZONTAL gravity = Gravity.CENTER_VERTICAL setBackgroundColor(Color.parseColor(\u0026#34;#2196F3\u0026#34;)) layoutParams = ConstraintLayout.LayoutParams( ConstraintLayout.LayoutParams.MATCH_PARENT, dpToPx(56) ) // æ·»åŠ æ ‡é¢˜ val titleText = TextView(this@ComplexConstraintActivity).apply { text = \u0026#34;åº”ç”¨æ ‡é¢˜\u0026#34; setTextColor(Color.WHITE) textSize = 18f layoutParams = LinearLayout.LayoutParams( LinearLayout.LayoutParams.WRAP_CONTENT, LinearLayout.LayoutParams.WRAP_CONTENT ) } addView(titleText) } } private fun createSidebarView(): View { return LinearLayout(this).apply { id = View.generateViewId() orientation = LinearLayout.VERTICAL setBackgroundColor(Color.parseColor(\u0026#34;#F5F5F5\u0026#34;)) layoutParams = ConstraintLayout.LayoutParams( dpToPx(200), ConstraintLayout.LayoutParams.MATCH_CONSTRAINT ) // æ·»åŠ èœå•é¡¹ val menuItems = listOf(\u0026#34;é¦–é¡µ\u0026#34;, \u0026#34;è®¾ç½®\u0026#34;, \u0026#34;å¸®åŠ©\u0026#34;, \u0026#34;å…³äº\u0026#34;) menuItems.forEach { itemText -\u0026gt; val menuItem = TextView(this@ComplexConstraintActivity).apply { text = itemText textSize = 16f setPadding(dpToPx(16), dpToPx(12), dpToPx(16), dpToPx(12)) setBackgroundColor(Color.TRANSPARENT) layoutParams = LinearLayout.LayoutParams( LinearLayout.LayoutParams.MATCH_PARENT, LinearLayout.LayoutParams.WRAP_CONTENT ) } addView(menuItem) } } } private fun createContentView(): View { return ScrollView(this).apply { id = View.generateViewId() setBackgroundColor(Color.WHITE) layoutParams = ConstraintLayout.LayoutParams( ConstraintLayout.LayoutParams.MATCH_CONSTRAINT, ConstraintLayout.LayoutParams.MATCH_CONSTRAINT ) // æ·»åŠ å†…å®¹ val contentText = TextView(this@ComplexConstraintActivity).apply { text = \u0026#34;è¿™é‡Œæ˜¯ä¸»è¦å†…å®¹åŒºåŸŸ\\n\\n\u0026#34; + \u0026#34;ConstraintLayout æä¾›äº†å¼ºå¤§çš„çº¦æŸåŠŸèƒ½ï¼Œ\\n\u0026#34; + \u0026#34;å¯ä»¥åˆ›å»ºå¤æ‚çš„å¸ƒå±€ç»“æ„ã€‚\\n\\n\u0026#34; + \u0026#34;é€šè¿‡çº¦æŸå…³ç³»ï¼Œæˆ‘ä»¬å¯ä»¥ç²¾ç¡®æ§åˆ¶\\n\u0026#34; + \u0026#34;æ¯ä¸ªæ§ä»¶çš„ä½ç½®å’Œå¤§å°ã€‚\u0026#34; textSize = 16f setPadding(dpToPx(16), dpToPx(16), dpToPx(16), dpToPx(16)) layoutParams = LinearLayout.LayoutParams( LinearLayout.LayoutParams.MATCH_PARENT, LinearLayout.LayoutParams.WRAP_CONTENT ) } addView(contentText) } } private fun createFooterView(): View { return LinearLayout(this).apply { id = View.generateViewId() orientation = LinearLayout.HORIZONTAL gravity = Gravity.CENTER setBackgroundColor(Color.parseColor(\u0026#34;#E0E0E0\u0026#34;)) layoutParams = ConstraintLayout.LayoutParams( ConstraintLayout.LayoutParams.MATCH_PARENT, dpToPx(48) ) val footerText = TextView(this@ComplexConstraintActivity).apply { text = \u0026#34;Â© 2024 åº”ç”¨åç§°\u0026#34; textSize = 14f setTextColor(Color.GRAY) layoutParams = LinearLayout.LayoutParams( LinearLayout.LayoutParams.WRAP_CONTENT, LinearLayout.LayoutParams.WRAP_CONTENT ) } addView(footerText) } } private fun setupComplexConstraints( headerView: View, sidebarView: View, contentView: View, footerView: View ) { // å¤´éƒ¨çº¦æŸ val headerParams = headerView.layoutParams as ConstraintLayout.LayoutParams headerParams.topToTop = ConstraintLayout.LayoutParams.PARENT_ID headerParams.leftToLeft = ConstraintLayout.LayoutParams.PARENT_ID headerParams.rightToRight = ConstraintLayout.LayoutParams.PARENT_ID // ä¾§è¾¹æ çº¦æŸ val sidebarParams = sidebarView.layoutParams as ConstraintLayout.LayoutParams sidebarParams.topToBottom = headerView.id sidebarParams.leftToLeft = ConstraintLayout.LayoutParams.PARENT_ID sidebarParams.bottomToTop = footerView.id // ä¸»å†…å®¹çº¦æŸ val contentParams = contentView.layoutParams as ConstraintLayout.LayoutParams contentParams.topToBottom = headerView.id contentParams.leftToRight = sidebarView.id contentParams.rightToRight = ConstraintLayout.LayoutParams.PARENT_ID contentParams.bottomToTop = footerView.id // åº•éƒ¨çº¦æŸ val footerParams = footerView.layoutParams as ConstraintLayout.LayoutParams footerParams.bottomToBottom = ConstraintLayout.LayoutParams.PARENT_ID footerParams.leftToLeft = ConstraintLayout.LayoutParams.PARENT_ID footerParams.rightToRight = ConstraintLayout.LayoutParams.PARENT_ID // åº”ç”¨çº¦æŸ headerView.layoutParams = headerParams sidebarView.layoutParams = sidebarParams contentView.layoutParams = contentParams footerView.layoutParams = footerParams } private fun dpToPx(dp: Int): Int { return (dp * resources.displayMetrics.density).toInt() } } å®é™…åº”ç”¨åœºæ™¯ # 1. ç™»å½•è¡¨å• # \u0026lt;androidx.constraintlayout.widget.ConstraintLayout android:layout_width=\u0026#34;match_parent\u0026#34; android:layout_height=\u0026#34;match_parent\u0026#34; android:padding=\u0026#34;32dp\u0026#34;\u0026gt; \u0026lt;!-- æ ‡é¢˜ --\u0026gt; \u0026lt;TextView android:id=\u0026#34;@+id/titleText\u0026#34; android:layout_width=\u0026#34;wrap_content\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:text=\u0026#34;ç”¨æˆ·ç™»å½•\u0026#34; android:textSize=\u0026#34;24sp\u0026#34; android:textStyle=\u0026#34;bold\u0026#34; app:layout_constraintTop_toTopOf=\u0026#34;parent\u0026#34; app:layout_constraintLeft_toLeftOf=\u0026#34;parent\u0026#34; app:layout_constraintRight_toRightOf=\u0026#34;parent\u0026#34; android:layout_marginTop=\u0026#34;64dp\u0026#34; /\u0026gt; \u0026lt;!-- ç”¨æˆ·åè¾“å…¥æ¡† --\u0026gt; \u0026lt;EditText android:id=\u0026#34;@+id/usernameEditText\u0026#34; android:layout_width=\u0026#34;0dp\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:hint=\u0026#34;è¯·è¾“å…¥ç”¨æˆ·å\u0026#34; android:layout_marginTop=\u0026#34;48dp\u0026#34; app:layout_constraintTop_toBottomOf=\u0026#34;@id/titleText\u0026#34; app:layout_constraintLeft_toLeftOf=\u0026#34;parent\u0026#34; app:layout_constraintRight_toRightOf=\u0026#34;parent\u0026#34; /\u0026gt; \u0026lt;!-- å¯†ç è¾“å…¥æ¡† --\u0026gt; \u0026lt;EditText android:id=\u0026#34;@+id/passwordEditText\u0026#34; android:layout_width=\u0026#34;0dp\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:hint=\u0026#34;è¯·è¾“å…¥å¯†ç \u0026#34; android:inputType=\u0026#34;textPassword\u0026#34; android:layout_marginTop=\u0026#34;16dp\u0026#34; app:layout_constraintTop_toBottomOf=\u0026#34;@id/usernameEditText\u0026#34; app:layout_constraintLeft_toLeftOf=\u0026#34;parent\u0026#34; app:layout_constraintRight_toRightOf=\u0026#34;parent\u0026#34; /\u0026gt; \u0026lt;!-- ç™»å½•æŒ‰é’® --\u0026gt; \u0026lt;Button android:id=\u0026#34;@+id/loginButton\u0026#34; android:layout_width=\u0026#34;0dp\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:text=\u0026#34;ç™»å½•\u0026#34; android:layout_marginTop=\u0026#34;32dp\u0026#34; app:layout_constraintTop_toBottomOf=\u0026#34;@id/passwordEditText\u0026#34; app:layout_constraintLeft_toLeftOf=\u0026#34;parent\u0026#34; app:layout_constraintRight_toRightOf=\u0026#34;parent\u0026#34; /\u0026gt; \u0026lt;!-- å¿˜è®°å¯†ç é“¾æ¥ --\u0026gt; \u0026lt;TextView android:id=\u0026#34;@+id/forgotPasswordText\u0026#34; android:layout_width=\u0026#34;wrap_content\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:text=\u0026#34;å¿˜è®°å¯†ç ï¼Ÿ\u0026#34; android:textColor=\u0026#34;@color/primary\u0026#34; android:layout_marginTop=\u0026#34;16dp\u0026#34; app:layout_constraintTop_toBottomOf=\u0026#34;@id/loginButton\u0026#34; app:layout_constraintRight_toRightOf=\u0026#34;parent\u0026#34; /\u0026gt; \u0026lt;/androidx.constraintlayout.widget.ConstraintLayout\u0026gt; 2. å“åº”å¼å¡ç‰‡å¸ƒå±€ # \u0026lt;androidx.constraintlayout.widget.ConstraintLayout android:layout_width=\u0026#34;match_parent\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:layout_margin=\u0026#34;8dp\u0026#34; android:background=\u0026#34;@drawable/card_background\u0026#34; android:elevation=\u0026#34;2dp\u0026#34;\u0026gt; \u0026lt;!-- å¤´åƒ --\u0026gt; \u0026lt;ImageView android:id=\u0026#34;@+id/avatarImage\u0026#34; android:layout_width=\u0026#34;60dp\u0026#34; android:layout_height=\u0026#34;60dp\u0026#34; android:src=\u0026#34;@drawable/default_avatar\u0026#34; android:scaleType=\u0026#34;centerCrop\u0026#34; android:layout_margin=\u0026#34;16dp\u0026#34; app:layout_constraintTop_toTopOf=\u0026#34;parent\u0026#34; app:layout_constraintLeft_toLeftOf=\u0026#34;parent\u0026#34; /\u0026gt; \u0026lt;!-- ç”¨æˆ·å --\u0026gt; \u0026lt;TextView android:id=\u0026#34;@+id/usernameText\u0026#34; android:layout_width=\u0026#34;0dp\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:text=\u0026#34;ç”¨æˆ·å\u0026#34; android:textSize=\u0026#34;16sp\u0026#34; android:textStyle=\u0026#34;bold\u0026#34; android:layout_marginStart=\u0026#34;16dp\u0026#34; android:layout_marginEnd=\u0026#34;16dp\u0026#34; app:layout_constraintTop_toTopOf=\u0026#34;@id/avatarImage\u0026#34; app:layout_constraintLeft_toRightOf=\u0026#34;@id/avatarImage\u0026#34; app:layout_constraintRight_toRightOf=\u0026#34;parent\u0026#34; /\u0026gt; \u0026lt;!-- æ—¶é—´ --\u0026gt; \u0026lt;TextView android:id=\u0026#34;@+id/timeText\u0026#34; android:layout_width=\u0026#34;wrap_content\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:text=\u0026#34;2å°æ—¶å‰\u0026#34; android:textSize=\u0026#34;12sp\u0026#34; android:textColor=\u0026#34;#666666\u0026#34; android:layout_marginTop=\u0026#34;4dp\u0026#34; app:layout_constraintTop_toBottomOf=\u0026#34;@id/usernameText\u0026#34; app:layout_constraintLeft_toLeftOf=\u0026#34;@id/usernameText\u0026#34; /\u0026gt; \u0026lt;!-- å†…å®¹ --\u0026gt; \u0026lt;TextView android:id=\u0026#34;@+id/contentText\u0026#34; android:layout_width=\u0026#34;0dp\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:text=\u0026#34;è¿™æ˜¯å¡ç‰‡çš„å†…å®¹æ–‡æœ¬...\u0026#34; android:textSize=\u0026#34;14sp\u0026#34; android:layout_marginTop=\u0026#34;8dp\u0026#34; android:layout_marginStart=\u0026#34;16dp\u0026#34; android:layout_marginEnd=\u0026#34;16dp\u0026#34; android:layout_marginBottom=\u0026#34;16dp\u0026#34; app:layout_constraintTop_toBottomOf=\u0026#34;@id/avatarImage\u0026#34; app:layout_constraintLeft_toLeftOf=\u0026#34;parent\u0026#34; app:layout_constraintRight_toRightOf=\u0026#34;parent\u0026#34; /\u0026gt; \u0026lt;/androidx.constraintlayout.widget.ConstraintLayout\u0026gt; æ€§èƒ½ä¼˜åŒ–å»ºè®® # 1. å‡å°‘åµŒå¥—å±‚çº§ # \u0026lt;!-- ä¸å¥½çš„åšæ³•ï¼šå¤šå±‚åµŒå¥— --\u0026gt; \u0026lt;LinearLayout\u0026gt; \u0026lt;LinearLayout\u0026gt; \u0026lt;LinearLayout\u0026gt; \u0026lt;TextView /\u0026gt; \u0026lt;/LinearLayout\u0026gt; \u0026lt;/LinearLayout\u0026gt; \u0026lt;/LinearLayout\u0026gt; \u0026lt;!-- å¥½çš„åšæ³•ï¼šä½¿ç”¨ ConstraintLayout --\u0026gt; \u0026lt;androidx.constraintlayout.widget.ConstraintLayout\u0026gt; \u0026lt;TextView app:layout_constraintTop_toTopOf=\u0026#34;parent\u0026#34; app:layout_constraintLeft_toLeftOf=\u0026#34;parent\u0026#34; /\u0026gt; \u0026lt;/androidx.constraintlayout.widget.ConstraintLayout\u0026gt; 2. ä½¿ç”¨ Guideline # \u0026lt;androidx.constraintlayout.widget.ConstraintLayout\u0026gt; \u0026lt;!-- å‚ç›´å‚è€ƒçº¿ --\u0026gt; \u0026lt;androidx.constraintlayout.widget.Guideline android:id=\u0026#34;@+id/verticalGuideline\u0026#34; android:layout_width=\u0026#34;wrap_content\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:orientation=\u0026#34;vertical\u0026#34; app:layout_constraintGuide_percent=\u0026#34;0.5\u0026#34; /\u0026gt; \u0026lt;!-- æ°´å¹³å‚è€ƒçº¿ --\u0026gt; \u0026lt;androidx.constraintlayout.widget.Guideline android:id=\u0026#34;@+id/horizontalGuideline\u0026#34; android:layout_width=\u0026#34;wrap_content\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:orientation=\u0026#34;horizontal\u0026#34; app:layout_constraintGuide_percent=\u0026#34;0.3\u0026#34; /\u0026gt; \u0026lt;!-- ä½¿ç”¨å‚è€ƒçº¿å®šä½ --\u0026gt; \u0026lt;TextView app:layout_constraintTop_toTopOf=\u0026#34;@id/horizontalGuideline\u0026#34; app:layout_constraintLeft_toLeftOf=\u0026#34;@id/verticalGuideline\u0026#34; /\u0026gt; \u0026lt;/androidx.constraintlayout.widget.ConstraintLayout\u0026gt; 3. ä½¿ç”¨ Barrier # \u0026lt;androidx.constraintlayout.widget.ConstraintLayout\u0026gt; \u0026lt;!-- åˆ›å»ºå±éšœ --\u0026gt; \u0026lt;androidx.constraintlayout.widget.Barrier android:id=\u0026#34;@+id/textBarrier\u0026#34; android:layout_width=\u0026#34;wrap_content\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; app:barrierDirection=\u0026#34;end\u0026#34; app:constraint_referenced_ids=\u0026#34;text1,text2,text3\u0026#34; /\u0026gt; \u0026lt;!-- ä½¿ç”¨å±éšœå®šä½ --\u0026gt; \u0026lt;TextView android:id=\u0026#34;@+id/rightText\u0026#34; app:layout_constraintLeft_toRightOf=\u0026#34;@id/textBarrier\u0026#34; /\u0026gt; \u0026lt;/androidx.constraintlayout.widget.ConstraintLayout\u0026gt; ğŸ“‹ æ€»ç»“ # ConstraintLayout æ˜¯ Android å¼€å‘ä¸­å¼ºå¤§çš„å¸ƒå±€å®¹å™¨ï¼š\nçº¦æŸå…³ç³»ï¼šé€šè¿‡çº¦æŸå±æ€§ç²¾ç¡®å®šä½æ§ä»¶ æ‰å¹³åŒ–ç»“æ„ï¼šå‡å°‘å¸ƒå±€åµŒå¥—ï¼Œæå‡æ€§èƒ½ å“åº”å¼è®¾è®¡ï¼šè‡ªåŠ¨é€‚é…ä¸åŒå±å¹•å°ºå¯¸ å¯è§†åŒ–ç¼–è¾‘ï¼šAndroid Studio æä¾›å¯è§†åŒ–ç¼–è¾‘å™¨ é«˜çº§åŠŸèƒ½ï¼šæ”¯æŒ Guidelineã€Barrier ç­‰é«˜çº§ç‰¹æ€§ æŒæ¡ ConstraintLayout çš„ä½¿ç”¨æ–¹æ³•å¯¹äºåˆ›å»ºå¤æ‚ä¸”é«˜æ•ˆçš„å¸ƒå±€è‡³å…³é‡è¦ã€‚\n","date":"24 October 2025","externalUrl":null,"permalink":"/posts/android/09---constraintlayout%E7%BA%A6%E6%9D%9F%E5%B8%83%E5%B1%80/","section":"Posts","summary":"è¯¦ç»†ä»‹ç»Android ConstraintLayoutçº¦æŸå¸ƒå±€çš„ä½¿ç”¨æ–¹æ³•ã€çº¦æŸå±æ€§å’Œå®é™…åº”ç”¨åœºæ™¯","title":"ConstraintLayout çº¦æŸå¸ƒå±€","type":"posts"},{"content":" Fragment ä½¿ç”¨å…¨è§£æ # Fragment æ˜¯ Android 3.0+ å¼•å…¥çš„ç»„ä»¶ï¼Œç”¨äºæ„å»ºçµæ´»çš„ç”¨æˆ·ç•Œé¢ï¼Œç‰¹åˆ«é€‚åˆå¹³æ¿ç­‰å¤§å±å¹•è®¾å¤‡ã€‚\nFragment åŸºæœ¬æ¦‚å¿µ # ä»€ä¹ˆæ˜¯ Fragment # Fragment æ˜¯ Activity çš„ä¸€ä¸ªç»„æˆå…ƒç´ ï¼Œå¯ä»¥ç†è§£ä¸º\u0026quot;ç‰‡æ®µ\u0026quot;ã€‚ä¸€ä¸ª Activity å¯ä»¥åŒ…å«å¤šä¸ª Fragmentï¼Œæ¯ä¸ª Fragment éƒ½æœ‰è‡ªå·±çš„ç”Ÿå‘½å‘¨æœŸå’Œç”¨æˆ·ç•Œé¢ã€‚\nFragment vs Activity # ç‰¹æ€§ Fragment Activity ç”Ÿå‘½å‘¨æœŸ ä¾èµ– Activity ç‹¬ç«‹ å­˜åœ¨æ€§ ä¸èƒ½è„±ç¦» Activity å¯ä»¥ç‹¬ç«‹å­˜åœ¨ ç”¨é€” Activity çš„ç»„æˆå…ƒç´  å±å¹•çš„ä¸»ä½“ ç‰ˆæœ¬ Android 3.0+ Android 1.0+ æ•°é‡ ä¸€ä¸ª Activity å¯æœ‰å¤šä¸ª ä¸€ä¸ªåº”ç”¨å¯æœ‰å¤šä¸ª Fragment ç”Ÿå‘½å‘¨æœŸ # ç”Ÿå‘½å‘¨æœŸæ–¹æ³•è¯¦è§£ # class MyFragment : Fragment() { override fun onAttach(context: Context) { super.onAttach(context) Log.d(\u0026#34;Fragment\u0026#34;, \u0026#34;onAttach\u0026#34;) // Fragment ä¸ Activity å…³è” } override fun onCreate(savedInstanceState: Bundle?) { super.onCreate(savedInstanceState) Log.d(\u0026#34;Fragment\u0026#34;, \u0026#34;onCreate\u0026#34;) // åˆå§‹åŒ– Fragment } override fun onCreateView( inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle? ): View? { Log.d(\u0026#34;Fragment\u0026#34;, \u0026#34;onCreateView\u0026#34;) // åˆ›å»º Fragment çš„è§†å›¾ return inflater.inflate(R.layout.fragment_my, container, false) } override fun onViewCreated(view: View, savedInstanceState: Bundle?) { super.onViewCreated(view, savedInstanceState) Log.d(\u0026#34;Fragment\u0026#34;, \u0026#34;onViewCreated\u0026#34;) // è§†å›¾åˆ›å»ºå®Œæˆåçš„åˆå§‹åŒ– initViews(view) } override fun onActivityCreated(savedInstanceState: Bundle?) { super.onActivityCreated(savedInstanceState) Log.d(\u0026#34;Fragment\u0026#34;, \u0026#34;onActivityCreated\u0026#34;) // Activity çš„ onCreate å®Œæˆåè°ƒç”¨ } override fun onStart() { super.onStart() Log.d(\u0026#34;Fragment\u0026#34;, \u0026#34;onStart\u0026#34;) // Fragment å˜ä¸ºå¯è§ } override fun onResume() { super.onResume() Log.d(\u0026#34;Fragment\u0026#34;, \u0026#34;onResume\u0026#34;) // Fragment è·å¾—ç„¦ç‚¹ } override fun onPause() { super.onPause() Log.d(\u0026#34;Fragment\u0026#34;, \u0026#34;onPause\u0026#34;) // Fragment å¤±å»ç„¦ç‚¹ } override fun onStop() { super.onStop() Log.d(\u0026#34;Fragment\u0026#34;, \u0026#34;onStop\u0026#34;) // Fragment ä¸å¯è§ } override fun onDestroyView() { super.onDestroyView() Log.d(\u0026#34;Fragment\u0026#34;, \u0026#34;onDestroyView\u0026#34;) // é”€æ¯ Fragment çš„è§†å›¾ } override fun onDestroy() { super.onDestroy() Log.d(\u0026#34;Fragment\u0026#34;, \u0026#34;onDestroy\u0026#34;) // é”€æ¯ Fragment } override fun onDetach() { super.onDetach() Log.d(\u0026#34;Fragment\u0026#34;, \u0026#34;onDetach\u0026#34;) // Fragment ä¸ Activity è§£é™¤å…³è” } private fun initViews(view: View) { // åˆå§‹åŒ–è§†å›¾æ§ä»¶ val textView = view.findViewById\u0026lt;TextView\u0026gt;(R.id.textView) val button = view.findViewById\u0026lt;Button\u0026gt;(R.id.button) textView.text = \u0026#34;Fragment å†…å®¹\u0026#34; button.setOnClickListener { Toast.makeText(context, \u0026#34;Fragment æŒ‰é’®è¢«ç‚¹å‡»\u0026#34;, Toast.LENGTH_SHORT).show() } } } ç”Ÿå‘½å‘¨æœŸçŠ¶æ€å›¾ # graph TD A[onAttach] --\u003e B[onCreate] B --\u003e C[onCreateView] C --\u003e D[onViewCreated] D --\u003e E[onActivityCreated] E --\u003e F[onStart] F --\u003e G[onResume] G --\u003e H[onPause] H --\u003e I[onStop] I --\u003e J[onDestroyView] J --\u003e K[onDestroy] K --\u003e L[onDetach] H --\u003e G I --\u003e F Fragment åŠ è½½æ–¹å¼ # 1. é™æ€åŠ è½½ # åœ¨ XML å¸ƒå±€æ–‡ä»¶ä¸­ç›´æ¥å£°æ˜ Fragmentï¼š\n\u0026lt;!-- activity_main.xml --\u0026gt; \u0026lt;LinearLayout android:layout_width=\u0026#34;match_parent\u0026#34; android:layout_height=\u0026#34;match_parent\u0026#34; android:orientation=\u0026#34;vertical\u0026#34;\u0026gt; \u0026lt;TextView android:layout_width=\u0026#34;match_parent\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:text=\u0026#34;Activity å†…å®¹\u0026#34; android:padding=\u0026#34;16dp\u0026#34; /\u0026gt; \u0026lt;fragment android:id=\u0026#34;@+id/myFragment\u0026#34; android:name=\u0026#34;com.example.MyFragment\u0026#34; android:layout_width=\u0026#34;match_parent\u0026#34; android:layout_height=\u0026#34;0dp\u0026#34; android:layout_weight=\u0026#34;1\u0026#34; /\u0026gt; \u0026lt;/LinearLayout\u0026gt; class MainActivity : AppCompatActivity() { private lateinit var myFragment: MyFragment override fun onCreate(savedInstanceState: Bundle?) { super.onCreate(savedInstanceState) setContentView(R.layout.activity_main) // è·å–é™æ€åŠ è½½çš„ Fragment myFragment = supportFragmentManager.findFragmentById(R.id.myFragment) as MyFragment } } 2. åŠ¨æ€åŠ è½½ # é€šè¿‡ä»£ç åŠ¨æ€æ·»åŠ  Fragmentï¼š\nclass MainActivity : AppCompatActivity() { private lateinit var fragmentContainer: FrameLayout override fun onCreate(savedInstanceState: Bundle?) { super.onCreate(savedInstanceState) setContentView(R.layout.activity_main) initViews() loadFragment() } private fun initViews() { fragmentContainer = findViewById(R.id.fragmentContainer) } private fun loadFragment() { val fragment = MyFragment() supportFragmentManager.beginTransaction() .add(R.id.fragmentContainer, fragment) .commit() } } 3. åŠ¨æ€åˆ‡æ¢ Fragment # class MainActivity : AppCompatActivity() { private lateinit var fragmentContainer: FrameLayout private lateinit var homeButton: Button private lateinit var profileButton: Button private var currentFragment: Fragment? = null override fun onCreate(savedInstanceState: Bundle?) { super.onCreate(savedInstanceState) setContentView(R.layout.activity_main) initViews() setupClickListeners() // é»˜è®¤æ˜¾ç¤ºé¦–é¡µ Fragment showFragment(HomeFragment()) } private fun initViews() { fragmentContainer = findViewById(R.id.fragmentContainer) homeButton = findViewById(R.id.homeButton) profileButton = findViewById(R.id.profileButton) } private fun setupClickListeners() { homeButton.setOnClickListener { showFragment(HomeFragment()) } profileButton.setOnClickListener { showFragment(ProfileFragment()) } } private fun showFragment(fragment: Fragment) { if (currentFragment != fragment) { supportFragmentManager.beginTransaction() .replace(R.id.fragmentContainer, fragment) .commit() currentFragment = fragment } } } Fragment æ•°æ®ä¼ é€’ # 1. Activity â†’ Fragment ä¼ å€¼ # ä½¿ç”¨ setArguments # class MyFragment : Fragment() { companion object { private const val ARG_TITLE = \u0026#34;title\u0026#34; private const val ARG_CONTENT = \u0026#34;content\u0026#34; fun newInstance(title: String, content: String): MyFragment { val fragment = MyFragment() val args = Bundle().apply { putString(ARG_TITLE, title) putString(ARG_CONTENT, content) } fragment.arguments = args return fragment } } private var title: String? = null private var content: String? = null override fun onCreate(savedInstanceState: Bundle?) { super.onCreate(savedInstanceState) arguments?.let { title = it.getString(ARG_TITLE) content = it.getString(ARG_CONTENT) } } override fun onCreateView( inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle? ): View? { return inflater.inflate(R.layout.fragment_my, container, false) } override fun onViewCreated(view: View, savedInstanceState: Bundle?) { super.onViewCreated(view, savedInstanceState) view.findViewById\u0026lt;TextView\u0026gt;(R.id.titleText).text = title view.findViewById\u0026lt;TextView\u0026gt;(R.id.contentText).text = content } } // Activity ä¸­ä½¿ç”¨ class MainActivity : AppCompatActivity() { override fun onCreate(savedInstanceState: Bundle?) { super.onCreate(savedInstanceState) setContentView(R.layout.activity_main) val fragment = MyFragment.newInstance(\u0026#34;æ ‡é¢˜\u0026#34;, \u0026#34;å†…å®¹\u0026#34;) supportFragmentManager.beginTransaction() .add(R.id.fragmentContainer, fragment) .commit() } } ç›´æ¥è°ƒç”¨æ–¹æ³• # class MyFragment : Fragment() { private lateinit var textView: TextView override fun onCreateView( inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle? ): View? { return inflater.inflate(R.layout.fragment_my, container, false) } override fun onViewCreated(view: View, savedInstanceState: Bundle?) { super.onViewCreated(view, savedInstanceState) textView = view.findViewById(R.id.textView) } fun updateContent(newContent: String) { textView.text = newContent } } // Activity ä¸­ä½¿ç”¨ class MainActivity : AppCompatActivity() { private lateinit var myFragment: MyFragment override fun onCreate(savedInstanceState: Bundle?) { super.onCreate(savedInstanceState) setContentView(R.layout.activity_main) myFragment = MyFragment() supportFragmentManager.beginTransaction() .add(R.id.fragmentContainer, myFragment) .commit() // å»¶è¿Ÿè°ƒç”¨ï¼Œç¡®ä¿ Fragment å·²åˆ›å»º Handler(Looper.getMainLooper()).postDelayed({ myFragment.updateContent(\u0026#34;æ–°çš„å†…å®¹\u0026#34;) }, 100) } } 2. Fragment â†’ Activity ä¼ å€¼ # ä½¿ç”¨å›è°ƒæ¥å£ # class MyFragment : Fragment() { // å®šä¹‰å›è°ƒæ¥å£ interface OnFragmentInteractionListener { fun onButtonClicked(message: String) } private var listener: OnFragmentInteractionListener? = null override fun onAttach(context: Context) { super.onAttach(context) listener = context as? OnFragmentInteractionListener } override fun onCreateView( inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle? ): View? { return inflater.inflate(R.layout.fragment_my, container, false) } override fun onViewCreated(view: View, savedInstanceState: Bundle?) { super.onViewCreated(view, savedInstanceState) view.findViewById\u0026lt;Button\u0026gt;(R.id.button).setOnClickListener { listener?.onButtonClicked(\u0026#34;æ¥è‡ª Fragment çš„æ¶ˆæ¯\u0026#34;) } } override fun onDetach() { super.onDetach() listener = null } } // Activity ä¸­å®ç°æ¥å£ class MainActivity : AppCompatActivity(), MyFragment.OnFragmentInteractionListener { override fun onCreate(savedInstanceState: Bundle?) { super.onCreate(savedInstanceState) setContentView(R.layout.activity_main) val fragment = MyFragment() supportFragmentManager.beginTransaction() .add(R.id.fragmentContainer, fragment) .commit() } override fun onButtonClicked(message: String) { Toast.makeText(this, message, Toast.LENGTH_SHORT).show() } } ä½¿ç”¨ EventBus # // æ·»åŠ ä¾èµ–ï¼šimplementation \u0026#39;org.greenrobot:eventbus:3.3.1\u0026#39; // å®šä¹‰äº‹ä»¶ç±» data class FragmentMessageEvent(val message: String) class MyFragment : Fragment() { override fun onCreateView( inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle? ): View? { return inflater.inflate(R.layout.fragment_my, container, false) } override fun onViewCreated(view: View, savedInstanceState: Bundle?) { super.onViewCreated(view, savedInstanceState) view.findViewById\u0026lt;Button\u0026gt;(R.id.button).setOnClickListener { // å‘é€äº‹ä»¶ EventBus.getDefault().post(FragmentMessageEvent(\u0026#34;æ¥è‡ª Fragment çš„æ¶ˆæ¯\u0026#34;)) } } } // Activity ä¸­æ¥æ”¶äº‹ä»¶ class MainActivity : AppCompatActivity() { override fun onCreate(savedInstanceState: Bundle?) { super.onCreate(savedInstanceState) setContentView(R.layout.activity_main) val fragment = MyFragment() supportFragmentManager.beginTransaction() .add(R.id.fragmentContainer, fragment) .commit() } override fun onStart() { super.onStart() EventBus.getDefault().register(this) } override fun onStop() { super.onStop() EventBus.getDefault().unregister(this) } @Subscribe(threadMode = ThreadMode.MAIN) fun onMessageEvent(event: FragmentMessageEvent) { Toast.makeText(this, event.message, Toast.LENGTH_SHORT).show() } } Fragment æœ€ä½³å®è·µ # 1. Fragment çŠ¶æ€ä¿å­˜ # class MyFragment : Fragment() { private lateinit var editText: EditText private var userInput: String = \u0026#34;\u0026#34; override fun onCreate(savedInstanceState: Bundle?) { super.onCreate(savedInstanceState) // æ¢å¤ä¿å­˜çš„çŠ¶æ€ savedInstanceState?.let { userInput = it.getString(\u0026#34;userInput\u0026#34;, \u0026#34;\u0026#34;) } } override fun onCreateView( inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle? ): View? { return inflater.inflate(R.layout.fragment_my, container, false) } override fun onViewCreated(view: View, savedInstanceState: Bundle?) { super.onViewCreated(view, savedInstanceState) editText = view.findViewById(R.id.editText) editText.setText(userInput) editText.addTextChangedListener(object : TextWatcher { override fun beforeTextChanged(s: CharSequence?, start: Int, count: Int, after: Int) {} override fun onTextChanged(s: CharSequence?, start: Int, before: Int, count: Int) { userInput = s.toString() } override fun afterTextChanged(s: Editable?) {} }) } override fun onSaveInstanceState(outState: Bundle) { super.onSaveInstanceState(outState) outState.putString(\u0026#34;userInput\u0026#34;, userInput) } } 2. Fragment é€šä¿¡ # class FragmentCommunicationActivity : AppCompatActivity() { private lateinit var fragmentA: FragmentA private lateinit var fragmentB: FragmentB override fun onCreate(savedInstanceState: Bundle?) { super.onCreate(savedInstanceState) setContentView(R.layout.activity_fragment_communication) initFragments() } private fun initFragments() { fragmentA = FragmentA() fragmentB = FragmentB() supportFragmentManager.beginTransaction() .add(R.id.fragmentAContainer, fragmentA) .add(R.id.fragmentBContainer, fragmentB) .commit() } // Fragment A è°ƒç”¨æ­¤æ–¹æ³• fun sendMessageToFragmentB(message: String) { fragmentB.receiveMessage(message) } // Fragment B è°ƒç”¨æ­¤æ–¹æ³• fun sendMessageToFragmentA(message: String) { fragmentA.receiveMessage(message) } } class FragmentA : Fragment() { private lateinit var messageText: TextView private lateinit var sendButton: Button override fun onCreateView( inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle? ): View? { return inflater.inflate(R.layout.fragment_a, container, false) } override fun onViewCreated(view: View, savedInstanceState: Bundle?) { super.onViewCreated(view, savedInstanceState) messageText = view.findViewById(R.id.messageText) sendButton = view.findViewById(R.id.sendButton) sendButton.setOnClickListener { (activity as? FragmentCommunicationActivity)?.sendMessageToFragmentB(\u0026#34;æ¥è‡ª Fragment A\u0026#34;) } } fun receiveMessage(message: String) { messageText.text = \u0026#34;æ”¶åˆ°: $message\u0026#34; } } class FragmentB : Fragment() { private lateinit var messageText: TextView private lateinit var sendButton: Button override fun onCreateView( inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle? ): View? { return inflater.inflate(R.layout.fragment_b, container, false) } override fun onViewCreated(view: View, savedInstanceState: Bundle?) { super.onViewCreated(view, savedInstanceState) messageText = view.findViewById(R.id.messageText) sendButton = view.findViewById(R.id.sendButton) sendButton.setOnClickListener { (activity as? FragmentCommunicationActivity)?.sendMessageToFragmentA(\u0026#34;æ¥è‡ª Fragment B\u0026#34;) } } fun receiveMessage(message: String) { messageText.text = \u0026#34;æ”¶åˆ°: $message\u0026#34; } } 3. ViewPager2 + Fragment # class ViewPagerFragmentActivity : AppCompatActivity() { private lateinit var viewPager2: ViewPager2 override fun onCreate(savedInstanceState: Bundle?) { super.onCreate(savedInstanceState) setContentView(R.layout.activity_view_pager_fragment) initViews() setupViewPager() } private fun initViews() { viewPager2 = findViewById(R.id.viewPager2) } private fun setupViewPager() { val fragments = listOf( HomeFragment(), ProfileFragment(), SettingsFragment() ) val adapter = FragmentAdapter(this, fragments) viewPager2.adapter = adapter } } class FragmentAdapter( fragmentActivity: FragmentActivity, private val fragments: List\u0026lt;Fragment\u0026gt; ) : FragmentStateAdapter(fragmentActivity) { override fun getItemCount(): Int = fragments.size override fun createFragment(position: Int): Fragment = fragments[position] } class HomeFragment : Fragment() { override fun onCreateView( inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle? ): View? { return inflater.inflate(R.layout.fragment_home, container, false) } override fun onViewCreated(view: View, savedInstanceState: Bundle?) { super.onViewCreated(view, savedInstanceState) view.findViewById\u0026lt;TextView\u0026gt;(R.id.titleText).text = \u0026#34;é¦–é¡µ\u0026#34; } } class ProfileFragment : Fragment() { override fun onCreateView( inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle? ): View? { return inflater.inflate(R.layout.fragment_profile, container, false) } override fun onViewCreated(view: View, savedInstanceState: Bundle?) { super.onViewCreated(view, savedInstanceState) view.findViewById\u0026lt;TextView\u0026gt;(R.id.titleText).text = \u0026#34;ä¸ªäººèµ„æ–™\u0026#34; } } class SettingsFragment : Fragment() { override fun onCreateView( inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle? ): View? { return inflater.inflate(R.layout.fragment_settings, container, false) } override fun onViewCreated(view: View, savedInstanceState: Bundle?) { super.onViewCreated(view, savedInstanceState) view.findViewById\u0026lt;TextView\u0026gt;(R.id.titleText).text = \u0026#34;è®¾ç½®\u0026#34; } } ğŸ“‹ æ€»ç»“ # Fragment æ˜¯ Android å¼€å‘ä¸­çš„é‡è¦ç»„ä»¶ï¼š\nç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼šç†è§£ Fragment çš„å®Œæ•´ç”Ÿå‘½å‘¨æœŸ åŠ è½½æ–¹å¼ï¼šé™æ€åŠ è½½å’ŒåŠ¨æ€åŠ è½½ä¸¤ç§æ–¹å¼ æ•°æ®ä¼ é€’ï¼šActivity ä¸ Fragment ä¹‹é—´çš„æ•°æ®ä¼ é€’ é€šä¿¡æœºåˆ¶ï¼šFragment ä¹‹é—´çš„é€šä¿¡æ–¹æ³• æœ€ä½³å®è·µï¼šçŠ¶æ€ä¿å­˜ã€å†…å­˜ç®¡ç†ã€æ€§èƒ½ä¼˜åŒ– æŒæ¡ Fragment çš„ä½¿ç”¨æ–¹æ³•å¯¹äºæ„å»ºçµæ´»çš„ç”¨æˆ·ç•Œé¢è‡³å…³é‡è¦ï¼Œç‰¹åˆ«æ˜¯åœ¨é€‚é…ä¸åŒå±å¹•å°ºå¯¸æ—¶ã€‚\n","date":"24 October 2025","externalUrl":null,"permalink":"/posts/android/16---fragment-%E4%BD%BF%E7%94%A8%E5%85%A8%E8%A7%A3%E6%9E%90/","section":"Posts","summary":"è¯¦ç»†ä»‹ç»Android Fragmentç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸã€åŠ è½½æ–¹å¼ã€æ•°æ®ä¼ é€’å’Œæœ€ä½³å®è·µ","title":"Fragment ä½¿ç”¨å…¨è§£æ","type":"posts"},{"content":" FrameLayout å¸§å¸ƒå±€ # FrameLayout æ˜¯ Android ä¸­æœ€ç®€å•çš„å¸ƒå±€å®¹å™¨ï¼Œæ‰€æœ‰å­æ§ä»¶éƒ½ä»å·¦ä¸Šè§’å¼€å§‹å±‚å æ’åˆ—ï¼Œåæ·»åŠ çš„æ§ä»¶ä¼šè¦†ç›–åœ¨å…ˆæ·»åŠ çš„æ§ä»¶ä¹‹ä¸Šã€‚\nFrameLayout åŸºæœ¬ç‰¹æ€§ # å±‚å æ’åˆ— # FrameLayout ä¸­çš„æ‰€æœ‰å­æ§ä»¶éƒ½ä»å·¦ä¸Šè§’ï¼ˆ0,0ï¼‰å¼€å§‹å®šä½ï¼Œåæ·»åŠ çš„æ§ä»¶ä¼šè¦†ç›–åœ¨å…ˆæ·»åŠ çš„æ§ä»¶ä¹‹ä¸Šã€‚\né‡è¦å±æ€§ # å±æ€§ è¯´æ˜ ç¤ºä¾‹å€¼ android:layout_gravity æ§åˆ¶æ§ä»¶åœ¨å®¹å™¨ä¸­çš„ä½ç½® center, top, bottom android:foreground è®¾ç½®å‰æ™¯å›¾ç‰‡ @drawable/foreground_image android:foregroundGravity å‰æ™¯å›¾ç‰‡çš„é‡åŠ› center, top, bottom åŸºæœ¬ä½¿ç”¨ç¤ºä¾‹ # å±‚å æ•ˆæœç¤ºä¾‹ # \u0026lt;FrameLayout android:layout_width=\u0026#34;match_parent\u0026#34; android:layout_height=\u0026#34;300dp\u0026#34; android:background=\u0026#34;#F5F5F5\u0026#34;\u0026gt; \u0026lt;!-- åº•å±‚ - è“è‰² --\u0026gt; \u0026lt;TextView android:layout_width=\u0026#34;350dp\u0026#34; android:layout_height=\u0026#34;350dp\u0026#34; android:layout_gravity=\u0026#34;center\u0026#34; android:background=\u0026#34;#0000FF\u0026#34; android:text=\u0026#34;åº•å±‚\u0026#34; android:textColor=\u0026#34;#FFFFFF\u0026#34; android:gravity=\u0026#34;center\u0026#34; /\u0026gt; \u0026lt;!-- ç¬¬äºŒå±‚ - ç´«è‰² --\u0026gt; \u0026lt;TextView android:layout_width=\u0026#34;330dp\u0026#34; android:layout_height=\u0026#34;330dp\u0026#34; android:layout_gravity=\u0026#34;center\u0026#34; android:background=\u0026#34;#9932CC\u0026#34; android:text=\u0026#34;ç¬¬äºŒå±‚\u0026#34; android:textColor=\u0026#34;#FFFFFF\u0026#34; android:gravity=\u0026#34;center\u0026#34; /\u0026gt; \u0026lt;!-- ç¬¬ä¸‰å±‚ - ç²‰è‰² --\u0026gt; \u0026lt;TextView android:layout_width=\u0026#34;300dp\u0026#34; android:layout_height=\u0026#34;300dp\u0026#34; android:layout_gravity=\u0026#34;center\u0026#34; android:background=\u0026#34;#FF1493\u0026#34; android:text=\u0026#34;ç¬¬ä¸‰å±‚\u0026#34; android:textColor=\u0026#34;#FFFFFF\u0026#34; android:gravity=\u0026#34;center\u0026#34; /\u0026gt; \u0026lt;!-- é¡¶å±‚ - æµ…ç´«è‰² --\u0026gt; \u0026lt;TextView android:layout_width=\u0026#34;270dp\u0026#34; android:layout_height=\u0026#34;270dp\u0026#34; android:layout_gravity=\u0026#34;center\u0026#34; android:background=\u0026#34;#DA70D6\u0026#34; android:text=\u0026#34;é¡¶å±‚\u0026#34; android:textColor=\u0026#34;#FFFFFF\u0026#34; android:gravity=\u0026#34;center\u0026#34; /\u0026gt; \u0026lt;/FrameLayout\u0026gt; Kotlin ä»£ç ç¤ºä¾‹ # åŠ¨æ€åˆ›å»ºå±‚å æ•ˆæœ # class FrameLayoutActivity : AppCompatActivity() { private lateinit var frameLayout: FrameLayout private lateinit var addLayerButton: Button private lateinit var removeLayerButton: Button private val colors = listOf( \u0026#34;#FF5722\u0026#34;, \u0026#34;#2196F3\u0026#34;, \u0026#34;#4CAF50\u0026#34;, \u0026#34;#FF9800\u0026#34;, \u0026#34;#9C27B0\u0026#34;, \u0026#34;#00BCD4\u0026#34; ) private var layerCount = 0 override fun onCreate(savedInstanceState: Bundle?) { super.onCreate(savedInstanceState) setContentView(R.layout.activity_frame_layout) initViews() setupClickListeners() } private fun initViews() { frameLayout = findViewById(R.id.frameLayout) addLayerButton = findViewById(R.id.addLayerButton) removeLayerButton = findViewById(R.id.removeLayerButton) } private fun setupClickListeners() { addLayerButton.setOnClickListener { addLayer() } removeLayerButton.setOnClickListener { removeLayer() } } private fun addLayer() { if (layerCount \u0026lt; colors.size) { val textView = TextView(this).apply { val size = 350 - (layerCount * 20) layoutParams = FrameLayout.LayoutParams( dpToPx(size), dpToPx(size) ).apply { gravity = Gravity.CENTER } background = ColorDrawable(Color.parseColor(colors[layerCount])) text = \u0026#34;ç¬¬ ${layerCount + 1} å±‚\u0026#34; setTextColor(Color.WHITE) gravity = Gravity.CENTER textSize = 16f } frameLayout.addView(textView) layerCount++ Toast.makeText(this, \u0026#34;æ·»åŠ äº†ç¬¬ $layerCount å±‚\u0026#34;, Toast.LENGTH_SHORT).show() } else { Toast.makeText(this, \u0026#34;å·²è¾¾åˆ°æœ€å¤§å±‚æ•°\u0026#34;, Toast.LENGTH_SHORT).show() } } private fun removeLayer() { if (layerCount \u0026gt; 0) { frameLayout.removeViewAt(frameLayout.childCount - 1) layerCount-- Toast.makeText(this, \u0026#34;ç§»é™¤äº†ç¬¬ ${layerCount + 1} å±‚\u0026#34;, Toast.LENGTH_SHORT).show() } else { Toast.makeText(this, \u0026#34;æ²¡æœ‰å¯ç§»é™¤çš„å±‚\u0026#34;, Toast.LENGTH_SHORT).show() } } private fun dpToPx(dp: Int): Int { return (dp * resources.displayMetrics.density).toInt() } } å›¾ç‰‡å åŠ æ•ˆæœ # class ImageOverlayActivity : AppCompatActivity() { private lateinit var frameLayout: FrameLayout private lateinit var addOverlayButton: Button private lateinit var clearOverlayButton: Button override fun onCreate(savedInstanceState: Bundle?) { super.onCreate(savedInstanceState) setContentView(R.layout.activity_image_overlay) initViews() setupClickListeners() } private fun initViews() { frameLayout = findViewById(R.id.frameLayout) addOverlayButton = findViewById(R.id.addOverlayButton) clearOverlayButton = findViewById(R.id.clearOverlayButton) } private fun setupClickListeners() { addOverlayButton.setOnClickListener { addImageOverlay() } clearOverlayButton.setOnClickListener { clearOverlays() } } private fun addImageOverlay() { val overlayImage = ImageView(this).apply { layoutParams = FrameLayout.LayoutParams( FrameLayout.LayoutParams.MATCH_PARENT, FrameLayout.LayoutParams.MATCH_PARENT ) // è®¾ç½®åŠé€æ˜é®ç½© setBackgroundColor(Color.parseColor(\u0026#34;#80000000\u0026#34;)) // æ·»åŠ ç‚¹å‡»äº‹ä»¶ setOnClickListener { Toast.makeText(this@ImageOverlayActivity, \u0026#34;ç‚¹å‡»äº†é®ç½©å±‚\u0026#34;, Toast.LENGTH_SHORT).show() } } frameLayout.addView(overlayImage) } private fun clearOverlays() { // ç§»é™¤æ‰€æœ‰é®ç½©å±‚ï¼ˆä¿ç•™èƒŒæ™¯å›¾ç‰‡ï¼‰ val childCount = frameLayout.childCount for (i in childCount - 1 downTo 1) { frameLayout.removeViewAt(i) } } } å®é™…åº”ç”¨åœºæ™¯ # 1. å›¾ç‰‡å åŠ æ•ˆæœ # \u0026lt;FrameLayout android:layout_width=\u0026#34;match_parent\u0026#34; android:layout_height=\u0026#34;200dp\u0026#34;\u0026gt; \u0026lt;!-- èƒŒæ™¯å›¾ç‰‡ --\u0026gt; \u0026lt;ImageView android:layout_width=\u0026#34;match_parent\u0026#34; android:layout_height=\u0026#34;match_parent\u0026#34; android:src=\u0026#34;@drawable/background_image\u0026#34; android:scaleType=\u0026#34;centerCrop\u0026#34; /\u0026gt; \u0026lt;!-- åŠé€æ˜é®ç½© --\u0026gt; \u0026lt;View android:layout_width=\u0026#34;match_parent\u0026#34; android:layout_height=\u0026#34;match_parent\u0026#34; android:background=\u0026#34;#80000000\u0026#34; /\u0026gt; \u0026lt;!-- æ–‡å­—å†…å®¹ --\u0026gt; \u0026lt;TextView android:layout_width=\u0026#34;wrap_content\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:layout_gravity=\u0026#34;center\u0026#34; android:text=\u0026#34;å åŠ æ–‡å­—\u0026#34; android:textColor=\u0026#34;#FFFFFF\u0026#34; android:textSize=\u0026#34;18sp\u0026#34; android:textStyle=\u0026#34;bold\u0026#34; /\u0026gt; \u0026lt;/FrameLayout\u0026gt; 2. æµ®åŠ¨æŒ‰é’® # \u0026lt;FrameLayout android:layout_width=\u0026#34;match_parent\u0026#34; android:layout_height=\u0026#34;match_parent\u0026#34;\u0026gt; \u0026lt;!-- ä¸»å†…å®¹ --\u0026gt; \u0026lt;ScrollView android:layout_width=\u0026#34;match_parent\u0026#34; android:layout_height=\u0026#34;match_parent\u0026#34; android:padding=\u0026#34;16dp\u0026#34;\u0026gt; \u0026lt;TextView android:layout_width=\u0026#34;match_parent\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:text=\u0026#34;è¿™é‡Œæ˜¯ä¸»è¦å†…å®¹...\u0026#34; android:textSize=\u0026#34;16sp\u0026#34; android:lineSpacingMultiplier=\u0026#34;1.5\u0026#34; /\u0026gt; \u0026lt;/ScrollView\u0026gt; \u0026lt;!-- æµ®åŠ¨æŒ‰é’® --\u0026gt; \u0026lt;com.google.android.material.floatingactionbutton.FloatingActionButton android:id=\u0026#34;@+id/fab\u0026#34; android:layout_width=\u0026#34;wrap_content\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:layout_gravity=\u0026#34;bottom|end\u0026#34; android:layout_margin=\u0026#34;16dp\u0026#34; android:src=\u0026#34;@drawable/ic_add\u0026#34; app:backgroundTint=\u0026#34;@color/primary\u0026#34; app:tint=\u0026#34;@color/white\u0026#34; /\u0026gt; \u0026lt;/FrameLayout\u0026gt; 3. åŠ è½½é®ç½© # class LoadingOverlayActivity : AppCompatActivity() { private lateinit var frameLayout: FrameLayout private lateinit var loadButton: Button private lateinit var loadingView: View override fun onCreate(savedInstanceState: Bundle?) { super.onCreate(savedInstanceState) setContentView(R.layout.activity_loading_overlay) initViews() setupClickListeners() } private fun initViews() { frameLayout = findViewById(R.id.frameLayout) loadButton = findViewById(R.id.loadButton) // åˆ›å»ºåŠ è½½é®ç½© loadingView = createLoadingOverlay() } private fun setupClickListeners() { loadButton.setOnClickListener { showLoading() } } private fun createLoadingOverlay(): View { return LinearLayout(this).apply { layoutParams = FrameLayout.LayoutParams( FrameLayout.LayoutParams.MATCH_PARENT, FrameLayout.LayoutParams.MATCH_PARENT ) orientation = LinearLayout.VERTICAL gravity = Gravity.CENTER setBackgroundColor(Color.parseColor(\u0026#34;#80000000\u0026#34;)) // æ·»åŠ è¿›åº¦æ¡ val progressBar = ProgressBar(this@LoadingOverlayActivity).apply { layoutParams = LinearLayout.LayoutParams( LinearLayout.LayoutParams.WRAP_CONTENT, LinearLayout.LayoutParams.WRAP_CONTENT ) } addView(progressBar) // æ·»åŠ æ–‡å­— val textView = TextView(this@LoadingOverlayActivity).apply { layoutParams = LinearLayout.LayoutParams( LinearLayout.LayoutParams.WRAP_CONTENT, LinearLayout.LayoutParams.WRAP_CONTENT ).apply { topMargin = dpToPx(16) } text = \u0026#34;æ­£åœ¨åŠ è½½...\u0026#34; setTextColor(Color.WHITE) textSize = 16f } addView(textView) // åˆå§‹çŠ¶æ€éšè— visibility = View.GONE } } private fun showLoading() { frameLayout.addView(loadingView) loadingView.visibility = View.VISIBLE // æ¨¡æ‹ŸåŠ è½½è¿‡ç¨‹ Handler(Looper.getMainLooper()).postDelayed({ hideLoading() }, 3000) } private fun hideLoading() { loadingView.visibility = View.GONE frameLayout.removeView(loadingView) Toast.makeText(this, \u0026#34;åŠ è½½å®Œæˆ\u0026#34;, Toast.LENGTH_SHORT).show() } private fun dpToPx(dp: Int): Int { return (dp * resources.displayMetrics.density).toInt() } } 4. å¡ç‰‡å åŠ æ•ˆæœ # \u0026lt;FrameLayout android:layout_width=\u0026#34;match_parent\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:padding=\u0026#34;16dp\u0026#34;\u0026gt; \u0026lt;!-- å¡ç‰‡èƒŒæ™¯ --\u0026gt; \u0026lt;View android:layout_width=\u0026#34;match_parent\u0026#34; android:layout_height=\u0026#34;200dp\u0026#34; android:layout_marginTop=\u0026#34;8dp\u0026#34; android:background=\u0026#34;@drawable/card_background\u0026#34; android:elevation=\u0026#34;2dp\u0026#34; /\u0026gt; \u0026lt;!-- å¡ç‰‡å†…å®¹ --\u0026gt; \u0026lt;LinearLayout android:layout_width=\u0026#34;match_parent\u0026#34; android:layout_height=\u0026#34;200dp\u0026#34; android:orientation=\u0026#34;vertical\u0026#34; android:padding=\u0026#34;16dp\u0026#34; android:gravity=\u0026#34;center\u0026#34;\u0026gt; \u0026lt;ImageView android:layout_width=\u0026#34;60dp\u0026#34; android:layout_height=\u0026#34;60dp\u0026#34; android:src=\u0026#34;@drawable/ic_card\u0026#34; android:layout_marginBottom=\u0026#34;8dp\u0026#34; /\u0026gt; \u0026lt;TextView android:layout_width=\u0026#34;wrap_content\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:text=\u0026#34;å¡ç‰‡æ ‡é¢˜\u0026#34; android:textSize=\u0026#34;18sp\u0026#34; android:textStyle=\u0026#34;bold\u0026#34; android:layout_marginBottom=\u0026#34;4dp\u0026#34; /\u0026gt; \u0026lt;TextView android:layout_width=\u0026#34;wrap_content\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:text=\u0026#34;å¡ç‰‡æè¿°å†…å®¹\u0026#34; android:textSize=\u0026#34;14sp\u0026#34; android:textColor=\u0026#34;#666666\u0026#34; /\u0026gt; \u0026lt;/LinearLayout\u0026gt; \u0026lt;/FrameLayout\u0026gt; æ€§èƒ½ä¼˜åŒ–å»ºè®® # 1. é¿å…è¿‡åº¦å±‚å  # // ä¸å¥½çš„åšæ³•ï¼šè¿‡å¤šå±‚å  FrameLayout { ImageView { } // ç¬¬1å±‚ View { } // ç¬¬2å±‚ TextView { } // ç¬¬3å±‚ Button { } // ç¬¬4å±‚ ImageView { } // ç¬¬5å±‚ // ... æ›´å¤šå±‚ } // å¥½çš„åšæ³•ï¼šåˆç†ä½¿ç”¨å±‚å  FrameLayout { ImageView { } // èƒŒæ™¯ LinearLayout { // å†…å®¹å®¹å™¨ TextView { } Button { } } } 2. ä½¿ç”¨ ViewStub å»¶è¿ŸåŠ è½½ # \u0026lt;FrameLayout android:layout_width=\u0026#34;match_parent\u0026#34; android:layout_height=\u0026#34;match_parent\u0026#34;\u0026gt; \u0026lt;!-- ä¸»è¦å†…å®¹ --\u0026gt; \u0026lt;TextView android:text=\u0026#34;ä¸»è¦å†…å®¹\u0026#34; /\u0026gt; \u0026lt;!-- å»¶è¿ŸåŠ è½½çš„å†…å®¹ --\u0026gt; \u0026lt;ViewStub android:id=\u0026#34;@+id/viewStub\u0026#34; android:layout_width=\u0026#34;match_parent\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:layout=\u0026#34;@layout/delayed_content\u0026#34; /\u0026gt; \u0026lt;/FrameLayout\u0026gt; 3. åˆç†ä½¿ç”¨å‰æ™¯ # class OptimizedFrameLayout { fun setupForeground(frameLayout: FrameLayout) { // ä½¿ç”¨å‰æ™¯è€Œä¸æ˜¯é¢å¤–çš„View frameLayout.foreground = ContextCompat.getDrawable( frameLayout.context, R.drawable.foreground_overlay ) frameLayout.foregroundGravity = Gravity.CENTER } } å¸¸è§é—®é¢˜è§£å†³ # 1. å­æ§ä»¶é‡å  # \u0026lt;!-- é”™è¯¯ï¼šæ²¡æœ‰è®¾ç½®layout_gravity --\u0026gt; \u0026lt;FrameLayout\u0026gt; \u0026lt;TextView android:text=\u0026#34;æ–‡æœ¬1\u0026#34; /\u0026gt; \u0026lt;TextView android:text=\u0026#34;æ–‡æœ¬2\u0026#34; /\u0026gt; \u0026lt;/FrameLayout\u0026gt; \u0026lt;!-- æ­£ç¡®ï¼šè®¾ç½®ä¸åŒçš„ä½ç½® --\u0026gt; \u0026lt;FrameLayout\u0026gt; \u0026lt;TextView android:layout_gravity=\u0026#34;top|start\u0026#34; android:text=\u0026#34;æ–‡æœ¬1\u0026#34; /\u0026gt; \u0026lt;TextView android:layout_gravity=\u0026#34;bottom|end\u0026#34; android:text=\u0026#34;æ–‡æœ¬2\u0026#34; /\u0026gt; \u0026lt;/FrameLayout\u0026gt; 2. è§¦æ‘¸äº‹ä»¶ç©¿é€ # class TouchEventActivity : AppCompatActivity() { private lateinit var frameLayout: FrameLayout private lateinit var overlayView: View override fun onCreate(savedInstanceState: Bundle?) { super.onCreate(savedInstanceState) setContentView(R.layout.activity_touch_event) initViews() setupTouchEvents() } private fun initViews() { frameLayout = findViewById(R.id.frameLayout) overlayView = findViewById(R.id.overlayView) } private fun setupTouchEvents() { // è®¾ç½®é®ç½©å±‚ä¸æ‹¦æˆªè§¦æ‘¸äº‹ä»¶ overlayView.setOnTouchListener { _, _ -\u0026gt; // è¿”å›falseï¼Œè®©è§¦æ‘¸äº‹ä»¶ç©¿é€åˆ°ä¸‹å±‚ false } } } ğŸ“‹ æ€»ç»“ # FrameLayout æ˜¯ Android å¼€å‘ä¸­ç®€å•è€Œå¼ºå¤§çš„å¸ƒå±€å®¹å™¨ï¼š\nå±‚å ç‰¹æ€§ï¼šæ‰€æœ‰å­æ§ä»¶ä»å·¦ä¸Šè§’å¼€å§‹å±‚å æ’åˆ— çµæ´»å®šä½ï¼šé€šè¿‡ layout_gravity æ§åˆ¶å­æ§ä»¶ä½ç½® å®é™…åº”ç”¨ï¼šå›¾ç‰‡å åŠ ã€æµ®åŠ¨æŒ‰é’®ã€åŠ è½½é®ç½©ç­‰åœºæ™¯ æ€§èƒ½è€ƒè™‘ï¼šé¿å…è¿‡åº¦å±‚å ï¼Œåˆç†ä½¿ç”¨å‰æ™¯ è§¦æ‘¸å¤„ç†ï¼šæ³¨æ„è§¦æ‘¸äº‹ä»¶çš„ä¼ é€’å’Œæ‹¦æˆª æŒæ¡ FrameLayout çš„ä½¿ç”¨æ–¹æ³•å¯¹äºåˆ›å»ºå¤æ‚çš„å±‚å æ•ˆæœå’Œç‰¹æ®Šå¸ƒå±€è‡³å…³é‡è¦ã€‚\n","date":"24 October 2025","externalUrl":null,"permalink":"/posts/android/08---framelayout%E5%B8%A7%E5%B8%83%E5%B1%80/","section":"Posts","summary":"è¯¦ç»†ä»‹ç»Android FrameLayoutå¸§å¸ƒå±€çš„ä½¿ç”¨æ–¹æ³•ã€å±‚å æ•ˆæœå’Œå®é™…åº”ç”¨åœºæ™¯","title":"FrameLayout å¸§å¸ƒå±€","type":"posts"},{"content":" ImageView å›¾ç‰‡æ§ä»¶ # ImageView æ˜¯ Android ä¸­ç”¨äºæ˜¾ç¤ºå›¾ç‰‡çš„æ§ä»¶ï¼Œæ”¯æŒå¤šç§å›¾ç‰‡æ ¼å¼å’Œæ˜¾ç¤ºæ¨¡å¼ã€‚\nImageView åŸºæœ¬å±æ€§ # \u0026lt;ImageView android:id=\u0026#34;@+id/imageView\u0026#34; android:layout_width=\u0026#34;200dp\u0026#34; android:layout_height=\u0026#34;200dp\u0026#34; android:src=\u0026#34;@drawable/sample_image\u0026#34; android:scaleType=\u0026#34;centerCrop\u0026#34; android:background=\u0026#34;@color/image_background\u0026#34; android:padding=\u0026#34;8dp\u0026#34; android:layout_margin=\u0026#34;16dp\u0026#34; /\u0026gt; å›¾ç‰‡èµ„æºç®¡ç† # èµ„æºæ–‡ä»¶å¤¹è¯´æ˜ # æ–‡ä»¶å¤¹ ç”¨é€” æ¨èä½¿ç”¨åœºæ™¯ drawable çŸ¢é‡å›¾ã€å½¢çŠ¶ã€é€‰æ‹©å™¨ å›¾æ ‡ã€èƒŒæ™¯ã€çŠ¶æ€é€‰æ‹©å™¨ drawable-hdpi é«˜å¯†åº¦å±å¹•å›¾ç‰‡ 150dpi å±å¹• drawable-mdpi ä¸­å¯†åº¦å±å¹•å›¾ç‰‡ 160dpi å±å¹• drawable-xhdpi è¶…é«˜å¯†åº¦å±å¹•å›¾ç‰‡ 240dpi å±å¹• drawable-xxhdpi è¶…è¶…é«˜å¯†åº¦å±å¹•å›¾ç‰‡ 320dpi å±å¹• drawable-xxxhdpi è¶…è¶…è¶…é«˜å¯†åº¦å±å¹•å›¾ç‰‡ 480dpi å±å¹• mipmap åº”ç”¨å›¾æ ‡ å¯åŠ¨å›¾æ ‡ åŸºæœ¬ä½¿ç”¨ # \u0026lt;!-- ä½¿ç”¨ drawable èµ„æº --\u0026gt; \u0026lt;ImageView android:id=\u0026#34;@+id/imageView1\u0026#34; android:layout_width=\u0026#34;100dp\u0026#34; android:layout_height=\u0026#34;100dp\u0026#34; android:src=\u0026#34;@drawable/ic_launcher_foreground\u0026#34; /\u0026gt; \u0026lt;!-- ä½¿ç”¨ mipmap èµ„æº --\u0026gt; \u0026lt;ImageView android:id=\u0026#34;@+id/imageView2\u0026#34; android:layout_width=\u0026#34;100dp\u0026#34; android:layout_height=\u0026#34;100dp\u0026#34; android:src=\u0026#34;@mipmap/ic_launcher\u0026#34; /\u0026gt; å›¾ç‰‡æ˜¾ç¤ºæ¨¡å¼ (scaleType) # ImageView æä¾›äº†å¤šç§å›¾ç‰‡ç¼©æ”¾æ¨¡å¼ï¼š\n1. centerCropï¼ˆæ¨èï¼‰ # ä¿æŒå®½é«˜æ¯”ï¼Œè£å‰ªå¤šä½™éƒ¨åˆ†ï¼Œå¡«æ»¡æ•´ä¸ªImageView\n\u0026lt;ImageView android:layout_width=\u0026#34;200dp\u0026#34; android:layout_height=\u0026#34;200dp\u0026#34; android:src=\u0026#34;@drawable/sample_image\u0026#34; android:scaleType=\u0026#34;centerCrop\u0026#34; /\u0026gt; 2. centerInside # ä¿æŒå®½é«˜æ¯”ï¼Œå®Œæ•´æ˜¾ç¤ºå›¾ç‰‡ï¼Œå¯èƒ½æœ‰ç©ºç™½åŒºåŸŸ\n\u0026lt;ImageView android:layout_width=\u0026#34;200dp\u0026#34; android:layout_height=\u0026#34;200dp\u0026#34; android:src=\u0026#34;@drawable/sample_image\u0026#34; android:scaleType=\u0026#34;centerInside\u0026#34; /\u0026gt; 3. fitCenter # ä¿æŒå®½é«˜æ¯”ï¼Œå±…ä¸­æ˜¾ç¤ºï¼Œå¯èƒ½æœ‰ç©ºç™½åŒºåŸŸ\n\u0026lt;ImageView android:layout_width=\u0026#34;200dp\u0026#34; android:layout_height=\u0026#34;200dp\u0026#34; android:src=\u0026#34;@drawable/sample_image\u0026#34; android:scaleType=\u0026#34;fitCenter\u0026#34; /\u0026gt; 4. fitXY # æ‹‰ä¼¸å›¾ç‰‡å¡«æ»¡æ•´ä¸ªImageViewï¼Œå¯èƒ½å˜å½¢\n\u0026lt;ImageView android:layout_width=\u0026#34;200dp\u0026#34; android:layout_height=\u0026#34;200dp\u0026#34; android:src=\u0026#34;@drawable/sample_image\u0026#34; android:scaleType=\u0026#34;fitXY\u0026#34; /\u0026gt; 5. matrix # ä½¿ç”¨çŸ©é˜µå˜æ¢ï¼Œéœ€è¦è‡ªå®šä¹‰\n\u0026lt;ImageView android:layout_width=\u0026#34;200dp\u0026#34; android:layout_height=\u0026#34;200dp\u0026#34; android:src=\u0026#34;@drawable/sample_image\u0026#34; android:scaleType=\u0026#34;matrix\u0026#34; /\u0026gt; Kotlin ä»£ç ç¤ºä¾‹ # åŸºæœ¬ä½¿ç”¨ # class MainActivity : AppCompatActivity() { private lateinit var imageView: ImageView override fun onCreate(savedInstanceState: Bundle?) { super.onCreate(savedInstanceState) setContentView(R.layout.activity_main) initViews() setupImageView() } private fun initViews() { imageView = findViewById(R.id.imageView) } private fun setupImageView() { // è®¾ç½®å›¾ç‰‡èµ„æº imageView.setImageResource(R.drawable.sample_image) // è®¾ç½®ç¼©æ”¾æ¨¡å¼ imageView.scaleType = ImageView.ScaleType.CENTER_CROP // è®¾ç½®ç‚¹å‡»äº‹ä»¶ imageView.setOnClickListener { Toast.makeText(this, \u0026#34;å›¾ç‰‡è¢«ç‚¹å‡»\u0026#34;, Toast.LENGTH_SHORT).show() } // è®¾ç½®é•¿æŒ‰äº‹ä»¶ imageView.setOnLongClickListener { showImageOptions() true } } private fun showImageOptions() { val options = arrayOf(\u0026#34;ä¿å­˜å›¾ç‰‡\u0026#34;, \u0026#34;åˆ†äº«å›¾ç‰‡\u0026#34;, \u0026#34;è®¾ä¸ºå£çº¸\u0026#34;) AlertDialog.Builder(this) .setTitle(\u0026#34;å›¾ç‰‡æ“ä½œ\u0026#34;) .setItems(options) { _, which -\u0026gt; when (which) { 0 -\u0026gt; saveImage() 1 -\u0026gt; shareImage() 2 -\u0026gt; setAsWallpaper() } } .show() } private fun saveImage() { Toast.makeText(this, \u0026#34;å›¾ç‰‡å·²ä¿å­˜\u0026#34;, Toast.LENGTH_SHORT).show() } private fun shareImage() { Toast.makeText(this, \u0026#34;åˆ†äº«å›¾ç‰‡\u0026#34;, Toast.LENGTH_SHORT).show() } private fun setAsWallpaper() { Toast.makeText(this, \u0026#34;è®¾ä¸ºå£çº¸\u0026#34;, Toast.LENGTH_SHORT).show() } } åŠ¨æ€åˆ‡æ¢å›¾ç‰‡ # class ImageGalleryActivity : AppCompatActivity() { private lateinit var imageView: ImageView private lateinit var prevButton: Button private lateinit var nextButton: Button private val imageList = listOf( R.drawable.image1, R.drawable.image2, R.drawable.image3, R.drawable.image4 ) private var currentIndex = 0 override fun onCreate(savedInstanceState: Bundle?) { super.onCreate(savedInstanceState) setContentView(R.layout.activity_image_gallery) initViews() setupImageGallery() } private fun initViews() { imageView = findViewById(R.id.imageView) prevButton = findViewById(R.id.prevButton) nextButton = findViewById(R.id.nextButton) } private fun setupImageGallery() { // æ˜¾ç¤ºç¬¬ä¸€å¼ å›¾ç‰‡ updateImage() // ä¸Šä¸€å¼ æŒ‰é’® prevButton.setOnClickListener { currentIndex = if (currentIndex \u0026gt; 0) currentIndex - 1 else imageList.size - 1 updateImage() } // ä¸‹ä¸€å¼ æŒ‰é’® nextButton.setOnClickListener { currentIndex = if (currentIndex \u0026lt; imageList.size - 1) currentIndex + 1 else 0 updateImage() } // å›¾ç‰‡ç‚¹å‡»åˆ‡æ¢ imageView.setOnClickListener { currentIndex = if (currentIndex \u0026lt; imageList.size - 1) currentIndex + 1 else 0 updateImage() } } private fun updateImage() { imageView.setImageResource(imageList[currentIndex]) // æ·»åŠ åˆ‡æ¢åŠ¨ç”» val fadeIn = AlphaAnimation(0f, 1f) fadeIn.duration = 300 imageView.startAnimation(fadeIn) } } ImageButton å›¾ç‰‡æŒ‰é’® # ImageButton ç»§æ‰¿è‡ª ImageViewï¼Œä¸“é—¨ç”¨äºæ˜¾ç¤ºå›¾ç‰‡æŒ‰é’®ï¼š\n\u0026lt;ImageButton android:id=\u0026#34;@+id/imageButton\u0026#34; android:layout_width=\u0026#34;60dp\u0026#34; android:layout_height=\u0026#34;60dp\u0026#34; android:src=\u0026#34;@drawable/ic_add\u0026#34; android:background=\u0026#34;@drawable/image_button_background\u0026#34; android:scaleType=\u0026#34;centerInside\u0026#34; android:contentDescription=\u0026#34;æ·»åŠ æŒ‰é’®\u0026#34; /\u0026gt; private fun setupImageButton() { imageButton.setOnClickListener { Toast.makeText(this, \u0026#34;å›¾ç‰‡æŒ‰é’®è¢«ç‚¹å‡»\u0026#34;, Toast.LENGTH_SHORT).show() } // è®¾ç½®ä¸åŒçŠ¶æ€çš„å›¾ç‰‡ val stateListDrawable = StateListDrawable() stateListDrawable.addState(intArrayOf(android.R.attr.state_pressed), ContextCompat.getDrawable(this, R.drawable.ic_add_pressed)) stateListDrawable.addState(intArrayOf(), ContextCompat.getDrawable(this, R.drawable.ic_add_normal)) imageButton.background = stateListDrawable } å›¾ç‰‡åŠ è½½ä¼˜åŒ– # ä½¿ç”¨ Glide åŠ è½½ç½‘ç»œå›¾ç‰‡ # // æ·»åŠ ä¾èµ–ï¼šimplementation \u0026#39;com.github.bumptech.glide:glide:4.15.1\u0026#39; class NetworkImageActivity : AppCompatActivity() { private lateinit var imageView: ImageView override fun onCreate(savedInstanceState: Bundle?) { super.onCreate(savedInstanceState) setContentView(R.layout.activity_network_image) initViews() loadNetworkImage() } private fun initViews() { imageView = findViewById(R.id.imageView) } private fun loadNetworkImage() { val imageUrl = \u0026#34;https://example.com/image.jpg\u0026#34; Glide.with(this) .load(imageUrl) .placeholder(R.drawable.placeholder) // å ä½å›¾ .error(R.drawable.error_image) // é”™è¯¯å›¾ .centerCrop() .into(imageView) } } å›¾ç‰‡ç¼“å­˜ç®¡ç† # class ImageCacheManager { companion object { private const val CACHE_SIZE = 50 * 1024 * 1024 // 50MB fun setupImageCache(context: Context) { val cacheDir = File(context.cacheDir, \u0026#34;image_cache\u0026#34;) if (!cacheDir.exists()) { cacheDir.mkdirs() } } fun clearImageCache(context: Context) { try { val cacheDir = File(context.cacheDir, \u0026#34;image_cache\u0026#34;) if (cacheDir.exists()) { cacheDir.deleteRecursively() } } catch (e: Exception) { Log.e(\u0026#34;ImageCache\u0026#34;, \u0026#34;æ¸…é™¤ç¼“å­˜å¤±è´¥\u0026#34;, e) } } } } å›¾ç‰‡å¤„ç†åŠŸèƒ½ # å›¾ç‰‡æ—‹è½¬ # class ImageRotationActivity : AppCompatActivity() { private lateinit var imageView: ImageView private lateinit var rotateButton: Button private var rotationAngle = 0f override fun onCreate(savedInstanceState: Bundle?) { super.onCreate(savedInstanceState) setContentView(R.layout.activity_image_rotation) initViews() setupImageRotation() } private fun initViews() { imageView = findViewById(R.id.imageView) rotateButton = findViewById(R.id.rotateButton) } private fun setupImageRotation() { rotateButton.setOnClickListener { rotationAngle += 90f rotateImage() } } private fun rotateImage() { val rotation = ObjectAnimator.ofFloat(imageView, \u0026#34;rotation\u0026#34;, imageView.rotation, rotationAngle) rotation.duration = 300 rotation.start() } } å›¾ç‰‡ç¼©æ”¾ # class ImageZoomActivity : AppCompatActivity() { private lateinit var imageView: ImageView override fun onCreate(savedInstanceState: Bundle?) { super.onCreate(savedInstanceState) setContentView(R.layout.activity_image_zoom) initViews() setupImageZoom() } private fun initViews() { imageView = findViewById(R.id.imageView) } private fun setupImageZoom() { // è®¾ç½®è§¦æ‘¸ç›‘å¬å™¨å®ç°ç¼©æ”¾ imageView.setOnTouchListener { _, event -\u0026gt; when (event.action) { MotionEvent.ACTION_DOWN -\u0026gt; { // å¼€å§‹ç¼©æ”¾ true } MotionEvent.ACTION_MOVE -\u0026gt; { // å¤„ç†ç¼©æ”¾ true } MotionEvent.ACTION_UP -\u0026gt; { // ç»“æŸç¼©æ”¾ true } else -\u0026gt; false } } } } å›¾ç‰‡é€‰æ‹©å™¨ # ä»ç›¸å†Œé€‰æ‹©å›¾ç‰‡ # class ImagePickerActivity : AppCompatActivity() { private lateinit var imageView: ImageView private lateinit var selectButton: Button private val REQUEST_CODE_GALLERY = 1001 override fun onCreate(savedInstanceState: Bundle?) { super.onCreate(savedInstanceState) setContentView(R.layout.activity_image_picker) initViews() setupImagePicker() } private fun initViews() { imageView = findViewById(R.id.imageView) selectButton = findViewById(R.id.selectButton) } private fun setupImagePicker() { selectButton.setOnClickListener { openImagePicker() } } private fun openImagePicker() { val intent = Intent(Intent.ACTION_PICK) intent.type = \u0026#34;image/*\u0026#34; startActivityForResult(intent, REQUEST_CODE_GALLERY) } override fun onActivityResult(requestCode: Int, resultCode: Int, data: Intent?) { super.onActivityResult(requestCode, resultCode, data) if (requestCode == REQUEST_CODE_GALLERY \u0026amp;\u0026amp; resultCode == RESULT_OK) { data?.data?.let { uri -\u0026gt; imageView.setImageURI(uri) } } } } æ€§èƒ½ä¼˜åŒ–å»ºè®® # 1. å›¾ç‰‡å‹ç¼© # class ImageCompression { companion object { fun compressImage(bitmap: Bitmap, quality: Int = 80): Bitmap { val outputStream = ByteArrayOutputStream() bitmap.compress(Bitmap.CompressFormat.JPEG, quality, outputStream) val byteArray = outputStream.toByteArray() return BitmapFactory.decodeByteArray(byteArray, 0, byteArray.size) } fun resizeImage(bitmap: Bitmap, maxWidth: Int, maxHeight: Int): Bitmap { val width = bitmap.width val height = bitmap.height val ratio = min(maxWidth.toFloat() / width, maxHeight.toFloat() / height) val newWidth = (width * ratio).toInt() val newHeight = (height * ratio).toInt() return Bitmap.createScaledBitmap(bitmap, newWidth, newHeight, true) } } } 2. å†…å­˜ç®¡ç† # class ImageMemoryManager { companion object { fun getOptimalImageSize(context: Context, imageView: ImageView): Pair\u0026lt;Int, Int\u0026gt; { val displayMetrics = context.resources.displayMetrics val screenWidth = displayMetrics.widthPixels val screenHeight = displayMetrics.heightPixels // æ ¹æ®å±å¹•å°ºå¯¸è®¡ç®—æœ€ä½³å›¾ç‰‡å°ºå¯¸ val optimalWidth = screenWidth / 2 val optimalHeight = screenHeight / 3 return Pair(optimalWidth, optimalHeight) } fun recycleBitmap(bitmap: Bitmap?) { bitmap?.let { if (!it.isRecycled) { it.recycle() } } } } } ğŸ“‹ æ€»ç»“ # ImageView æ˜¯ Android å¼€å‘ä¸­é‡è¦çš„å›¾ç‰‡æ˜¾ç¤ºæ§ä»¶ï¼š\nå¤šç§ç¼©æ”¾æ¨¡å¼ï¼šcenterCropã€centerInsideã€fitCenter ç­‰ èµ„æºç®¡ç†ï¼šåˆç†ä½¿ç”¨ drawable å’Œ mipmap æ–‡ä»¶å¤¹ æ€§èƒ½ä¼˜åŒ–ï¼šå›¾ç‰‡å‹ç¼©ã€ç¼“å­˜ç®¡ç†ã€å†…å­˜æ§åˆ¶ åŠŸèƒ½æ‰©å±•ï¼šå›¾ç‰‡é€‰æ‹©ã€æ—‹è½¬ã€ç¼©æ”¾ç­‰äº¤äº’åŠŸèƒ½ ç¬¬ä¸‰æ–¹åº“ï¼šä½¿ç”¨ Glideã€Picasso ç­‰åº“ä¼˜åŒ–ç½‘ç»œå›¾ç‰‡åŠ è½½ æŒæ¡ ImageView çš„ä½¿ç”¨æ–¹æ³•å’Œä¼˜åŒ–æŠ€å·§æ˜¯ Android å¼€å‘çš„é‡è¦æŠ€èƒ½ã€‚\n","date":"24 October 2025","externalUrl":null,"permalink":"/posts/android/06---imageview%E5%9B%BE%E7%89%87%E6%8E%A7%E4%BB%B6/","section":"Posts","summary":"è¯¦ç»†ä»‹ç»Android ImageViewå›¾ç‰‡æ§ä»¶çš„ä½¿ç”¨æ–¹æ³•ã€å±æ€§é…ç½®ã€å›¾ç‰‡åŠ è½½å’Œç¼©æ”¾æ¨¡å¼","title":"ImageView å›¾ç‰‡æ§ä»¶","type":"posts"},{"content":" LinearLayout çº¿æ€§å¸ƒå±€ # LinearLayout æ˜¯ Android ä¸­æœ€å¸¸ç”¨çš„å¸ƒå±€å®¹å™¨ï¼Œå®ƒæŒ‰ç…§æ°´å¹³æˆ–å‚ç›´æ–¹å‘ä¾æ¬¡æ’åˆ—å­æ§ä»¶ã€‚\nLinearLayout åŸºæœ¬å±æ€§ # \u0026lt;LinearLayout android:id=\u0026#34;@+id/linearLayout\u0026#34; android:layout_width=\u0026#34;match_parent\u0026#34; android:layout_height=\u0026#34;match_parent\u0026#34; android:orientation=\u0026#34;vertical\u0026#34; android:gravity=\u0026#34;center\u0026#34; android:padding=\u0026#34;16dp\u0026#34; android:background=\u0026#34;@color/background_color\u0026#34;\u0026gt; \u0026lt;!-- å­æ§ä»¶ --\u0026gt; \u0026lt;/LinearLayout\u0026gt; æ ¸å¿ƒå±æ€§è¯¦è§£ # 1. orientationï¼ˆæ–¹å‘ï¼‰ # æ§åˆ¶å­æ§ä»¶çš„æ’åˆ—æ–¹å‘ï¼š\n\u0026lt;!-- å‚ç›´æ’åˆ—ï¼ˆé»˜è®¤ï¼‰ --\u0026gt; \u0026lt;LinearLayout android:layout_width=\u0026#34;match_parent\u0026#34; android:layout_height=\u0026#34;match_parent\u0026#34; android:orientation=\u0026#34;vertical\u0026#34;\u0026gt; \u0026lt;TextView android:text=\u0026#34;ç¬¬ä¸€è¡Œ\u0026#34; /\u0026gt; \u0026lt;TextView android:text=\u0026#34;ç¬¬äºŒè¡Œ\u0026#34; /\u0026gt; \u0026lt;TextView android:text=\u0026#34;ç¬¬ä¸‰è¡Œ\u0026#34; /\u0026gt; \u0026lt;/LinearLayout\u0026gt; \u0026lt;!-- æ°´å¹³æ’åˆ— --\u0026gt; \u0026lt;LinearLayout android:layout_width=\u0026#34;match_parent\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:orientation=\u0026#34;horizontal\u0026#34;\u0026gt; \u0026lt;TextView android:text=\u0026#34;ç¬¬ä¸€åˆ—\u0026#34; /\u0026gt; \u0026lt;TextView android:text=\u0026#34;ç¬¬äºŒåˆ—\u0026#34; /\u0026gt; \u0026lt;TextView android:text=\u0026#34;ç¬¬ä¸‰åˆ—\u0026#34; /\u0026gt; \u0026lt;/LinearLayout\u0026gt; 2. layout_weightï¼ˆæƒé‡ï¼‰ # æŒ‰æ¯”ä¾‹åˆ†é…å‰©ä½™ç©ºé—´ï¼š\n\u0026lt;LinearLayout android:layout_width=\u0026#34;match_parent\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:orientation=\u0026#34;horizontal\u0026#34;\u0026gt; \u0026lt;!-- å 1/3ç©ºé—´ --\u0026gt; \u0026lt;TextView android:layout_width=\u0026#34;0dp\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:layout_weight=\u0026#34;1\u0026#34; android:text=\u0026#34;ä¸‰åˆ†ä¹‹ä¸€\u0026#34; android:background=\u0026#34;#FF5722\u0026#34; /\u0026gt; \u0026lt;!-- å 2/3ç©ºé—´ --\u0026gt; \u0026lt;TextView android:layout_width=\u0026#34;0dp\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:layout_weight=\u0026#34;2\u0026#34; android:text=\u0026#34;ä¸‰åˆ†ä¹‹äºŒ\u0026#34; android:background=\u0026#34;#2196F3\u0026#34; /\u0026gt; \u0026lt;/LinearLayout\u0026gt; 3. gravityï¼ˆå¯¹é½æ–¹å¼ï¼‰ # æ§åˆ¶å­æ§ä»¶åœ¨å®¹å™¨ä¸­çš„å¯¹é½æ–¹å¼ï¼š\n\u0026lt;LinearLayout android:layout_width=\u0026#34;match_parent\u0026#34; android:layout_height=\u0026#34;200dp\u0026#34; android:orientation=\u0026#34;vertical\u0026#34; android:gravity=\u0026#34;center\u0026#34;\u0026gt; \u0026lt;TextView android:text=\u0026#34;å±…ä¸­å¯¹é½\u0026#34; /\u0026gt; \u0026lt;/LinearLayout\u0026gt; Kotlin ä»£ç ç¤ºä¾‹ # åŠ¨æ€åˆ›å»º LinearLayout # class DynamicLinearLayoutActivity : AppCompatActivity() { private lateinit var containerLayout: LinearLayout override fun onCreate(savedInstanceState: Bundle?) { super.onCreate(savedInstanceState) setContentView(R.layout.activity_dynamic_linear_layout) initViews() createDynamicLayout() } private fun initViews() { containerLayout = findViewById(R.id.containerLayout) } private fun createDynamicLayout() { // åˆ›å»ºæ°´å¹³å¸ƒå±€ val horizontalLayout = LinearLayout(this).apply { orientation = LinearLayout.HORIZONTAL layoutParams = LinearLayout.LayoutParams( LinearLayout.LayoutParams.MATCH_PARENT, LinearLayout.LayoutParams.WRAP_CONTENT ) gravity = Gravity.CENTER setPadding(16, 16, 16, 16) } // æ·»åŠ æŒ‰é’® repeat(3) { index -\u0026gt; val button = Button(this).apply { text = \u0026#34;æŒ‰é’® ${index + 1}\u0026#34; layoutParams = LinearLayout.LayoutParams( LinearLayout.LayoutParams.WRAP_CONTENT, LinearLayout.LayoutParams.WRAP_CONTENT ).apply { marginEnd = if (index \u0026lt; 2) 16 else 0 } setOnClickListener { Toast.makeText(this@DynamicLinearLayoutActivity, \u0026#34;æŒ‰é’® ${index + 1} è¢«ç‚¹å‡»\u0026#34;, Toast.LENGTH_SHORT).show() } } horizontalLayout.addView(button) } containerLayout.addView(horizontalLayout) } } æƒé‡åˆ†é…ç¤ºä¾‹ # class WeightDistributionActivity : AppCompatActivity() { private lateinit var containerLayout: LinearLayout override fun onCreate(savedInstanceState: Bundle?) { super.onCreate(savedInstanceState) setContentView(R.layout.activity_weight_distribution) initViews() setupWeightDistribution() } private fun initViews() { containerLayout = findViewById(R.id.containerLayout) } private fun setupWeightDistribution() { val weights = listOf(1, 2, 3) // æƒé‡æ¯”ä¾‹ 1:2:3 weights.forEachIndexed { index, weight -\u0026gt; val textView = TextView(this).apply { text = \u0026#34;æƒé‡: $weight\u0026#34; gravity = Gravity.CENTER setTextColor(Color.WHITE) setPadding(16, 16, 16, 16) layoutParams = LinearLayout.LayoutParams( 0, // å®½åº¦è®¾ä¸º0ï¼Œè®©æƒé‡ç”Ÿæ•ˆ LinearLayout.LayoutParams.MATCH_PARENT ).apply { this.weight = weight.toFloat() } // è®¾ç½®ä¸åŒé¢œè‰² setBackgroundColor( when (index) { 0 -\u0026gt; Color.parseColor(\u0026#34;#FF5722\u0026#34;) 1 -\u0026gt; Color.parseColor(\u0026#34;#2196F3\u0026#34;) 2 -\u0026gt; Color.parseColor(\u0026#34;#4CAF50\u0026#34;) else -\u0026gt; Color.GRAY } ) } containerLayout.addView(textView) } } } å®é™…åº”ç”¨åœºæ™¯ # 1. ç™»å½•è¡¨å•å¸ƒå±€ # \u0026lt;LinearLayout android:layout_width=\u0026#34;match_parent\u0026#34; android:layout_height=\u0026#34;match_parent\u0026#34; android:orientation=\u0026#34;vertical\u0026#34; android:gravity=\u0026#34;center\u0026#34; android:padding=\u0026#34;24dp\u0026#34;\u0026gt; \u0026lt;!-- Logo --\u0026gt; \u0026lt;ImageView android:layout_width=\u0026#34;120dp\u0026#34; android:layout_height=\u0026#34;120dp\u0026#34; android:src=\u0026#34;@drawable/logo\u0026#34; android:layout_marginBottom=\u0026#34;32dp\u0026#34; /\u0026gt; \u0026lt;!-- ç”¨æˆ·åè¾“å…¥æ¡† --\u0026gt; \u0026lt;EditText android:id=\u0026#34;@+id/usernameEditText\u0026#34; android:layout_width=\u0026#34;match_parent\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:hint=\u0026#34;è¯·è¾“å…¥ç”¨æˆ·å\u0026#34; android:layout_marginBottom=\u0026#34;16dp\u0026#34; android:padding=\u0026#34;16dp\u0026#34; android:background=\u0026#34;@drawable/edit_text_background\u0026#34; /\u0026gt; \u0026lt;!-- å¯†ç è¾“å…¥æ¡† --\u0026gt; \u0026lt;EditText android:id=\u0026#34;@+id/passwordEditText\u0026#34; android:layout_width=\u0026#34;match_parent\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:hint=\u0026#34;è¯·è¾“å…¥å¯†ç \u0026#34; android:inputType=\u0026#34;textPassword\u0026#34; android:layout_marginBottom=\u0026#34;24dp\u0026#34; android:padding=\u0026#34;16dp\u0026#34; android:background=\u0026#34;@drawable/edit_text_background\u0026#34; /\u0026gt; \u0026lt;!-- ç™»å½•æŒ‰é’® --\u0026gt; \u0026lt;Button android:id=\u0026#34;@+id/loginButton\u0026#34; android:layout_width=\u0026#34;match_parent\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:text=\u0026#34;ç™»å½•\u0026#34; android:textSize=\u0026#34;16sp\u0026#34; android:padding=\u0026#34;16dp\u0026#34; android:background=\u0026#34;@drawable/button_background\u0026#34; /\u0026gt; \u0026lt;/LinearLayout\u0026gt; 2. åº•éƒ¨å¯¼èˆªæ  # \u0026lt;LinearLayout android:layout_width=\u0026#34;match_parent\u0026#34; android:layout_height=\u0026#34;60dp\u0026#34; android:orientation=\u0026#34;horizontal\u0026#34; android:background=\u0026#34;@color/bottom_nav_background\u0026#34; android:gravity=\u0026#34;center\u0026#34;\u0026gt; \u0026lt;!-- é¦–é¡µ --\u0026gt; \u0026lt;LinearLayout android:layout_width=\u0026#34;0dp\u0026#34; android:layout_height=\u0026#34;match_parent\u0026#34; android:layout_weight=\u0026#34;1\u0026#34; android:orientation=\u0026#34;vertical\u0026#34; android:gravity=\u0026#34;center\u0026#34; android:clickable=\u0026#34;true\u0026#34; android:background=\u0026#34;?android:attr/selectableItemBackground\u0026#34;\u0026gt; \u0026lt;ImageView android:layout_width=\u0026#34;24dp\u0026#34; android:layout_height=\u0026#34;24dp\u0026#34; android:src=\u0026#34;@drawable/ic_home\u0026#34; /\u0026gt; \u0026lt;TextView android:layout_width=\u0026#34;wrap_content\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:text=\u0026#34;é¦–é¡µ\u0026#34; android:textSize=\u0026#34;12sp\u0026#34; android:layout_marginTop=\u0026#34;4dp\u0026#34; /\u0026gt; \u0026lt;/LinearLayout\u0026gt; \u0026lt;!-- å…¶ä»–å¯¼èˆªé¡¹... --\u0026gt; \u0026lt;/LinearLayout\u0026gt; 3. å•†å“åˆ—è¡¨é¡¹ # \u0026lt;LinearLayout android:layout_width=\u0026#34;match_parent\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:orientation=\u0026#34;horizontal\u0026#34; android:padding=\u0026#34;16dp\u0026#34; android:background=\u0026#34;?android:attr/selectableItemBackground\u0026#34; android:clickable=\u0026#34;true\u0026#34;\u0026gt; \u0026lt;!-- å•†å“å›¾ç‰‡ --\u0026gt; \u0026lt;ImageView android:layout_width=\u0026#34;80dp\u0026#34; android:layout_height=\u0026#34;80dp\u0026#34; android:src=\u0026#34;@drawable/product_image\u0026#34; android:scaleType=\u0026#34;centerCrop\u0026#34; android:layout_marginEnd=\u0026#34;16dp\u0026#34; /\u0026gt; \u0026lt;!-- å•†å“ä¿¡æ¯ --\u0026gt; \u0026lt;LinearLayout android:layout_width=\u0026#34;0dp\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:layout_weight=\u0026#34;1\u0026#34; android:orientation=\u0026#34;vertical\u0026#34; android:gravity=\u0026#34;center_vertical\u0026#34;\u0026gt; \u0026lt;TextView android:layout_width=\u0026#34;wrap_content\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:text=\u0026#34;å•†å“åç§°\u0026#34; android:textSize=\u0026#34;16sp\u0026#34; android:textStyle=\u0026#34;bold\u0026#34; android:layout_marginBottom=\u0026#34;4dp\u0026#34; /\u0026gt; \u0026lt;TextView android:layout_width=\u0026#34;wrap_content\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:text=\u0026#34;å•†å“æè¿°\u0026#34; android:textSize=\u0026#34;14sp\u0026#34; android:textColor=\u0026#34;#666666\u0026#34; android:layout_marginBottom=\u0026#34;8dp\u0026#34; /\u0026gt; \u0026lt;TextView android:layout_width=\u0026#34;wrap_content\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:text=\u0026#34;Â¥99.00\u0026#34; android:textSize=\u0026#34;18sp\u0026#34; android:textColor=\u0026#34;#FF5722\u0026#34; android:textStyle=\u0026#34;bold\u0026#34; /\u0026gt; \u0026lt;/LinearLayout\u0026gt; \u0026lt;!-- æ“ä½œæŒ‰é’® --\u0026gt; \u0026lt;Button android:layout_width=\u0026#34;wrap_content\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:text=\u0026#34;åŠ å…¥è´­ç‰©è½¦\u0026#34; android:layout_gravity=\u0026#34;center_vertical\u0026#34; /\u0026gt; \u0026lt;/LinearLayout\u0026gt; åµŒå¥—å¸ƒå±€ç¤ºä¾‹ # å¤æ‚è¡¨å•å¸ƒå±€ # \u0026lt;ScrollView android:layout_width=\u0026#34;match_parent\u0026#34; android:layout_height=\u0026#34;match_parent\u0026#34;\u0026gt; \u0026lt;LinearLayout android:layout_width=\u0026#34;match_parent\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:orientation=\u0026#34;vertical\u0026#34; android:padding=\u0026#34;16dp\u0026#34;\u0026gt; \u0026lt;!-- ä¸ªäººä¿¡æ¯éƒ¨åˆ† --\u0026gt; \u0026lt;TextView android:layout_width=\u0026#34;wrap_content\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:text=\u0026#34;ä¸ªäººä¿¡æ¯\u0026#34; android:textSize=\u0026#34;18sp\u0026#34; android:textStyle=\u0026#34;bold\u0026#34; android:layout_marginBottom=\u0026#34;16dp\u0026#34; /\u0026gt; \u0026lt;LinearLayout android:layout_width=\u0026#34;match_parent\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:orientation=\u0026#34;horizontal\u0026#34; android:layout_marginBottom=\u0026#34;16dp\u0026#34;\u0026gt; \u0026lt;EditText android:layout_width=\u0026#34;0dp\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:layout_weight=\u0026#34;1\u0026#34; android:hint=\u0026#34;å§“å\u0026#34; android:layout_marginEnd=\u0026#34;8dp\u0026#34; /\u0026gt; \u0026lt;EditText android:layout_width=\u0026#34;0dp\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:layout_weight=\u0026#34;1\u0026#34; android:hint=\u0026#34;å¹´é¾„\u0026#34; android:inputType=\u0026#34;number\u0026#34; /\u0026gt; \u0026lt;/LinearLayout\u0026gt; \u0026lt;!-- è”ç³»æ–¹å¼éƒ¨åˆ† --\u0026gt; \u0026lt;TextView android:layout_width=\u0026#34;wrap_content\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:text=\u0026#34;è”ç³»æ–¹å¼\u0026#34; android:textSize=\u0026#34;18sp\u0026#34; android:textStyle=\u0026#34;bold\u0026#34; android:layout_marginBottom=\u0026#34;16dp\u0026#34; /\u0026gt; \u0026lt;EditText android:layout_width=\u0026#34;match_parent\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:hint=\u0026#34;æ‰‹æœºå·ç \u0026#34; android:inputType=\u0026#34;phone\u0026#34; android:layout_marginBottom=\u0026#34;16dp\u0026#34; /\u0026gt; \u0026lt;EditText android:layout_width=\u0026#34;match_parent\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:hint=\u0026#34;é‚®ç®±åœ°å€\u0026#34; android:inputType=\u0026#34;textEmailAddress\u0026#34; android:layout_marginBottom=\u0026#34;24dp\u0026#34; /\u0026gt; \u0026lt;!-- æäº¤æŒ‰é’® --\u0026gt; \u0026lt;Button android:layout_width=\u0026#34;match_parent\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:text=\u0026#34;æäº¤\u0026#34; android:textSize=\u0026#34;16sp\u0026#34; android:padding=\u0026#34;16dp\u0026#34; /\u0026gt; \u0026lt;/LinearLayout\u0026gt; \u0026lt;/ScrollView\u0026gt; æ€§èƒ½ä¼˜åŒ–å»ºè®® # 1. é¿å…è¿‡åº¦åµŒå¥— # // ä¸å¥½çš„åšæ³•ï¼šè¿‡åº¦åµŒå¥— LinearLayout { LinearLayout { LinearLayout { TextView { } } } } // å¥½çš„åšæ³•ï¼šä½¿ç”¨ConstraintLayoutæ›¿ä»£ ConstraintLayout { TextView { } } 2. ä½¿ç”¨ ViewStub å»¶è¿ŸåŠ è½½ # \u0026lt;LinearLayout android:layout_width=\u0026#34;match_parent\u0026#34; android:layout_height=\u0026#34;match_parent\u0026#34; android:orientation=\u0026#34;vertical\u0026#34;\u0026gt; \u0026lt;!-- ä¸»è¦å†…å®¹ --\u0026gt; \u0026lt;TextView android:text=\u0026#34;ä¸»è¦å†…å®¹\u0026#34; /\u0026gt; \u0026lt;!-- å»¶è¿ŸåŠ è½½çš„å†…å®¹ --\u0026gt; \u0026lt;ViewStub android:id=\u0026#34;@+id/viewStub\u0026#34; android:layout_width=\u0026#34;match_parent\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:layout=\u0026#34;@layout/delayed_content\u0026#34; /\u0026gt; \u0026lt;/LinearLayout\u0026gt; 3. åˆç†ä½¿ç”¨æƒé‡ # // é¿å…ä¸å¿…è¦çš„æƒé‡è®¡ç®— class OptimizedLinearLayout { fun setupOptimizedLayout() { // ä½¿ç”¨å›ºå®šå°ºå¯¸è€Œä¸æ˜¯æƒé‡ val layoutParams = LinearLayout.LayoutParams( resources.getDimensionPixelSize(R.dimen.button_width), LinearLayout.LayoutParams.WRAP_CONTENT ) // åªåœ¨å¿…è¦æ—¶ä½¿ç”¨æƒé‡ val weightParams = LinearLayout.LayoutParams( 0, LinearLayout.LayoutParams.MATCH_PARENT ).apply { weight = 1f // åªåœ¨éœ€è¦æŒ‰æ¯”ä¾‹åˆ†é…æ—¶ä½¿ç”¨ } } } å¸¸è§é—®é¢˜è§£å†³ # 1. æƒé‡ä¸ç”Ÿæ•ˆ # \u0026lt;!-- é”™è¯¯ï¼šè®¾ç½®äº†å…·ä½“å®½åº¦ --\u0026gt; \u0026lt;TextView android:layout_width=\u0026#34;100dp\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:layout_weight=\u0026#34;1\u0026#34; /\u0026gt; \u0026lt;!-- æ­£ç¡®ï¼šå®½åº¦è®¾ä¸º0dp --\u0026gt; \u0026lt;TextView android:layout_width=\u0026#34;0dp\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:layout_weight=\u0026#34;1\u0026#34; /\u0026gt; 2. å­æ§ä»¶è¶…å‡ºå®¹å™¨ # \u0026lt;LinearLayout android:layout_width=\u0026#34;match_parent\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:orientation=\u0026#34;horizontal\u0026#34;\u0026gt; \u0026lt;!-- ä½¿ç”¨æƒé‡é¿å…è¶…å‡º --\u0026gt; \u0026lt;TextView android:layout_width=\u0026#34;0dp\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:layout_weight=\u0026#34;1\u0026#34; android:text=\u0026#34;å¾ˆé•¿çš„æ–‡æœ¬å†…å®¹...\u0026#34; /\u0026gt; \u0026lt;/LinearLayout\u0026gt; ğŸ“‹ æ€»ç»“ # LinearLayout æ˜¯ Android å¼€å‘ä¸­æœ€åŸºç¡€çš„å¸ƒå±€å®¹å™¨ï¼š\nç®€å•æ˜“ç”¨ï¼šæŒ‰æ–¹å‘æ’åˆ—å­æ§ä»¶ï¼Œé€»è¾‘æ¸…æ™° æƒé‡åˆ†é…ï¼šçµæ´»æ§åˆ¶ç©ºé—´åˆ†é…æ¯”ä¾‹ åµŒå¥—å¸ƒå±€ï¼šæ”¯æŒå¤æ‚çš„å¸ƒå±€ç»“æ„ æ€§èƒ½è€ƒè™‘ï¼šé¿å…è¿‡åº¦åµŒå¥—ï¼Œåˆç†ä½¿ç”¨æƒé‡ å®é™…åº”ç”¨ï¼šè¡¨å•ã€åˆ—è¡¨ã€å¯¼èˆªç­‰å¸¸è§åœºæ™¯ æŒæ¡ LinearLayout çš„ä½¿ç”¨æ–¹æ³•æ˜¯ Android å¸ƒå±€å¼€å‘çš„åŸºç¡€ã€‚\n","date":"24 October 2025","externalUrl":null,"permalink":"/posts/android/02---linear-layout-%E7%BA%BF%E6%80%A7%E5%B8%83%E5%B1%80/","section":"Posts","summary":"è¯¦ç»†ä»‹ç»Android LinearLayoutçº¿æ€§å¸ƒå±€çš„ä½¿ç”¨æ–¹æ³•ã€å±æ€§é…ç½®å’Œå®é™…åº”ç”¨åœºæ™¯","title":"LinearLayout çº¿æ€§å¸ƒå±€","type":"posts"},{"content":" Menu èœå•ç»„ä»¶ # Android æä¾›äº†å¤šç§èœå•ç»„ä»¶ï¼Œç”¨äºä¸åŒçš„ç”¨æˆ·äº¤äº’åœºæ™¯ã€‚æœ¬æ–‡å°†è¯¦ç»†ä»‹ç»å„ç§èœå•çš„ä½¿ç”¨æ–¹æ³•ã€‚\nOptionMenu é€‰é¡¹èœå• # OptionMenu æ˜¯åº”ç”¨çš„ä¸»èœå•ï¼Œé€šå¸¸æ˜¾ç¤ºåœ¨ ActionBar æˆ–æ ‡é¢˜æ ä¸­ï¼Œç”¨äºæ”¾ç½®å¯¹åº”ç”¨äº§ç”Ÿå…¨å±€å½±å“çš„æ“ä½œã€‚\nåŸºæœ¬å±æ€§ # å±æ€§ è¯´æ˜ ç¤ºä¾‹å€¼ android:id èœå•é¡¹ID @+id/menu_item android:title èœå•é¡¹æ ‡é¢˜ \u0026quot;è®¾ç½®\u0026quot; android:icon èœå•é¡¹å›¾æ ‡ @drawable/ic_settings android:showAsAction æ˜¾ç¤ºæ–¹å¼ always, never, ifRoom åˆ›å»ºèœå•èµ„æº # \u0026lt;!-- res/menu/main_menu.xml --\u0026gt; \u0026lt;menu xmlns:android=\u0026#34;http://schemas.android.com/apk/res/android\u0026#34; xmlns:app=\u0026#34;http://schemas.android.com/apk/res-auto\u0026#34;\u0026gt; \u0026lt;item android:id=\u0026#34;@+id/menu_settings\u0026#34; android:title=\u0026#34;è®¾ç½®\u0026#34; android:icon=\u0026#34;@drawable/ic_settings\u0026#34; app:showAsAction=\u0026#34;ifRoom\u0026#34; /\u0026gt; \u0026lt;item android:id=\u0026#34;@+id/menu_help\u0026#34; android:title=\u0026#34;å¸®åŠ©\u0026#34; android:icon=\u0026#34;@drawable/ic_help\u0026#34; app:showAsAction=\u0026#34;never\u0026#34; /\u0026gt; \u0026lt;item android:id=\u0026#34;@+id/menu_about\u0026#34; android:title=\u0026#34;å…³äº\u0026#34; android:icon=\u0026#34;@drawable/ic_info\u0026#34; app:showAsAction=\u0026#34;never\u0026#34; /\u0026gt; \u0026lt;/menu\u0026gt; Kotlin ä»£ç ç¤ºä¾‹ # class OptionMenuActivity : AppCompatActivity() { override fun onCreate(savedInstanceState: Bundle?) { super.onCreate(savedInstanceState) setContentView(R.layout.activity_option_menu) // è®¾ç½® ActionBar setSupportActionBar(findViewById(R.id.toolbar)) } override fun onCreateOptionsMenu(menu: Menu?): Boolean { menuInflater.inflate(R.menu.main_menu, menu) return true } override fun onOptionsItemSelected(item: MenuItem): Boolean { return when (item.itemId) { R.id.menu_settings -\u0026gt; { openSettings() true } R.id.menu_help -\u0026gt; { showHelp() true } R.id.menu_about -\u0026gt; { showAbout() true } else -\u0026gt; super.onOptionsItemSelected(item) } } private fun openSettings() { Toast.makeText(this, \u0026#34;æ‰“å¼€è®¾ç½®\u0026#34;, Toast.LENGTH_SHORT).show() // å¯åŠ¨è®¾ç½®é¡µé¢ // startActivity(Intent(this, SettingsActivity::class.java)) } private fun showHelp() { Toast.makeText(this, \u0026#34;æ˜¾ç¤ºå¸®åŠ©\u0026#34;, Toast.LENGTH_SHORT).show() // æ˜¾ç¤ºå¸®åŠ©å¯¹è¯æ¡† } private fun showAbout() { Toast.makeText(this, \u0026#34;æ˜¾ç¤ºå…³äº\u0026#34;, Toast.LENGTH_SHORT).show() // æ˜¾ç¤ºå…³äºå¯¹è¯æ¡† } } åŠ¨æ€åˆ›å»ºèœå• # class DynamicOptionMenuActivity : AppCompatActivity() { private val menuItems = mutableListOf(\u0026#34;èœå•é¡¹1\u0026#34;, \u0026#34;èœå•é¡¹2\u0026#34;, \u0026#34;èœå•é¡¹3\u0026#34;) override fun onCreate(savedInstanceState: Bundle?) { super.onCreate(savedInstanceState) setContentView(R.layout.activity_dynamic_option_menu) setSupportActionBar(findViewById(R.id.toolbar)) } override fun onCreateOptionsMenu(menu: Menu?): Boolean { menu?.let { // åŠ¨æ€æ·»åŠ èœå•é¡¹ menuItems.forEachIndexed { index, title -\u0026gt; it.add(Menu.NONE, index, Menu.NONE, title) } // æ·»åŠ åˆ†éš”ç¬¦ it.add(Menu.NONE, Menu.NONE, Menu.NONE, \u0026#34;åˆ†éš”ç¬¦\u0026#34;) .setEnabled(false) // æ·»åŠ æ›´å¤šèœå•é¡¹ it.add(Menu.NONE, 999, Menu.NONE, \u0026#34;æ›´å¤šé€‰é¡¹\u0026#34;) } return true } override fun onOptionsItemSelected(item: MenuItem): Boolean { return when (item.itemId) { in 0 until menuItems.size -\u0026gt; { Toast.makeText(this, \u0026#34;é€‰æ‹©äº†: ${menuItems[item.itemId]}\u0026#34;, Toast.LENGTH_SHORT).show() true } 999 -\u0026gt; { Toast.makeText(this, \u0026#34;æ›´å¤šé€‰é¡¹\u0026#34;, Toast.LENGTH_SHORT).show() true } else -\u0026gt; super.onOptionsItemSelected(item) } } } ContextMenu ä¸Šä¸‹æ–‡èœå• # ContextMenu æ˜¯é•¿æŒ‰æŸä¸ª View æ—¶å¼¹å‡ºçš„èœå•ï¼Œæä¾›ä¸è¯¥ View ç›¸å…³çš„æ“ä½œé€‰é¡¹ã€‚\nåŸºæœ¬ä½¿ç”¨ # class ContextMenuActivity : AppCompatActivity() { private lateinit var textView: TextView private lateinit var imageView: ImageView override fun onCreate(savedInstanceState: Bundle?) { super.onCreate(savedInstanceState) setContentView(R.layout.activity_context_menu) initViews() registerContextMenus() } private fun initViews() { textView = findViewById(R.id.textView) imageView = findViewById(R.id.imageView) } private fun registerContextMenus() { // æ³¨å†Œä¸Šä¸‹æ–‡èœå• registerForContextMenu(textView) registerForContextMenu(imageView) } override fun onCreateContextMenu( menu: ContextMenu?, v: View?, menuInfo: ContextMenu.ContextMenuInfo? ) { super.onCreateContextMenu(menu, v, menuInfo) when (v?.id) { R.id.textView -\u0026gt; { menuInflater.inflate(R.menu.text_context_menu, menu) } R.id.imageView -\u0026gt; { menuInflater.inflate(R.menu.image_context_menu, menu) } } } override fun onContextItemSelected(item: MenuItem): Boolean { return when (item.itemId) { R.id.menu_copy -\u0026gt; { copyText() true } R.id.menu_paste -\u0026gt; { pasteText() true } R.id.menu_share -\u0026gt; { shareContent() true } R.id.menu_delete -\u0026gt; { deleteItem() true } R.id.menu_edit -\u0026gt; { editItem() true } else -\u0026gt; super.onContextItemSelected(item) } } private fun copyText() { Toast.makeText(this, \u0026#34;å¤åˆ¶æ–‡æœ¬\u0026#34;, Toast.LENGTH_SHORT).show() } private fun pasteText() { Toast.makeText(this, \u0026#34;ç²˜è´´æ–‡æœ¬\u0026#34;, Toast.LENGTH_SHORT).show() } private fun shareContent() { Toast.makeText(this, \u0026#34;åˆ†äº«å†…å®¹\u0026#34;, Toast.LENGTH_SHORT).show() } private fun deleteItem() { Toast.makeText(this, \u0026#34;åˆ é™¤é¡¹ç›®\u0026#34;, Toast.LENGTH_SHORT).show() } private fun editItem() { Toast.makeText(this, \u0026#34;ç¼–è¾‘é¡¹ç›®\u0026#34;, Toast.LENGTH_SHORT).show() } } ä¸Šä¸‹æ–‡èœå•èµ„æº # \u0026lt;!-- res/menu/text_context_menu.xml --\u0026gt; \u0026lt;menu xmlns:android=\u0026#34;http://schemas.android.com/apk/res/android\u0026#34;\u0026gt; \u0026lt;item android:id=\u0026#34;@+id/menu_copy\u0026#34; android:title=\u0026#34;å¤åˆ¶\u0026#34; android:icon=\u0026#34;@drawable/ic_copy\u0026#34; /\u0026gt; \u0026lt;item android:id=\u0026#34;@+id/menu_paste\u0026#34; android:title=\u0026#34;ç²˜è´´\u0026#34; android:icon=\u0026#34;@drawable/ic_paste\u0026#34; /\u0026gt; \u0026lt;item android:id=\u0026#34;@+id/menu_share\u0026#34; android:title=\u0026#34;åˆ†äº«\u0026#34; android:icon=\u0026#34;@drawable/ic_share\u0026#34; /\u0026gt; \u0026lt;/menu\u0026gt; \u0026lt;!-- res/menu/image_context_menu.xml --\u0026gt; \u0026lt;menu xmlns:android=\u0026#34;http://schemas.android.com/apk/res/android\u0026#34;\u0026gt; \u0026lt;item android:id=\u0026#34;@+id/menu_share\u0026#34; android:title=\u0026#34;åˆ†äº«\u0026#34; android:icon=\u0026#34;@drawable/ic_share\u0026#34; /\u0026gt; \u0026lt;item android:id=\u0026#34;@+id/menu_delete\u0026#34; android:title=\u0026#34;åˆ é™¤\u0026#34; android:icon=\u0026#34;@drawable/ic_delete\u0026#34; /\u0026gt; \u0026lt;item android:id=\u0026#34;@+id/menu_edit\u0026#34; android:title=\u0026#34;ç¼–è¾‘\u0026#34; android:icon=\u0026#34;@drawable/ic_edit\u0026#34; /\u0026gt; \u0026lt;/menu\u0026gt; PopupMenu å¼¹å‡ºèœå• # PopupMenu æ˜¯æ¨¡æ€å½¢å¼çš„å¼¹å‡ºèœå•ï¼Œé€šå¸¸ç»‘å®šåœ¨æŸä¸ª View ä¸Šï¼Œå‡ºç°åœ¨è¢«ç»‘å®š View çš„ä¸‹æ–¹ã€‚\nåŸºæœ¬ä½¿ç”¨ # class PopupMenuActivity : AppCompatActivity() { private lateinit var showMenuButton: Button private lateinit var anchorView: View override fun onCreate(savedInstanceState: Bundle?) { super.onCreate(savedInstanceState) setContentView(R.layout.activity_popup_menu) initViews() setupPopupMenu() } private fun initViews() { showMenuButton = findViewById(R.id.showMenuButton) anchorView = findViewById(R.id.anchorView) } private fun setupPopupMenu() { showMenuButton.setOnClickListener { showPopupMenu(it) } anchorView.setOnClickListener { showPopupMenu(it) } } private fun showPopupMenu(anchor: View) { val popupMenu = PopupMenu(this, anchor) popupMenu.menuInflater.inflate(R.menu.popup_menu, popupMenu.menu) // è®¾ç½®èœå•é¡¹ç‚¹å‡»ç›‘å¬å™¨ popupMenu.setOnMenuItemClickListener { item -\u0026gt; handlePopupMenuItemClick(item) true } // è®¾ç½®èœå•å…³é—­ç›‘å¬å™¨ popupMenu.setOnDismissListener { Toast.makeText(this, \u0026#34;èœå•å·²å…³é—­\u0026#34;, Toast.LENGTH_SHORT).show() } popupMenu.show() } private fun handlePopupMenuItemClick(item: MenuItem): Boolean { return when (item.itemId) { R.id.menu_item1 -\u0026gt; { Toast.makeText(this, \u0026#34;é€‰æ‹©äº†èœå•é¡¹1\u0026#34;, Toast.LENGTH_SHORT).show() true } R.id.menu_item2 -\u0026gt; { Toast.makeText(this, \u0026#34;é€‰æ‹©äº†èœå•é¡¹2\u0026#34;, Toast.LENGTH_SHORT).show() true } R.id.menu_item3 -\u0026gt; { Toast.makeText(this, \u0026#34;é€‰æ‹©äº†èœå•é¡¹3\u0026#34;, Toast.LENGTH_SHORT).show() true } else -\u0026gt; false } } } åŠ¨æ€åˆ›å»º PopupMenu # class DynamicPopupMenuActivity : AppCompatActivity() { private lateinit var showMenuButton: Button private val menuItems = mutableListOf(\u0026#34;åŠ¨æ€èœå•1\u0026#34;, \u0026#34;åŠ¨æ€èœå•2\u0026#34;, \u0026#34;åŠ¨æ€èœå•3\u0026#34;) override fun onCreate(savedInstanceState: Bundle?) { super.onCreate(savedInstanceState) setContentView(R.layout.activity_dynamic_popup_menu) initViews() setupDynamicPopupMenu() } private fun initViews() { showMenuButton = findViewById(R.id.showMenuButton) } private fun setupDynamicPopupMenu() { showMenuButton.setOnClickListener { showDynamicPopupMenu(it) } } private fun showDynamicPopupMenu(anchor: View) { val popupMenu = PopupMenu(this, anchor) // åŠ¨æ€æ·»åŠ èœå•é¡¹ menuItems.forEachIndexed { index, title -\u0026gt; popupMenu.menu.add(Menu.NONE, index, Menu.NONE, title) } // æ·»åŠ åˆ†éš”ç¬¦ popupMenu.menu.add(Menu.NONE, Menu.NONE, Menu.NONE, \u0026#34;åˆ†éš”ç¬¦\u0026#34;) .setEnabled(false) // æ·»åŠ æ›´å¤šé€‰é¡¹ popupMenu.menu.add(Menu.NONE, 999, Menu.NONE, \u0026#34;æ·»åŠ æ–°é¡¹\u0026#34;) popupMenu.setOnMenuItemClickListener { item -\u0026gt; when (item.itemId) { in 0 until menuItems.size -\u0026gt; { Toast.makeText(this, \u0026#34;é€‰æ‹©äº†: ${menuItems[item.itemId]}\u0026#34;, Toast.LENGTH_SHORT).show() true } 999 -\u0026gt; { addNewMenuItem() true } else -\u0026gt; false } } popupMenu.show() } private fun addNewMenuItem() { val newItem = \u0026#34;åŠ¨æ€èœå•${menuItems.size + 1}\u0026#34; menuItems.add(newItem) Toast.makeText(this, \u0026#34;æ·»åŠ äº†æ–°èœå•é¡¹: $newItem\u0026#34;, Toast.LENGTH_SHORT).show() } } PopupMenu èµ„æºæ–‡ä»¶ # \u0026lt;!-- res/menu/popup_menu.xml --\u0026gt; \u0026lt;menu xmlns:android=\u0026#34;http://schemas.android.com/apk/res/android\u0026#34;\u0026gt; \u0026lt;item android:id=\u0026#34;@+id/menu_item1\u0026#34; android:title=\u0026#34;èœå•é¡¹1\u0026#34; android:icon=\u0026#34;@drawable/ic_item1\u0026#34; /\u0026gt; \u0026lt;item android:id=\u0026#34;@+id/menu_item2\u0026#34; android:title=\u0026#34;èœå•é¡¹2\u0026#34; android:icon=\u0026#34;@drawable/ic_item2\u0026#34; /\u0026gt; \u0026lt;item android:id=\u0026#34;@+id/menu_item3\u0026#34; android:title=\u0026#34;èœå•é¡¹3\u0026#34; android:icon=\u0026#34;@drawable/ic_item3\u0026#34; /\u0026gt; \u0026lt;/menu\u0026gt; å®é™…åº”ç”¨åœºæ™¯ # 1. åˆ—è¡¨é¡¹æ“ä½œèœå• # class ListItemMenuActivity : AppCompatActivity() { private lateinit var recyclerView: RecyclerView private lateinit var adapter: ItemAdapter override fun onCreate(savedInstanceState: Bundle?) { super.onCreate(savedInstanceState) setContentView(R.layout.activity_list_item_menu) initViews() setupRecyclerView() } private fun initViews() { recyclerView = findViewById(R.id.recyclerView) } private fun setupRecyclerView() { val items = listOf(\u0026#34;é¡¹ç›®1\u0026#34;, \u0026#34;é¡¹ç›®2\u0026#34;, \u0026#34;é¡¹ç›®3\u0026#34;, \u0026#34;é¡¹ç›®4\u0026#34;, \u0026#34;é¡¹ç›®5\u0026#34;) adapter = ItemAdapter(items) { item, view -\u0026gt; showItemMenu(item, view) } recyclerView.adapter = adapter recyclerView.layoutManager = LinearLayoutManager(this) } private fun showItemMenu(item: String, anchorView: View) { val popupMenu = PopupMenu(this, anchorView) popupMenu.menuInflater.inflate(R.menu.list_item_menu, popupMenu.menu) popupMenu.setOnMenuItemClickListener { menuItem -\u0026gt; when (menuItem.itemId) { R.id.menu_edit -\u0026gt; { editItem(item) true } R.id.menu_delete -\u0026gt; { deleteItem(item) true } R.id.menu_share -\u0026gt; { shareItem(item) true } else -\u0026gt; false } } popupMenu.show() } private fun editItem(item: String) { Toast.makeText(this, \u0026#34;ç¼–è¾‘: $item\u0026#34;, Toast.LENGTH_SHORT).show() } private fun deleteItem(item: String) { Toast.makeText(this, \u0026#34;åˆ é™¤: $item\u0026#34;, Toast.LENGTH_SHORT).show() } private fun shareItem(item: String) { Toast.makeText(this, \u0026#34;åˆ†äº«: $item\u0026#34;, Toast.LENGTH_SHORT).show() } } class ItemAdapter( private val items: List\u0026lt;String\u0026gt;, private val onItemClick: (String, View) -\u0026gt; Unit ) : RecyclerView.Adapter\u0026lt;ItemAdapter.ViewHolder\u0026gt;() { override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): ViewHolder { val view = LayoutInflater.from(parent.context) .inflate(R.layout.item_list, parent, false) return ViewHolder(view) } override fun onBindViewHolder(holder: ViewHolder, position: Int) { holder.bind(items[position]) } override fun getItemCount(): Int = items.size inner class ViewHolder(itemView: View) : RecyclerView.ViewHolder(itemView) { private val textView: TextView = itemView.findViewById(R.id.textView) private val menuButton: Button = itemView.findViewById(R.id.menuButton) fun bind(item: String) { textView.text = item menuButton.setOnClickListener { onItemClick(item, it) } } } } 2. å·¥å…·æ èœå• # class ToolbarMenuActivity : AppCompatActivity() { private lateinit var toolbar: Toolbar private lateinit var searchView: SearchView override fun onCreate(savedInstanceState: Bundle?) { super.onCreate(savedInstanceState) setContentView(R.layout.activity_toolbar_menu) initViews() setupToolbar() } private fun initViews() { toolbar = findViewById(R.id.toolbar) } private fun setupToolbar() { setSupportActionBar(toolbar) supportActionBar?.setDisplayHomeAsUpEnabled(true) } override fun onCreateOptionsMenu(menu: Menu?): Boolean { menuInflater.inflate(R.menu.toolbar_menu, menu) // è®¾ç½®æœç´¢è§†å›¾ val searchItem = menu?.findItem(R.id.menu_search) searchView = searchItem?.actionView as SearchView searchView.setOnQueryTextListener(object : SearchView.OnQueryTextListener { override fun onQueryTextSubmit(query: String?): Boolean { performSearch(query) return true } override fun onQueryTextChange(newText: String?): Boolean { // å®æ—¶æœç´¢ return true } }) return true } override fun onOptionsItemSelected(item: MenuItem): Boolean { return when (item.itemId) { android.R.id.home -\u0026gt; { onBackPressed() true } R.id.menu_search -\u0026gt; { searchView.isIconified = false true } R.id.menu_filter -\u0026gt; { showFilterDialog() true } R.id.menu_sort -\u0026gt; { showSortDialog() true } else -\u0026gt; super.onOptionsItemSelected(item) } } private fun performSearch(query: String?) { Toast.makeText(this, \u0026#34;æœç´¢: $query\u0026#34;, Toast.LENGTH_SHORT).show() } private fun showFilterDialog() { Toast.makeText(this, \u0026#34;æ˜¾ç¤ºç­›é€‰å¯¹è¯æ¡†\u0026#34;, Toast.LENGTH_SHORT).show() } private fun showSortDialog() { Toast.makeText(this, \u0026#34;æ˜¾ç¤ºæ’åºå¯¹è¯æ¡†\u0026#34;, Toast.LENGTH_SHORT).show() } } 3. å·¥å…·æ èœå•èµ„æº # \u0026lt;!-- res/menu/toolbar_menu.xml --\u0026gt; \u0026lt;menu xmlns:android=\u0026#34;http://schemas.android.com/apk/res/android\u0026#34; xmlns:app=\u0026#34;http://schemas.android.com/apk/res-auto\u0026#34;\u0026gt; \u0026lt;item android:id=\u0026#34;@+id/menu_search\u0026#34; android:title=\u0026#34;æœç´¢\u0026#34; android:icon=\u0026#34;@drawable/ic_search\u0026#34; app:actionViewClass=\u0026#34;androidx.appcompat.widget.SearchView\u0026#34; app:showAsAction=\u0026#34;ifRoom\u0026#34; /\u0026gt; \u0026lt;item android:id=\u0026#34;@+id/menu_filter\u0026#34; android:title=\u0026#34;ç­›é€‰\u0026#34; android:icon=\u0026#34;@drawable/ic_filter\u0026#34; app:showAsAction=\u0026#34;ifRoom\u0026#34; /\u0026gt; \u0026lt;item android:id=\u0026#34;@+id/menu_sort\u0026#34; android:title=\u0026#34;æ’åº\u0026#34; android:icon=\u0026#34;@drawable/ic_sort\u0026#34; app:showAsAction=\u0026#34;never\u0026#34; /\u0026gt; \u0026lt;/menu\u0026gt; èœå•æœ€ä½³å®è·µ # 1. èœå•é¡¹åˆ†ç»„ # \u0026lt;menu xmlns:android=\u0026#34;http://schemas.android.com/apk/res/android\u0026#34;\u0026gt; \u0026lt;group android:id=\u0026#34;@+id/group_main\u0026#34;\u0026gt; \u0026lt;item android:id=\u0026#34;@+id/menu_home\u0026#34; android:title=\u0026#34;é¦–é¡µ\u0026#34; android:icon=\u0026#34;@drawable/ic_home\u0026#34; /\u0026gt; \u0026lt;item android:id=\u0026#34;@+id/menu_profile\u0026#34; android:title=\u0026#34;ä¸ªäººèµ„æ–™\u0026#34; android:icon=\u0026#34;@drawable/ic_profile\u0026#34; /\u0026gt; \u0026lt;/group\u0026gt; \u0026lt;group android:id=\u0026#34;@+id/group_settings\u0026#34;\u0026gt; \u0026lt;item android:id=\u0026#34;@+id/menu_settings\u0026#34; android:title=\u0026#34;è®¾ç½®\u0026#34; android:icon=\u0026#34;@drawable/ic_settings\u0026#34; /\u0026gt; \u0026lt;item android:id=\u0026#34;@+id/menu_help\u0026#34; android:title=\u0026#34;å¸®åŠ©\u0026#34; android:icon=\u0026#34;@drawable/ic_help\u0026#34; /\u0026gt; \u0026lt;/group\u0026gt; \u0026lt;/menu\u0026gt; 2. èœå•é¡¹çŠ¶æ€ç®¡ç† # class MenuStateActivity : AppCompatActivity() { private var isEditMode = false override fun onCreateOptionsMenu(menu: Menu?): Boolean { menuInflater.inflate(R.menu.state_menu, menu) updateMenuState(menu) return true } private fun updateMenuState(menu: Menu?) { menu?.let { val editItem = it.findItem(R.id.menu_edit) val saveItem = it.findItem(R.id.menu_save) val cancelItem = it.findItem(R.id.menu_cancel) editItem?.isVisible = !isEditMode saveItem?.isVisible = isEditMode cancelItem?.isVisible = isEditMode } } override fun onOptionsItemSelected(item: MenuItem): Boolean { return when (item.itemId) { R.id.menu_edit -\u0026gt; { enterEditMode() true } R.id.menu_save -\u0026gt; { saveChanges() true } R.id.menu_cancel -\u0026gt; { cancelEdit() true } else -\u0026gt; super.onOptionsItemSelected(item) } } private fun enterEditMode() { isEditMode = true invalidateOptionsMenu() Toast.makeText(this, \u0026#34;è¿›å…¥ç¼–è¾‘æ¨¡å¼\u0026#34;, Toast.LENGTH_SHORT).show() } private fun saveChanges() { isEditMode = false invalidateOptionsMenu() Toast.makeText(this, \u0026#34;ä¿å­˜æ›´æ”¹\u0026#34;, Toast.LENGTH_SHORT).show() } private fun cancelEdit() { isEditMode = false invalidateOptionsMenu() Toast.makeText(this, \u0026#34;å–æ¶ˆç¼–è¾‘\u0026#34;, Toast.LENGTH_SHORT).show() } } ğŸ“‹ æ€»ç»“ # Android Menu ç»„ä»¶æä¾›äº†ä¸°å¯Œçš„èœå•äº¤äº’æ–¹å¼ï¼š\nOptionMenuï¼šä¸»èœå•ï¼Œæ˜¾ç¤ºåœ¨ ActionBar ä¸­ ContextMenuï¼šä¸Šä¸‹æ–‡èœå•ï¼Œé•¿æŒ‰è§¦å‘ PopupMenuï¼šå¼¹å‡ºèœå•ï¼Œç»‘å®šåˆ°ç‰¹å®š View åŠ¨æ€åˆ›å»ºï¼šæ”¯æŒç¨‹åºåŠ¨æ€æ·»åŠ èœå•é¡¹ çŠ¶æ€ç®¡ç†ï¼šæ”¯æŒèœå•é¡¹çŠ¶æ€åˆ‡æ¢å’Œåˆ†ç»„ æŒæ¡è¿™äº›èœå•ç»„ä»¶çš„ä½¿ç”¨æ–¹æ³•å¯¹äºåˆ›å»ºè‰¯å¥½çš„ç”¨æˆ·äº¤äº’ä½“éªŒè‡³å…³é‡è¦ã€‚\n","date":"24 October 2025","externalUrl":null,"permalink":"/posts/android/12---menu%E8%8F%9C%E5%8D%95%E7%BB%84%E4%BB%B6/","section":"Posts","summary":"è¯¦ç»†ä»‹ç»Android Menuèœå•ç»„ä»¶çš„ä½¿ç”¨æ–¹æ³•ï¼ŒåŒ…æ‹¬OptionMenuã€ContextMenuå’ŒPopupMenu","title":"Menu èœå•ç»„ä»¶","type":"posts"},{"content":" PopupWindow å¼¹çª— # PopupWindow æ˜¯ Android ä¸­ç”¨äºæ˜¾ç¤ºæµ®åŠ¨çª—å£çš„ç»„ä»¶ï¼Œå¯ä»¥åœ¨æŒ‡å®šä½ç½®å¼¹å‡ºè‡ªå®šä¹‰çš„è§†å›¾å†…å®¹ã€‚\nPopupWindow åŸºæœ¬æ¦‚å¿µ # PopupWindow æ˜¯ä¸€ä¸ªå¯ä»¥åœ¨å½“å‰ Activity ä¹‹ä¸Šæ˜¾ç¤ºçš„æµ®åŠ¨çª—å£ï¼Œå¸¸ç”¨äºæ˜¾ç¤ºèœå•ã€æç¤ºä¿¡æ¯æˆ–è‡ªå®šä¹‰å†…å®¹ã€‚\nåŸºæœ¬å±æ€§ # å±æ€§ è¯´æ˜ ç¤ºä¾‹å€¼ width å¼¹çª—å®½åº¦ ViewGroup.LayoutParams.WRAP_CONTENT height å¼¹çª—é«˜åº¦ ViewGroup.LayoutParams.WRAP_CONTENT focusable æ˜¯å¦å¯è·å¾—ç„¦ç‚¹ true, false outsideTouchable å¤–éƒ¨ç‚¹å‡»æ˜¯å¦å…³é—­ true, false animationStyle åŠ¨ç”»æ ·å¼ R.style.PopupAnimation åŸºæœ¬ä½¿ç”¨ç¤ºä¾‹ # 1. ç®€å•å¼¹çª— # class PopupWindowActivity : AppCompatActivity() { private lateinit var showPopupButton: Button private lateinit var popupWindow: PopupWindow override fun onCreate(savedInstanceState: Bundle?) { super.onCreate(savedInstanceState) setContentView(R.layout.activity_popup_window) initViews() setupPopupWindow() setupClickListeners() } private fun initViews() { showPopupButton = findViewById(R.id.showPopupButton) } private fun setupPopupWindow() { // åˆ›å»ºå¼¹çª—å†…å®¹è§†å›¾ val popupView = layoutInflater.inflate(R.layout.popup_content, null) // åˆ›å»º PopupWindow popupWindow = PopupWindow( popupView, ViewGroup.LayoutParams.WRAP_CONTENT, ViewGroup.LayoutParams.WRAP_CONTENT, true ) // è®¾ç½®å¼¹çª—å±æ€§ popupWindow.isOutsideTouchable = true popupWindow.isTouchable = true // è®¾ç½®å¼¹çª—å†…å®¹ç‚¹å‡»äº‹ä»¶ setupPopupContent(popupView) } private fun setupPopupContent(popupView: View) { val item1 = popupView.findViewById\u0026lt;TextView\u0026gt;(R.id.item1) val item2 = popupView.findViewById\u0026lt;TextView\u0026gt;(R.id.item2) val item3 = popupView.findViewById\u0026lt;TextView\u0026gt;(R.id.item3) item1.setOnClickListener { Toast.makeText(this, \u0026#34;ç‚¹å‡»äº†é€‰é¡¹1\u0026#34;, Toast.LENGTH_SHORT).show() popupWindow.dismiss() } item2.setOnClickListener { Toast.makeText(this, \u0026#34;ç‚¹å‡»äº†é€‰é¡¹2\u0026#34;, Toast.LENGTH_SHORT).show() popupWindow.dismiss() } item3.setOnClickListener { Toast.makeText(this, \u0026#34;ç‚¹å‡»äº†é€‰é¡¹3\u0026#34;, Toast.LENGTH_SHORT).show() popupWindow.dismiss() } } private fun setupClickListeners() { showPopupButton.setOnClickListener { showPopupWindow(it) } } private fun showPopupWindow(anchorView: View) { popupWindow.showAsDropDown(anchorView) } } 2. è‡ªå®šä¹‰ä½ç½®å¼¹çª— # class CustomPositionPopupActivity : AppCompatActivity() { private lateinit var showPopupButton: Button private lateinit var popupWindow: PopupWindow override fun onCreate(savedInstanceState: Bundle?) { super.onCreate(savedInstanceState) setContentView(R.layout.activity_custom_position_popup) initViews() setupPopupWindow() setupClickListeners() } private fun initViews() { showPopupButton = findViewById(R.id.showPopupButton) } private fun setupPopupWindow() { val popupView = layoutInflater.inflate(R.layout.popup_custom_content, null) popupWindow = PopupWindow( popupView, ViewGroup.LayoutParams.WRAP_CONTENT, ViewGroup.LayoutParams.WRAP_CONTENT, true ) popupWindow.isOutsideTouchable = true popupWindow.isTouchable = true setupPopupContent(popupView) } private fun setupPopupContent(popupView: View) { val editText = popupView.findViewById\u0026lt;EditText\u0026gt;(R.id.editText) val confirmButton = popupView.findViewById\u0026lt;Button\u0026gt;(R.id.confirmButton) val cancelButton = popupView.findViewById\u0026lt;Button\u0026gt;(R.id.cancelButton) confirmButton.setOnClickListener { val inputText = editText.text.toString() if (inputText.isNotEmpty()) { Toast.makeText(this, \u0026#34;è¾“å…¥å†…å®¹: $inputText\u0026#34;, Toast.LENGTH_SHORT).show() popupWindow.dismiss() } else { Toast.makeText(this, \u0026#34;è¯·è¾“å…¥å†…å®¹\u0026#34;, Toast.LENGTH_SHORT).show() } } cancelButton.setOnClickListener { popupWindow.dismiss() } } private fun setupClickListeners() { showPopupButton.setOnClickListener { showPopupAtCustomPosition(it) } } private fun showPopupAtCustomPosition(anchorView: View) { // è·å–é”šç‚¹è§†å›¾çš„ä½ç½® val location = IntArray(2) anchorView.getLocationOnScreen(location) // è®¡ç®—å¼¹çª—ä½ç½®ï¼ˆåœ¨é”šç‚¹è§†å›¾ä¸Šæ–¹ï¼‰ val x = location[0] val y = location[1] - dpToPx(200) // å‘ä¸Šåç§»200dp popupWindow.showAtLocation(anchorView, Gravity.NO_GRAVITY, x, y) } private fun dpToPx(dp: Int): Int { return (dp * resources.displayMetrics.density).toInt() } } 3. å¸¦åŠ¨ç”»çš„å¼¹çª— # class AnimatedPopupActivity : AppCompatActivity() { private lateinit var showAnimatedPopupButton: Button private lateinit var popupWindow: PopupWindow override fun onCreate(savedInstanceState: Bundle?) { super.onCreate(savedInstanceState) setContentView(R.layout.activity_animated_popup) initViews() setupAnimatedPopupWindow() setupClickListeners() } private fun initViews() { showAnimatedPopupButton = findViewById(R.id.showAnimatedPopupButton) } private fun setupAnimatedPopupWindow() { val popupView = layoutInflater.inflate(R.layout.popup_animated_content, null) popupWindow = PopupWindow( popupView, ViewGroup.LayoutParams.WRAP_CONTENT, ViewGroup.LayoutParams.WRAP_CONTENT, true ) popupWindow.isOutsideTouchable = true popupWindow.isTouchable = true // è®¾ç½®åŠ¨ç”»æ ·å¼ popupWindow.animationStyle = R.style.PopupAnimation setupPopupContent(popupView) } private fun setupPopupContent(popupView: View) { val titleText = popupView.findViewById\u0026lt;TextView\u0026gt;(R.id.titleText) val contentText = popupView.findViewById\u0026lt;TextView\u0026gt;(R.id.contentText) val closeButton = popupView.findViewById\u0026lt;Button\u0026gt;(R.id.closeButton) titleText.text = \u0026#34;åŠ¨ç”»å¼¹çª—\u0026#34; contentText.text = \u0026#34;è¿™æ˜¯ä¸€ä¸ªå¸¦æœ‰åŠ¨ç”»æ•ˆæœçš„å¼¹çª—\u0026#34; closeButton.setOnClickListener { popupWindow.dismiss() } } private fun setupClickListeners() { showAnimatedPopupButton.setOnClickListener { showAnimatedPopup(it) } } private fun showAnimatedPopup(anchorView: View) { popupWindow.showAsDropDown(anchorView, 0, -dpToPx(10)) } private fun dpToPx(dp: Int): Int { return (dp * resources.displayMetrics.density).toInt() } } å¼¹çª—åŠ¨ç”» # 1. åˆ›å»ºåŠ¨ç”»èµ„æº # \u0026lt;!-- res/anim/popup_enter.xml --\u0026gt; \u0026lt;set xmlns:android=\u0026#34;http://schemas.android.com/apk/res/android\u0026#34;\u0026gt; \u0026lt;alpha android:duration=\u0026#34;300\u0026#34; android:fromAlpha=\u0026#34;0.0\u0026#34; android:toAlpha=\u0026#34;1.0\u0026#34; /\u0026gt; \u0026lt;scale android:duration=\u0026#34;300\u0026#34; android:fromXScale=\u0026#34;0.5\u0026#34; android:fromYScale=\u0026#34;0.5\u0026#34; android:pivotX=\u0026#34;50%\u0026#34; android:pivotY=\u0026#34;50%\u0026#34; android:toXScale=\u0026#34;1.0\u0026#34; android:toYScale=\u0026#34;1.0\u0026#34; /\u0026gt; \u0026lt;/set\u0026gt; \u0026lt;!-- res/anim/popup_exit.xml --\u0026gt; \u0026lt;set xmlns:android=\u0026#34;http://schemas.android.com/apk/res/android\u0026#34;\u0026gt; \u0026lt;alpha android:duration=\u0026#34;200\u0026#34; android:fromAlpha=\u0026#34;1.0\u0026#34; android:toAlpha=\u0026#34;0.0\u0026#34; /\u0026gt; \u0026lt;scale android:duration=\u0026#34;200\u0026#34; android:fromXScale=\u0026#34;1.0\u0026#34; android:fromYScale=\u0026#34;1.0\u0026#34; android:pivotX=\u0026#34;50%\u0026#34; android:pivotY=\u0026#34;50%\u0026#34; android:toXScale=\u0026#34;0.5\u0026#34; android:toYScale=\u0026#34;0.5\u0026#34; /\u0026gt; \u0026lt;/set\u0026gt; 2. åˆ›å»ºåŠ¨ç”»æ ·å¼ # \u0026lt;!-- res/values/styles.xml --\u0026gt; \u0026lt;style name=\u0026#34;PopupAnimation\u0026#34;\u0026gt; \u0026lt;item name=\u0026#34;android:windowEnterAnimation\u0026#34;\u0026gt;@anim/popup_enter\u0026lt;/item\u0026gt; \u0026lt;item name=\u0026#34;android:windowExitAnimation\u0026#34;\u0026gt;@anim/popup_exit\u0026lt;/item\u0026gt; \u0026lt;/style\u0026gt; 3. ä½¿ç”¨åŠ¨ç”»å¼¹çª— # class AnimationPopupActivity : AppCompatActivity() { private lateinit var showAnimationPopupButton: Button private lateinit var popupWindow: PopupWindow override fun onCreate(savedInstanceState: Bundle?) { super.onCreate(savedInstanceState) setContentView(R.layout.activity_animation_popup) initViews() setupAnimationPopupWindow() setupClickListeners() } private fun initViews() { showAnimationPopupButton = findViewById(R.id.showAnimationPopupButton) } private fun setupAnimationPopupWindow() { val popupView = layoutInflater.inflate(R.layout.popup_animation_content, null) popupWindow = PopupWindow( popupView, ViewGroup.LayoutParams.WRAP_CONTENT, ViewGroup.LayoutParams.WRAP_CONTENT, true ) popupWindow.isOutsideTouchable = true popupWindow.isTouchable = true popupWindow.animationStyle = R.style.PopupAnimation setupPopupContent(popupView) } private fun setupPopupContent(popupView: View) { val slideButton = popupView.findViewById\u0026lt;Button\u0026gt;(R.id.slideButton) val fadeButton = popupView.findViewById\u0026lt;Button\u0026gt;(R.id.fadeButton) val scaleButton = popupView.findViewById\u0026lt;Button\u0026gt;(R.id.scaleButton) slideButton.setOnClickListener { showSlideAnimation() } fadeButton.setOnClickListener { showFadeAnimation() } scaleButton.setOnClickListener { showScaleAnimation() } } private fun setupClickListeners() { showAnimationPopupButton.setOnClickListener { showAnimationPopup(it) } } private fun showAnimationPopup(anchorView: View) { popupWindow.showAsDropDown(anchorView) } private fun showSlideAnimation() { Toast.makeText(this, \u0026#34;æ»‘åŠ¨åŠ¨ç”»\u0026#34;, Toast.LENGTH_SHORT).show() } private fun showFadeAnimation() { Toast.makeText(this, \u0026#34;æ·¡å…¥æ·¡å‡ºåŠ¨ç”»\u0026#34;, Toast.LENGTH_SHORT).show() } private fun showScaleAnimation() { Toast.makeText(this, \u0026#34;ç¼©æ”¾åŠ¨ç”»\u0026#34;, Toast.LENGTH_SHORT).show() } } å®é™…åº”ç”¨åœºæ™¯ # 1. é•¿æŒ‰èœå•å¼¹çª— # class LongClickPopupActivity : AppCompatActivity() { private lateinit var longClickView: View private lateinit var popupWindow: PopupWindow override fun onCreate(savedInstanceState: Bundle?) { super.onCreate(savedInstanceState) setContentView(R.layout.activity_long_click_popup) initViews() setupPopupWindow() setupLongClickListener() } private fun initViews() { longClickView = findViewById(R.id.longClickView) } private fun setupPopupWindow() { val popupView = layoutInflater.inflate(R.layout.popup_long_click_menu, null) popupWindow = PopupWindow( popupView, ViewGroup.LayoutParams.WRAP_CONTENT, ViewGroup.LayoutParams.WRAP_CONTENT, true ) popupWindow.isOutsideTouchable = true popupWindow.isTouchable = true setupMenuItems(popupView) } private fun setupMenuItems(popupView: View) { val copyItem = popupView.findViewById\u0026lt;TextView\u0026gt;(R.id.copyItem) val pasteItem = popupView.findViewById\u0026lt;TextView\u0026gt;(R.id.pasteItem) val shareItem = popupView.findViewById\u0026lt;TextView\u0026gt;(R.id.shareItem) val deleteItem = popupView.findViewById\u0026lt;TextView\u0026gt;(R.id.deleteItem) copyItem.setOnClickListener { Toast.makeText(this, \u0026#34;å¤åˆ¶\u0026#34;, Toast.LENGTH_SHORT).show() popupWindow.dismiss() } pasteItem.setOnClickListener { Toast.makeText(this, \u0026#34;ç²˜è´´\u0026#34;, Toast.LENGTH_SHORT).show() popupWindow.dismiss() } shareItem.setOnClickListener { Toast.makeText(this, \u0026#34;åˆ†äº«\u0026#34;, Toast.LENGTH_SHORT).show() popupWindow.dismiss() } deleteItem.setOnClickListener { Toast.makeText(this, \u0026#34;åˆ é™¤\u0026#34;, Toast.LENGTH_SHORT).show() popupWindow.dismiss() } } private fun setupLongClickListener() { longClickView.setOnLongClickListener { showPopupAtLongClickPosition(it) true } } private fun showPopupAtLongClickPosition(view: View) { val location = IntArray(2) view.getLocationOnScreen(location) val x = location[0] + view.width / 2 val y = location[1] + view.height / 2 popupWindow.showAtLocation(view, Gravity.NO_GRAVITY, x, y) } } 2. æœç´¢å»ºè®®å¼¹çª— # class SearchSuggestionPopupActivity : AppCompatActivity() { private lateinit var searchEditText: EditText private lateinit var popupWindow: PopupWindow private lateinit var suggestionAdapter: ArrayAdapter\u0026lt;String\u0026gt; private val suggestions = listOf( \u0026#34;Androidå¼€å‘\u0026#34;, \u0026#34;Kotlinç¼–ç¨‹\u0026#34;, \u0026#34;JavaåŸºç¡€\u0026#34;, \u0026#34;ç§»åŠ¨å¼€å‘\u0026#34;, \u0026#34;UIè®¾è®¡\u0026#34;, \u0026#34;æ•°æ®åº“\u0026#34;, \u0026#34;ç½‘ç»œç¼–ç¨‹\u0026#34;, \u0026#34;ç®—æ³•\u0026#34; ) override fun onCreate(savedInstanceState: Bundle?) { super.onCreate(savedInstanceState) setContentView(R.layout.activity_search_suggestion_popup) initViews() setupPopupWindow() setupSearchListener() } private fun initViews() { searchEditText = findViewById(R.id.searchEditText) } private fun setupPopupWindow() { val popupView = layoutInflater.inflate(R.layout.popup_search_suggestions, null) val listView = popupView.findViewById\u0026lt;ListView\u0026gt;(R.id.suggestionListView) suggestionAdapter = ArrayAdapter(this, android.R.layout.simple_list_item_1, mutableListOf()) listView.adapter = suggestionAdapter popupWindow = PopupWindow( popupView, ViewGroup.LayoutParams.MATCH_PARENT, ViewGroup.LayoutParams.WRAP_CONTENT, true ) popupWindow.isOutsideTouchable = true popupWindow.isTouchable = true listView.setOnItemClickListener { _, _, position, _ -\u0026gt; val selectedSuggestion = suggestionAdapter.getItem(position) searchEditText.setText(selectedSuggestion) popupWindow.dismiss() } } private fun setupSearchListener() { searchEditText.addTextChangedListener(object : TextWatcher { override fun beforeTextChanged(s: CharSequence?, start: Int, count: Int, after: Int) {} override fun onTextChanged(s: CharSequence?, start: Int, before: Int, count: Int) { val query = s.toString() if (query.isNotEmpty()) { showSuggestions(query) } else { popupWindow.dismiss() } } override fun afterTextChanged(s: Editable?) {} }) } private fun showSuggestions(query: String) { val filteredSuggestions = suggestions.filter { it.contains(query, ignoreCase = true) } suggestionAdapter.clear() suggestionAdapter.addAll(filteredSuggestions) suggestionAdapter.notifyDataSetChanged() if (filteredSuggestions.isNotEmpty()) { popupWindow.showAsDropDown(searchEditText) } else { popupWindow.dismiss() } } } 3. å·¥å…·æç¤ºå¼¹çª— # class TooltipPopupActivity : AppCompatActivity() { private lateinit var showTooltipButton: Button private lateinit var popupWindow: PopupWindow override fun onCreate(savedInstanceState: Bundle?) { super.onCreate(savedInstanceState) setContentView(R.layout.activity_tooltip_popup) initViews() setupTooltipPopupWindow() setupClickListeners() } private fun initViews() { showTooltipButton = findViewById(R.id.showTooltipButton) } private fun setupTooltipPopupWindow() { val popupView = layoutInflater.inflate(R.layout.popup_tooltip, null) popupWindow = PopupWindow( popupView, ViewGroup.LayoutParams.WRAP_CONTENT, ViewGroup.LayoutParams.WRAP_CONTENT, true ) popupWindow.isOutsideTouchable = true popupWindow.isTouchable = true val tooltipText = popupView.findViewById\u0026lt;TextView\u0026gt;(R.id.tooltipText) tooltipText.text = \u0026#34;è¿™æ˜¯ä¸€ä¸ªå·¥å…·æç¤ºå¼¹çª—ï¼Œç”¨äºæ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯\u0026#34; } private fun setupClickListeners() { showTooltipButton.setOnClickListener { showTooltip(it) } } private fun showTooltip(anchorView: View) { val location = IntArray(2) anchorView.getLocationOnScreen(location) val x = location[0] + anchorView.width / 2 val y = location[1] - dpToPx(10) popupWindow.showAtLocation(anchorView, Gravity.NO_GRAVITY, x, y) // 3ç§’åè‡ªåŠ¨å…³é—­ Handler(Looper.getMainLooper()).postDelayed({ if (popupWindow.isShowing) { popupWindow.dismiss() } }, 3000) } private fun dpToPx(dp: Int): Int { return (dp * resources.displayMetrics.density).toInt() } } PopupWindow æœ€ä½³å®è·µ # 1. å¼¹çª—ç®¡ç†ç±» # class PopupWindowManager { private var currentPopup: PopupWindow? = null fun showPopup( context: Context, contentView: View, anchorView: View, width: Int = ViewGroup.LayoutParams.WRAP_CONTENT, height: Int = ViewGroup.LayoutParams.WRAP_CONTENT, animationStyle: Int = 0 ) { dismissCurrentPopup() currentPopup = PopupWindow(contentView, width, height, true).apply { isOutsideTouchable = true isTouchable = true if (animationStyle != 0) { this.animationStyle = animationStyle } } currentPopup?.showAsDropDown(anchorView) } fun dismissCurrentPopup() { currentPopup?.dismiss() currentPopup = null } } 2. å¼¹çª—å·¥å…·ç±» # object PopupWindowUtils { fun createMenuPopup( context: Context, menuItems: List\u0026lt;String\u0026gt;, onItemClick: (String) -\u0026gt; Unit ): PopupWindow { val popupView = LayoutInflater.from(context).inflate(R.layout.popup_menu, null) val listView = popupView.findViewById\u0026lt;ListView\u0026gt;(R.id.menuListView) val adapter = ArrayAdapter(context, android.R.layout.simple_list_item_1, menuItems) listView.adapter = adapter listView.setOnItemClickListener { _, _, position, _ -\u0026gt; onItemClick(menuItems[position]) } return PopupWindow( popupView, ViewGroup.LayoutParams.WRAP_CONTENT, ViewGroup.LayoutParams.WRAP_CONTENT, true ).apply { isOutsideTouchable = true isTouchable = true } } fun createTooltipPopup( context: Context, message: String ): PopupWindow { val popupView = LayoutInflater.from(context).inflate(R.layout.popup_tooltip, null) val textView = popupView.findViewById\u0026lt;TextView\u0026gt;(R.id.tooltipText) textView.text = message return PopupWindow( popupView, ViewGroup.LayoutParams.WRAP_CONTENT, ViewGroup.LayoutParams.WRAP_CONTENT, true ).apply { isOutsideTouchable = true isTouchable = true } } } ğŸ“‹ æ€»ç»“ # PopupWindow æ˜¯ Android å¼€å‘ä¸­é‡è¦çš„æµ®åŠ¨çª—å£ç»„ä»¶ï¼š\nåŸºæœ¬ç”¨æ³•ï¼šåˆ›å»ºå¼¹çª—ã€è®¾ç½®å±æ€§ã€æ˜¾ç¤ºå’Œå…³é—­ ä½ç½®æ§åˆ¶ï¼šæ”¯æŒå¤šç§æ˜¾ç¤ºä½ç½®å’Œé”šç‚¹ åŠ¨ç”»æ•ˆæœï¼šæ”¯æŒè¿›å…¥å’Œé€€å‡ºåŠ¨ç”» å®é™…åº”ç”¨ï¼šé•¿æŒ‰èœå•ã€æœç´¢å»ºè®®ã€å·¥å…·æç¤ºç­‰åœºæ™¯ æœ€ä½³å®è·µï¼šå¼¹çª—ç®¡ç†ã€å·¥å…·ç±»å°è£… æŒæ¡ PopupWindow çš„ä½¿ç”¨æ–¹æ³•å¯¹äºåˆ›å»ºä¸°å¯Œçš„ç”¨æˆ·äº¤äº’ä½“éªŒè‡³å…³é‡è¦ã€‚\n","date":"24 October 2025","externalUrl":null,"permalink":"/posts/android/14---popupwindow-%E5%BC%B9%E7%AA%97/","section":"Posts","summary":"è¯¦ç»†ä»‹ç»Android PopupWindowå¼¹çª—çš„ä½¿ç”¨æ–¹æ³•ã€åŠ¨ç”»æ•ˆæœå’Œå®é™…åº”ç”¨åœºæ™¯","title":"PopupWindow å¼¹çª—","type":"posts"},{"content":"","date":"24 October 2025","externalUrl":null,"permalink":"/posts/","section":"Posts","summary":"","title":"Posts","type":"posts"},{"content":" ProgressBar è¿›åº¦æ¡æ§ä»¶ # ProgressBar æ˜¯ Android ä¸­ç”¨äºæ˜¾ç¤ºè¿›åº¦çš„æ§ä»¶ï¼Œæ”¯æŒå¤šç§æ ·å¼å’ŒåŠ¨ç”»æ•ˆæœã€‚\nProgressBar åŸºæœ¬å±æ€§ # \u0026lt;ProgressBar android:id=\u0026#34;@+id/progressBar\u0026#34; android:layout_width=\u0026#34;wrap_content\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:layout_gravity=\u0026#34;center\u0026#34; /\u0026gt; ProgressBar æ ·å¼ç±»å‹ # 1. é»˜è®¤åœ†å½¢è¿›åº¦æ¡ # \u0026lt;ProgressBar android:layout_width=\u0026#34;wrap_content\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:layout_gravity=\u0026#34;center\u0026#34; /\u0026gt; 2. æ°´å¹³è¿›åº¦æ¡ # \u0026lt;ProgressBar android:id=\u0026#34;@+id/horizontalProgressBar\u0026#34; android:layout_width=\u0026#34;match_parent\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; style=\u0026#34;?android:attr/progressBarStyleHorizontal\u0026#34; android:progress=\u0026#34;30\u0026#34; android:max=\u0026#34;100\u0026#34; android:layout_margin=\u0026#34;16dp\u0026#34; /\u0026gt; 3. å°å°ºå¯¸è¿›åº¦æ¡ # \u0026lt;ProgressBar android:layout_width=\u0026#34;wrap_content\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; style=\u0026#34;?android:attr/progressBarStyleSmall\u0026#34; android:layout_gravity=\u0026#34;center\u0026#34; /\u0026gt; 4. å¤§å°ºå¯¸è¿›åº¦æ¡ # \u0026lt;ProgressBar android:layout_width=\u0026#34;wrap_content\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; style=\u0026#34;?android:attr/progressBarStyleLarge\u0026#34; android:layout_gravity=\u0026#34;center\u0026#34; /\u0026gt; Kotlin ä»£ç ç¤ºä¾‹ # åŸºæœ¬ä½¿ç”¨ # class ProgressBarActivity : AppCompatActivity() { private lateinit var progressBar: ProgressBar private lateinit var horizontalProgressBar: ProgressBar private lateinit var startButton: Button private lateinit var resetButton: Button override fun onCreate(savedInstanceState: Bundle?) { super.onCreate(savedInstanceState) setContentView(R.layout.activity_progress_bar) initViews() setupClickListeners() } private fun initViews() { progressBar = findViewById(R.id.progressBar) horizontalProgressBar = findViewById(R.id.horizontalProgressBar) startButton = findViewById(R.id.startButton) resetButton = findViewById(R.id.resetButton) } private fun setupClickListeners() { startButton.setOnClickListener { startProgress() } resetButton.setOnClickListener { resetProgress() } } private fun startProgress() { // æ˜¾ç¤ºè¿›åº¦æ¡ progressBar.visibility = View.VISIBLE // æ¨¡æ‹Ÿè¿›åº¦æ›´æ–° simulateProgress() } private fun simulateProgress() { val handler = Handler(Looper.getMainLooper()) var progress = 0 val runnable = object : Runnable { override fun run() { progress += 10 horizontalProgressBar.progress = progress if (progress \u0026lt; 100) { handler.postDelayed(this, 200) } else { // è¿›åº¦å®Œæˆï¼Œéšè—åœ†å½¢è¿›åº¦æ¡ progressBar.visibility = View.GONE Toast.makeText(this@ProgressBarActivity, \u0026#34;è¿›åº¦å®Œæˆï¼\u0026#34;, Toast.LENGTH_SHORT).show() } } } handler.post(runnable) } private fun resetProgress() { horizontalProgressBar.progress = 0 progressBar.visibility = View.GONE } } è‡ªå®šä¹‰è¿›åº¦æ¡ # class CustomProgressBarActivity : AppCompatActivity() { private lateinit var customProgressBar: ProgressBar private lateinit var seekBar: SeekBar private lateinit var progressText: TextView override fun onCreate(savedInstanceState: Bundle?) { super.onCreate(savedInstanceState) setContentView(R.layout.activity_custom_progress_bar) initViews() setupSeekBar() } private fun initViews() { customProgressBar = findViewById(R.id.customProgressBar) seekBar = findViewById(R.id.seekBar) progressText = findViewById(R.id.progressText) } private fun setupSeekBar() { seekBar.max = 100 seekBar.progress = 0 seekBar.setOnSeekBarChangeListener(object : SeekBar.OnSeekBarChangeListener { override fun onProgressChanged(seekBar: SeekBar?, progress: Int, fromUser: Boolean) { customProgressBar.progress = progress progressText.text = \u0026#34;è¿›åº¦: $progress%\u0026#34; } override fun onStartTrackingTouch(seekBar: SeekBar?) { // å¼€å§‹æ‹–æ‹½ } override fun onStopTrackingTouch(seekBar: SeekBar?) { // åœæ­¢æ‹–æ‹½ } }) } } æ–‡ä»¶ä¸‹è½½è¿›åº¦ç¤ºä¾‹ # class DownloadActivity : AppCompatActivity() { private lateinit var downloadProgressBar: ProgressBar private lateinit var downloadButton: Button private lateinit var progressText: TextView private lateinit var statusText: TextView private var isDownloading = false override fun onCreate(savedInstanceState: Bundle?) { super.onCreate(savedInstanceState) setContentView(R.layout.activity_download) initViews() setupClickListeners() } private fun initViews() { downloadProgressBar = findViewById(R.id.downloadProgressBar) downloadButton = findViewById(R.id.downloadButton) progressText = findViewById(R.id.progressText) statusText = findViewById(R.id.statusText) downloadProgressBar.max = 100 downloadProgressBar.progress = 0 } private fun setupClickListeners() { downloadButton.setOnClickListener { if (!isDownloading) { startDownload() } else { cancelDownload() } } } private fun startDownload() { isDownloading = true downloadButton.text = \u0026#34;å–æ¶ˆä¸‹è½½\u0026#34; statusText.text = \u0026#34;æ­£åœ¨ä¸‹è½½...\u0026#34; // æ¨¡æ‹Ÿæ–‡ä»¶ä¸‹è½½ simulateFileDownload() } private fun simulateFileDownload() { val handler = Handler(Looper.getMainLooper()) var progress = 0 val runnable = object : Runnable { override fun run() { if (isDownloading \u0026amp;\u0026amp; progress \u0026lt; 100) { progress += 2 downloadProgressBar.progress = progress progressText.text = \u0026#34;ä¸‹è½½è¿›åº¦: $progress%\u0026#34; handler.postDelayed(this, 100) } else if (progress \u0026gt;= 100) { downloadComplete() } } } handler.post(runnable) } private fun downloadComplete() { isDownloading = false downloadButton.text = \u0026#34;å¼€å§‹ä¸‹è½½\u0026#34; statusText.text = \u0026#34;ä¸‹è½½å®Œæˆï¼\u0026#34; Toast.makeText(this, \u0026#34;æ–‡ä»¶ä¸‹è½½å®Œæˆ\u0026#34;, Toast.LENGTH_SHORT).show() } private fun cancelDownload() { isDownloading = false downloadButton.text = \u0026#34;å¼€å§‹ä¸‹è½½\u0026#34; statusText.text = \u0026#34;ä¸‹è½½å·²å–æ¶ˆ\u0026#34; downloadProgressBar.progress = 0 progressText.text = \u0026#34;ä¸‹è½½è¿›åº¦: 0%\u0026#34; } } å®é™…åº”ç”¨åœºæ™¯ # 1. åº”ç”¨å¯åŠ¨é¡µé¢ # \u0026lt;LinearLayout android:layout_width=\u0026#34;match_parent\u0026#34; android:layout_height=\u0026#34;match_parent\u0026#34; android:orientation=\u0026#34;vertical\u0026#34; android:gravity=\u0026#34;center\u0026#34; android:background=\u0026#34;@color/primary\u0026#34;\u0026gt; \u0026lt;ImageView android:layout_width=\u0026#34;120dp\u0026#34; android:layout_height=\u0026#34;120dp\u0026#34; android:src=\u0026#34;@drawable/app_logo\u0026#34; android:layout_marginBottom=\u0026#34;32dp\u0026#34; /\u0026gt; \u0026lt;TextView android:layout_width=\u0026#34;wrap_content\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:text=\u0026#34;æ­£åœ¨åŠ è½½...\u0026#34; android:textSize=\u0026#34;16sp\u0026#34; android:textColor=\u0026#34;@color/white\u0026#34; android:layout_marginBottom=\u0026#34;16dp\u0026#34; /\u0026gt; \u0026lt;ProgressBar android:layout_width=\u0026#34;wrap_content\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:indeterminateTint=\u0026#34;@color/white\u0026#34; /\u0026gt; \u0026lt;/LinearLayout\u0026gt; 2. æ–‡ä»¶ä¸Šä¼ è¿›åº¦ # class FileUploadActivity : AppCompatActivity() { private lateinit var uploadProgressBar: ProgressBar private lateinit var uploadButton: Button private lateinit var progressText: TextView override fun onCreate(savedInstanceState: Bundle?) { super.onCreate(savedInstanceState) setContentView(R.layout.activity_file_upload) initViews() setupUploadButton() } private fun initViews() { uploadProgressBar = findViewById(R.id.uploadProgressBar) uploadButton = findViewById(R.id.uploadButton) progressText = findViewById(R.id.progressText) } private fun setupUploadButton() { uploadButton.setOnClickListener { uploadFile() } } private fun uploadFile() { uploadButton.isEnabled = false uploadButton.text = \u0026#34;ä¸Šä¼ ä¸­...\u0026#34; // æ¨¡æ‹Ÿæ–‡ä»¶ä¸Šä¼  simulateFileUpload() } private fun simulateFileUpload() { val handler = Handler(Looper.getMainLooper()) var progress = 0 val runnable = object : Runnable { override fun run() { progress += 5 uploadProgressBar.progress = progress progressText.text = \u0026#34;ä¸Šä¼ è¿›åº¦: $progress%\u0026#34; if (progress \u0026lt; 100) { handler.postDelayed(this, 300) } else { uploadComplete() } } } handler.post(runnable) } private fun uploadComplete() { uploadButton.isEnabled = true uploadButton.text = \u0026#34;ä¸Šä¼ æ–‡ä»¶\u0026#34; Toast.makeText(this, \u0026#34;æ–‡ä»¶ä¸Šä¼ æˆåŠŸ\u0026#34;, Toast.LENGTH_SHORT).show() } } 3. æ•°æ®åŒæ­¥è¿›åº¦ # class DataSyncActivity : AppCompatActivity() { private lateinit var syncProgressBar: ProgressBar private lateinit var syncButton: Button private lateinit var syncStatusText: TextView override fun onCreate(savedInstanceState: Bundle?) { super.onCreate(savedInstanceState) setContentView(R.layout.activity_data_sync) initViews() setupSyncButton() } private fun initViews() { syncProgressBar = findViewById(R.id.syncProgressBar) syncButton = findViewById(R.id.syncButton) syncStatusText = findViewById(R.id.syncStatusText) } private fun setupSyncButton() { syncButton.setOnClickListener { startDataSync() } } private fun startDataSync() { syncButton.isEnabled = false syncStatusText.text = \u0026#34;æ­£åœ¨åŒæ­¥æ•°æ®...\u0026#34; // æ¨¡æ‹Ÿæ•°æ®åŒæ­¥ simulateDataSync() } private fun simulateDataSync() { val syncSteps = listOf( \u0026#34;è¿æ¥æœåŠ¡å™¨\u0026#34; to 20, \u0026#34;ä¸‹è½½ç”¨æˆ·æ•°æ®\u0026#34; to 40, \u0026#34;åŒæ­¥è®¾ç½®\u0026#34; to 60, \u0026#34;æ›´æ–°ç¼“å­˜\u0026#34; to 80, \u0026#34;å®ŒæˆåŒæ­¥\u0026#34; to 100 ) var currentStep = 0 val handler = Handler(Looper.getMainLooper()) val runnable = object : Runnable { override fun run() { if (currentStep \u0026lt; syncSteps.size) { val (stepName, progress) = syncSteps[currentStep] syncStatusText.text = stepName syncProgressBar.progress = progress currentStep++ handler.postDelayed(this, 1000) } else { syncComplete() } } } handler.post(runnable) } private fun syncComplete() { syncButton.isEnabled = true syncStatusText.text = \u0026#34;æ•°æ®åŒæ­¥å®Œæˆ\u0026#34; Toast.makeText(this, \u0026#34;æ•°æ®åŒæ­¥æˆåŠŸ\u0026#34;, Toast.LENGTH_SHORT).show() } } è‡ªå®šä¹‰æ ·å¼ # è‡ªå®šä¹‰è¿›åº¦æ¡æ ·å¼ # \u0026lt;!-- res/drawable/progress_bar_background.xml --\u0026gt; \u0026lt;shape xmlns:android=\u0026#34;http://schemas.android.com/apk/res/android\u0026#34; android:shape=\u0026#34;rectangle\u0026#34;\u0026gt; \u0026lt;corners android:radius=\u0026#34;8dp\u0026#34; /\u0026gt; \u0026lt;solid android:color=\u0026#34;#E0E0E0\u0026#34; /\u0026gt; \u0026lt;/shape\u0026gt; \u0026lt;!-- res/drawable/progress_bar_progress.xml --\u0026gt; \u0026lt;shape xmlns:android=\u0026#34;http://schemas.android.com/apk/res/android\u0026#34; android:shape=\u0026#34;rectangle\u0026#34;\u0026gt; \u0026lt;corners android:radius=\u0026#34;8dp\u0026#34; /\u0026gt; \u0026lt;solid android:color=\u0026#34;#2196F3\u0026#34; /\u0026gt; \u0026lt;/shape\u0026gt; \u0026lt;ProgressBar android:id=\u0026#34;@+id/customProgressBar\u0026#34; android:layout_width=\u0026#34;match_parent\u0026#34; android:layout_height=\u0026#34;8dp\u0026#34; style=\u0026#34;?android:attr/progressBarStyleHorizontal\u0026#34; android:progressDrawable=\u0026#34;@drawable/custom_progress_bar\u0026#34; android:max=\u0026#34;100\u0026#34; android:progress=\u0026#34;50\u0026#34; /\u0026gt; è‡ªå®šä¹‰åœ†å½¢è¿›åº¦æ¡ # \u0026lt;!-- res/drawable/circular_progress.xml --\u0026gt; \u0026lt;shape xmlns:android=\u0026#34;http://schemas.android.com/apk/res/android\u0026#34; android:shape=\u0026#34;ring\u0026#34; android:innerRadiusRatio=\u0026#34;3\u0026#34; android:thicknessRatio=\u0026#34;8\u0026#34; android:useLevel=\u0026#34;false\u0026#34;\u0026gt; \u0026lt;solid android:color=\u0026#34;#2196F3\u0026#34; /\u0026gt; \u0026lt;/shape\u0026gt; æ€§èƒ½ä¼˜åŒ–å»ºè®® # 1. é¿å…é¢‘ç¹æ›´æ–° # class OptimizedProgressBar { private var lastUpdateTime = 0L private val UPDATE_INTERVAL = 100L // 100msæ›´æ–°ä¸€æ¬¡ fun updateProgress(progressBar: ProgressBar, progress: Int) { val currentTime = System.currentTimeMillis() if (currentTime - lastUpdateTime \u0026gt;= UPDATE_INTERVAL) { progressBar.progress = progress lastUpdateTime = currentTime } } } 2. ä½¿ç”¨åŠ¨ç”»å¹³æ»‘è¿‡æ¸¡ # class SmoothProgressBar { fun animateProgress(progressBar: ProgressBar, targetProgress: Int) { val animator = ObjectAnimator.ofInt(progressBar, \u0026#34;progress\u0026#34;, progressBar.progress, targetProgress) animator.duration = 300 animator.interpolator = DecelerateInterpolator() animator.start() } } ğŸ“‹ æ€»ç»“ # ProgressBar æ˜¯ Android å¼€å‘ä¸­é‡è¦çš„è¿›åº¦æ˜¾ç¤ºæ§ä»¶ï¼š\nå¤šç§æ ·å¼ï¼šåœ†å½¢ã€æ°´å¹³ã€å¤§å°å°ºå¯¸ç­‰ä¸åŒæ ·å¼ åŠ¨æ€æ›´æ–°ï¼šæ”¯æŒç¨‹åºæ§åˆ¶è¿›åº¦æ›´æ–° å®é™…åº”ç”¨ï¼šæ–‡ä»¶ä¸‹è½½ã€æ•°æ®åŒæ­¥ã€åº”ç”¨å¯åŠ¨ç­‰åœºæ™¯ è‡ªå®šä¹‰æ ·å¼ï¼šæ”¯æŒè‡ªå®šä¹‰å¤–è§‚å’ŒåŠ¨ç”»æ•ˆæœ æ€§èƒ½ä¼˜åŒ–ï¼šåˆç†æ§åˆ¶æ›´æ–°é¢‘ç‡ï¼Œä½¿ç”¨åŠ¨ç”»å¹³æ»‘è¿‡æ¸¡ æŒæ¡ ProgressBar çš„ä½¿ç”¨æ–¹æ³•å¯¹äºæå‡ç”¨æˆ·ä½“éªŒè‡³å…³é‡è¦ã€‚\n","date":"24 October 2025","externalUrl":null,"permalink":"/posts/android/07---progressbar-%E8%BF%9B%E5%BA%A6%E6%9D%A1%E6%8E%A7%E4%BB%B6/","section":"Posts","summary":"è¯¦ç»†ä»‹ç»Android ProgressBarè¿›åº¦æ¡æ§ä»¶çš„ä½¿ç”¨æ–¹æ³•ã€æ ·å¼é…ç½®å’Œå®é™…åº”ç”¨åœºæ™¯","title":"ProgressBar è¿›åº¦æ¡æ§ä»¶","type":"posts"},{"content":" RelativeLayout ç›¸å¯¹å¸ƒå±€ # RelativeLayout æ˜¯ Android ä¸­åŸºäºç›¸å¯¹ä½ç½®çš„å¸ƒå±€å®¹å™¨ï¼Œå­æ§ä»¶é€šè¿‡ç›¸å¯¹å…³ç³»æ¥ç¡®å®šè‡ªå·±çš„ä½ç½®ã€‚\nRelativeLayout åŸºæœ¬å±æ€§ # \u0026lt;RelativeLayout android:id=\u0026#34;@+id/relativeLayout\u0026#34; android:layout_width=\u0026#34;match_parent\u0026#34; android:layout_height=\u0026#34;match_parent\u0026#34; android:padding=\u0026#34;16dp\u0026#34; android:background=\u0026#34;@color/background_color\u0026#34;\u0026gt; \u0026lt;!-- å­æ§ä»¶ --\u0026gt; \u0026lt;/RelativeLayout\u0026gt; ç›¸å¯¹çˆ¶å®¹å™¨å±æ€§ # åŸºæœ¬å¯¹é½å±æ€§ # \u0026lt;RelativeLayout android:layout_width=\u0026#34;match_parent\u0026#34; android:layout_height=\u0026#34;300dp\u0026#34;\u0026gt; \u0026lt;!-- ç›¸å¯¹äºçˆ¶å®¹å™¨å±…ä¸­ --\u0026gt; \u0026lt;TextView android:id=\u0026#34;@+id/centerText\u0026#34; android:layout_width=\u0026#34;wrap_content\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:layout_centerInParent=\u0026#34;true\u0026#34; android:text=\u0026#34;å±…ä¸­æ˜¾ç¤º\u0026#34; android:background=\u0026#34;#FF5722\u0026#34; android:padding=\u0026#34;16dp\u0026#34; /\u0026gt; \u0026lt;!-- ç›¸å¯¹äºçˆ¶å®¹å™¨é¡¶éƒ¨ --\u0026gt; \u0026lt;TextView android:layout_width=\u0026#34;wrap_content\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:layout_alignParentTop=\u0026#34;true\u0026#34; android:layout_centerHorizontal=\u0026#34;true\u0026#34; android:text=\u0026#34;é¡¶éƒ¨å±…ä¸­\u0026#34; android:background=\u0026#34;#2196F3\u0026#34; android:padding=\u0026#34;16dp\u0026#34; /\u0026gt; \u0026lt;!-- ç›¸å¯¹äºçˆ¶å®¹å™¨åº•éƒ¨ --\u0026gt; \u0026lt;TextView android:layout_width=\u0026#34;wrap_content\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:layout_alignParentBottom=\u0026#34;true\u0026#34; android:layout_centerHorizontal=\u0026#34;true\u0026#34; android:text=\u0026#34;åº•éƒ¨å±…ä¸­\u0026#34; android:background=\u0026#34;#4CAF50\u0026#34; android:padding=\u0026#34;16dp\u0026#34; /\u0026gt; \u0026lt;/RelativeLayout\u0026gt; æ°´å¹³å‚ç›´å±…ä¸­ # \u0026lt;RelativeLayout android:layout_width=\u0026#34;match_parent\u0026#34; android:layout_height=\u0026#34;200dp\u0026#34;\u0026gt; \u0026lt;!-- æ°´å¹³å±…ä¸­ --\u0026gt; \u0026lt;TextView android:layout_width=\u0026#34;wrap_content\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:layout_centerHorizontal=\u0026#34;true\u0026#34; android:text=\u0026#34;æ°´å¹³å±…ä¸­\u0026#34; /\u0026gt; \u0026lt;!-- å‚ç›´å±…ä¸­ --\u0026gt; \u0026lt;TextView android:layout_width=\u0026#34;wrap_content\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:layout_centerVertical=\u0026#34;true\u0026#34; android:text=\u0026#34;å‚ç›´å±…ä¸­\u0026#34; /\u0026gt; \u0026lt;!-- å®Œå…¨å±…ä¸­ --\u0026gt; \u0026lt;TextView android:layout_width=\u0026#34;wrap_content\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:layout_centerInParent=\u0026#34;true\u0026#34; android:text=\u0026#34;å®Œå…¨å±…ä¸­\u0026#34; /\u0026gt; \u0026lt;/RelativeLayout\u0026gt; ç›¸å¯¹åŒçº§åˆ«æ§ä»¶å±æ€§ # ä½ç½®å…³ç³»å±æ€§ # \u0026lt;RelativeLayout android:layout_width=\u0026#34;match_parent\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34;\u0026gt; \u0026lt;!-- å‚ç…§æ§ä»¶ --\u0026gt; \u0026lt;TextView android:id=\u0026#34;@+id/referenceView\u0026#34; android:layout_width=\u0026#34;100dp\u0026#34; android:layout_height=\u0026#34;100dp\u0026#34; android:layout_centerInParent=\u0026#34;true\u0026#34; android:text=\u0026#34;å‚ç…§ç‰©\u0026#34; android:background=\u0026#34;#FF5722\u0026#34; android:gravity=\u0026#34;center\u0026#34; /\u0026gt; \u0026lt;!-- åœ¨å‚ç…§ç‰©å·¦è¾¹ --\u0026gt; \u0026lt;TextView android:layout_width=\u0026#34;80dp\u0026#34; android:layout_height=\u0026#34;80dp\u0026#34; android:layout_toLeftOf=\u0026#34;@id/referenceView\u0026#34; android:layout_alignTop=\u0026#34;@id/referenceView\u0026#34; android:text=\u0026#34;å·¦è¾¹\u0026#34; android:background=\u0026#34;#2196F3\u0026#34; android:gravity=\u0026#34;center\u0026#34; /\u0026gt; \u0026lt;!-- åœ¨å‚ç…§ç‰©å³è¾¹ --\u0026gt; \u0026lt;TextView android:layout_width=\u0026#34;80dp\u0026#34; android:layout_height=\u0026#34;80dp\u0026#34; android:layout_toRightOf=\u0026#34;@id/referenceView\u0026#34; android:layout_alignTop=\u0026#34;@id/referenceView\u0026#34; android:text=\u0026#34;å³è¾¹\u0026#34; android:background=\u0026#34;#4CAF50\u0026#34; android:gravity=\u0026#34;center\u0026#34; /\u0026gt; \u0026lt;!-- åœ¨å‚ç…§ç‰©ä¸Šæ–¹ --\u0026gt; \u0026lt;TextView android:layout_width=\u0026#34;80dp\u0026#34; android:layout_height=\u0026#34;80dp\u0026#34; android:layout_above=\u0026#34;@id/referenceView\u0026#34; android:layout_alignLeft=\u0026#34;@id/referenceView\u0026#34; android:text=\u0026#34;ä¸Šæ–¹\u0026#34; android:background=\u0026#34;#FF9800\u0026#34; android:gravity=\u0026#34;center\u0026#34; /\u0026gt; \u0026lt;!-- åœ¨å‚ç…§ç‰©ä¸‹æ–¹ --\u0026gt; \u0026lt;TextView android:layout_width=\u0026#34;80dp\u0026#34; android:layout_height=\u0026#34;80dp\u0026#34; android:layout_below=\u0026#34;@id/referenceView\u0026#34; android:layout_alignLeft=\u0026#34;@id/referenceView\u0026#34; android:text=\u0026#34;ä¸‹æ–¹\u0026#34; android:background=\u0026#34;#9C27B0\u0026#34; android:gravity=\u0026#34;center\u0026#34; /\u0026gt; \u0026lt;/RelativeLayout\u0026gt; å¯¹é½å…³ç³»å±æ€§ # \u0026lt;RelativeLayout android:layout_width=\u0026#34;match_parent\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34;\u0026gt; \u0026lt;!-- åŸºå‡†æ§ä»¶ --\u0026gt; \u0026lt;TextView android:id=\u0026#34;@+id/baseView\u0026#34; android:layout_width=\u0026#34;120dp\u0026#34; android:layout_height=\u0026#34;60dp\u0026#34; android:layout_centerInParent=\u0026#34;true\u0026#34; android:text=\u0026#34;åŸºå‡†æ§ä»¶\u0026#34; android:background=\u0026#34;#FF5722\u0026#34; android:gravity=\u0026#34;center\u0026#34; /\u0026gt; \u0026lt;!-- é¡¶éƒ¨å¯¹é½ --\u0026gt; \u0026lt;TextView android:layout_width=\u0026#34;100dp\u0026#34; android:layout_height=\u0026#34;40dp\u0026#34; android:layout_alignTop=\u0026#34;@id/baseView\u0026#34; android:layout_toLeftOf=\u0026#34;@id/baseView\u0026#34; android:text=\u0026#34;é¡¶éƒ¨å¯¹é½\u0026#34; android:background=\u0026#34;#2196F3\u0026#34; android:gravity=\u0026#34;center\u0026#34; /\u0026gt; \u0026lt;!-- åº•éƒ¨å¯¹é½ --\u0026gt; \u0026lt;TextView android:layout_width=\u0026#34;100dp\u0026#34; android:layout_height=\u0026#34;40dp\u0026#34; android:layout_alignBottom=\u0026#34;@id/baseView\u0026#34; android:layout_toRightOf=\u0026#34;@id/baseView\u0026#34; android:text=\u0026#34;åº•éƒ¨å¯¹é½\u0026#34; android:background=\u0026#34;#4CAF50\u0026#34; android:gravity=\u0026#34;center\u0026#34; /\u0026gt; \u0026lt;!-- å·¦è¾¹å¯¹é½ --\u0026gt; \u0026lt;TextView android:layout_width=\u0026#34;100dp\u0026#34; android:layout_height=\u0026#34;40dp\u0026#34; android:layout_alignLeft=\u0026#34;@id/baseView\u0026#34; android:layout_above=\u0026#34;@id/baseView\u0026#34; android:text=\u0026#34;å·¦è¾¹å¯¹é½\u0026#34; android:background=\u0026#34;#FF9800\u0026#34; android:gravity=\u0026#34;center\u0026#34; /\u0026gt; \u0026lt;!-- å³è¾¹å¯¹é½ --\u0026gt; \u0026lt;TextView android:layout_width=\u0026#34;100dp\u0026#34; android:layout_height=\u0026#34;40dp\u0026#34; android:layout_alignRight=\u0026#34;@id/baseView\u0026#34; android:layout_below=\u0026#34;@id/baseView\u0026#34; android:text=\u0026#34;å³è¾¹å¯¹é½\u0026#34; android:background=\u0026#34;#9C27B0\u0026#34; android:gravity=\u0026#34;center\u0026#34; /\u0026gt; \u0026lt;/RelativeLayout\u0026gt; Kotlin ä»£ç ç¤ºä¾‹ # åŠ¨æ€åˆ›å»º RelativeLayout # class DynamicRelativeLayoutActivity : AppCompatActivity() { private lateinit var containerLayout: RelativeLayout override fun onCreate(savedInstanceState: Bundle?) { super.onCreate(savedInstanceState) setContentView(R.layout.activity_dynamic_relative_layout) initViews() createDynamicLayout() } private fun initViews() { containerLayout = findViewById(R.id.containerLayout) } private fun createDynamicLayout() { // åˆ›å»ºä¸­å¿ƒå‚ç…§æ§ä»¶ val centerView = TextView(this).apply { id = View.generateViewId() text = \u0026#34;ä¸­å¿ƒå‚ç…§\u0026#34; gravity = Gravity.CENTER setTextColor(Color.WHITE) setBackgroundColor(Color.parseColor(\u0026#34;#FF5722\u0026#34;)) layoutParams = RelativeLayout.LayoutParams(200, 200).apply { addRule(RelativeLayout.CENTER_IN_PARENT) } } containerLayout.addView(centerView) // åˆ›å»ºå›´ç»•ä¸­å¿ƒæ§ä»¶çš„å…¶ä»–æ§ä»¶ val positions = listOf( Triple(\u0026#34;ä¸Šæ–¹\u0026#34;, RelativeLayout.ABOVE, RelativeLayout.ALIGN_LEFT), Triple(\u0026#34;ä¸‹æ–¹\u0026#34;, RelativeLayout.BELOW, RelativeLayout.ALIGN_RIGHT), Triple(\u0026#34;å·¦è¾¹\u0026#34;, RelativeLayout.LEFT_OF, RelativeLayout.ALIGN_TOP), Triple(\u0026#34;å³è¾¹\u0026#34;, RelativeLayout.RIGHT_OF, RelativeLayout.ALIGN_BOTTOM) ) positions.forEach { (text, positionRule, alignRule) -\u0026gt; val textView = TextView(this).apply { this.text = text gravity = Gravity.CENTER setTextColor(Color.WHITE) setBackgroundColor( when (text) { \u0026#34;ä¸Šæ–¹\u0026#34; -\u0026gt; Color.parseColor(\u0026#34;#2196F3\u0026#34;) \u0026#34;ä¸‹æ–¹\u0026#34; -\u0026gt; Color.parseColor(\u0026#34;#4CAF50\u0026#34;) \u0026#34;å·¦è¾¹\u0026#34; -\u0026gt; Color.parseColor(\u0026#34;#FF9800\u0026#34;) \u0026#34;å³è¾¹\u0026#34; -\u0026gt; Color.parseColor(\u0026#34;#9C27B0\u0026#34;) else -\u0026gt; Color.GRAY } ) layoutParams = RelativeLayout.LayoutParams(150, 100).apply { addRule(positionRule, centerView.id) addRule(alignRule, centerView.id) } } containerLayout.addView(textView) } } } å¤æ‚å¸ƒå±€ç¤ºä¾‹ # class ComplexRelativeLayoutActivity : AppCompatActivity() { private lateinit var containerLayout: RelativeLayout override fun onCreate(savedInstanceState: Bundle?) { super.onCreate(savedInstanceState) setContentView(R.layout.activity_complex_relative_layout) initViews() createComplexLayout() } private fun initViews() { containerLayout = findViewById(R.id.containerLayout) } private fun createComplexLayout() { // åˆ›å»ºæ ‡é¢˜æ  val titleBar = createTitleBar() containerLayout.addView(titleBar) // åˆ›å»ºä¾§è¾¹æ  val sidebar = createSidebar() containerLayout.addView(sidebar) // åˆ›å»ºä¸»å†…å®¹åŒº val contentArea = createContentArea() containerLayout.addView(contentArea) // åˆ›å»ºåº•éƒ¨æ  val bottomBar = createBottomBar() containerLayout.addView(bottomBar) } private fun createTitleBar(): TextView { return TextView(this).apply { id = View.generateViewId() text = \u0026#34;æ ‡é¢˜æ \u0026#34; gravity = Gravity.CENTER setTextColor(Color.WHITE) setBackgroundColor(Color.parseColor(\u0026#34;#FF5722\u0026#34;)) layoutParams = RelativeLayout.LayoutParams( RelativeLayout.LayoutParams.MATCH_PARENT, 60 ).apply { addRule(RelativeLayout.ALIGN_PARENT_TOP) } } } private fun createSidebar(): TextView { return TextView(this).apply { id = View.generateViewId() text = \u0026#34;ä¾§è¾¹æ \u0026#34; gravity = Gravity.CENTER setTextColor(Color.WHITE) setBackgroundColor(Color.parseColor(\u0026#34;#2196F3\u0026#34;)) layoutParams = RelativeLayout.LayoutParams( 120, RelativeLayout.LayoutParams.MATCH_PARENT ).apply { addRule(RelativeLayout.ALIGN_PARENT_LEFT) addRule(RelativeLayout.BELOW, containerLayout.getChildAt(0).id) addRule(RelativeLayout.ABOVE, containerLayout.getChildAt(3).id) } } } private fun createContentArea(): TextView { return TextView(this).apply { id = View.generateViewId() text = \u0026#34;ä¸»å†…å®¹åŒº\u0026#34; gravity = Gravity.CENTER setTextColor(Color.WHITE) setBackgroundColor(Color.parseColor(\u0026#34;#4CAF50\u0026#34;)) layoutParams = RelativeLayout.LayoutParams( RelativeLayout.LayoutParams.MATCH_PARENT, RelativeLayout.LayoutParams.MATCH_PARENT ).apply { addRule(RelativeLayout.RIGHT_OF, containerLayout.getChildAt(1).id) addRule(RelativeLayout.BELOW, containerLayout.getChildAt(0).id) addRule(RelativeLayout.ABOVE, containerLayout.getChildAt(3).id) } } } private fun createBottomBar(): TextView { return TextView(this).apply { id = View.generateViewId() text = \u0026#34;åº•éƒ¨æ \u0026#34; gravity = Gravity.CENTER setTextColor(Color.WHITE) setBackgroundColor(Color.parseColor(\u0026#34;#FF9800\u0026#34;)) layoutParams = RelativeLayout.LayoutParams( RelativeLayout.LayoutParams.MATCH_PARENT, 60 ).apply { addRule(RelativeLayout.ALIGN_PARENT_BOTTOM) } } } } å®é™…åº”ç”¨åœºæ™¯ # 1. ç”¨æˆ·ä¿¡æ¯å¡ç‰‡ # \u0026lt;RelativeLayout android:layout_width=\u0026#34;match_parent\u0026#34; android:layout_height=\u0026#34;120dp\u0026#34; android:padding=\u0026#34;16dp\u0026#34; android:background=\u0026#34;@drawable/card_background\u0026#34; android:layout_margin=\u0026#34;8dp\u0026#34;\u0026gt; \u0026lt;!-- å¤´åƒ --\u0026gt; \u0026lt;ImageView android:id=\u0026#34;@+id/avatarImageView\u0026#34; android:layout_width=\u0026#34;80dp\u0026#34; android:layout_height=\u0026#34;80dp\u0026#34; android:layout_alignParentLeft=\u0026#34;true\u0026#34; android:layout_centerVertical=\u0026#34;true\u0026#34; android:src=\u0026#34;@drawable/default_avatar\u0026#34; android:scaleType=\u0026#34;centerCrop\u0026#34; /\u0026gt; \u0026lt;!-- ç”¨æˆ·å --\u0026gt; \u0026lt;TextView android:id=\u0026#34;@+id/usernameTextView\u0026#34; android:layout_width=\u0026#34;wrap_content\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:layout_toRightOf=\u0026#34;@id/avatarImageView\u0026#34; android:layout_alignTop=\u0026#34;@id/avatarImageView\u0026#34; android:layout_marginStart=\u0026#34;16dp\u0026#34; android:text=\u0026#34;ç”¨æˆ·å\u0026#34; android:textSize=\u0026#34;18sp\u0026#34; android:textStyle=\u0026#34;bold\u0026#34; /\u0026gt; \u0026lt;!-- åœ¨çº¿çŠ¶æ€ --\u0026gt; \u0026lt;TextView android:layout_width=\u0026#34;wrap_content\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:layout_toRightOf=\u0026#34;@id/avatarImageView\u0026#34; android:layout_below=\u0026#34;@id/usernameTextView\u0026#34; android:layout_marginStart=\u0026#34;16dp\u0026#34; android:layout_marginTop=\u0026#34;4dp\u0026#34; android:text=\u0026#34;åœ¨çº¿\u0026#34; android:textSize=\u0026#34;14sp\u0026#34; android:textColor=\u0026#34;#4CAF50\u0026#34; /\u0026gt; \u0026lt;!-- æœ€åç™»å½•æ—¶é—´ --\u0026gt; \u0026lt;TextView android:layout_width=\u0026#34;wrap_content\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:layout_toRightOf=\u0026#34;@id/avatarImageView\u0026#34; android:layout_below=\u0026#34;@id/usernameTextView\u0026#34; android:layout_marginStart=\u0026#34;16dp\u0026#34; android:layout_marginTop=\u0026#34;4dp\u0026#34; android:layout_alignParentRight=\u0026#34;true\u0026#34; android:text=\u0026#34;2åˆ†é’Ÿå‰\u0026#34; android:textSize=\u0026#34;12sp\u0026#34; android:textColor=\u0026#34;#999999\u0026#34; /\u0026gt; \u0026lt;!-- æ“ä½œæŒ‰é’® --\u0026gt; \u0026lt;Button android:layout_width=\u0026#34;wrap_content\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:layout_alignParentRight=\u0026#34;true\u0026#34; android:layout_alignParentBottom=\u0026#34;true\u0026#34; android:text=\u0026#34;ç§èŠ\u0026#34; android:textSize=\u0026#34;12sp\u0026#34; android:padding=\u0026#34;8dp\u0026#34; /\u0026gt; \u0026lt;/RelativeLayout\u0026gt; 2. èŠå¤©æ¶ˆæ¯å¸ƒå±€ # \u0026lt;RelativeLayout android:layout_width=\u0026#34;match_parent\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:padding=\u0026#34;12dp\u0026#34;\u0026gt; \u0026lt;!-- å‘é€çš„æ¶ˆæ¯ --\u0026gt; \u0026lt;RelativeLayout android:id=\u0026#34;@+id/sentMessageLayout\u0026#34; android:layout_width=\u0026#34;wrap_content\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:layout_alignParentRight=\u0026#34;true\u0026#34; android:layout_marginStart=\u0026#34;80dp\u0026#34; android:background=\u0026#34;@drawable/sent_message_background\u0026#34; android:padding=\u0026#34;12dp\u0026#34;\u0026gt; \u0026lt;TextView android:layout_width=\u0026#34;wrap_content\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:text=\u0026#34;è¿™æ˜¯ä¸€æ¡å‘é€çš„æ¶ˆæ¯\u0026#34; android:textColor=\u0026#34;#FFFFFF\u0026#34; android:textSize=\u0026#34;14sp\u0026#34; /\u0026gt; \u0026lt;TextView android:layout_width=\u0026#34;wrap_content\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:layout_below=\u0026#34;@id/sentMessageLayout\u0026#34; android:layout_alignParentRight=\u0026#34;true\u0026#34; android:layout_marginTop=\u0026#34;4dp\u0026#34; android:text=\u0026#34;10:30\u0026#34; android:textSize=\u0026#34;10sp\u0026#34; android:textColor=\u0026#34;#999999\u0026#34; /\u0026gt; \u0026lt;/RelativeLayout\u0026gt; \u0026lt;!-- æ¥æ”¶çš„æ¶ˆæ¯ --\u0026gt; \u0026lt;RelativeLayout android:id=\u0026#34;@+id/receivedMessageLayout\u0026#34; android:layout_width=\u0026#34;wrap_content\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:layout_alignParentLeft=\u0026#34;true\u0026#34; android:layout_marginEnd=\u0026#34;80dp\u0026#34; android:background=\u0026#34;@drawable/received_message_background\u0026#34; android:padding=\u0026#34;12dp\u0026#34;\u0026gt; \u0026lt;TextView android:layout_width=\u0026#34;wrap_content\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:text=\u0026#34;è¿™æ˜¯ä¸€æ¡æ¥æ”¶çš„æ¶ˆæ¯\u0026#34; android:textColor=\u0026#34;#333333\u0026#34; android:textSize=\u0026#34;14sp\u0026#34; /\u0026gt; \u0026lt;TextView android:layout_width=\u0026#34;wrap_content\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:layout_below=\u0026#34;@id/receivedMessageLayout\u0026#34; android:layout_alignParentLeft=\u0026#34;true\u0026#34; android:layout_marginTop=\u0026#34;4dp\u0026#34; android:text=\u0026#34;10:29\u0026#34; android:textSize=\u0026#34;10sp\u0026#34; android:textColor=\u0026#34;#999999\u0026#34; /\u0026gt; \u0026lt;/RelativeLayout\u0026gt; \u0026lt;/RelativeLayout\u0026gt; 3. æµ®åŠ¨æ“ä½œæŒ‰é’® # \u0026lt;RelativeLayout android:layout_width=\u0026#34;match_parent\u0026#34; android:layout_height=\u0026#34;match_parent\u0026#34;\u0026gt; \u0026lt;!-- ä¸»å†…å®¹ --\u0026gt; \u0026lt;ScrollView android:layout_width=\u0026#34;match_parent\u0026#34; android:layout_height=\u0026#34;match_parent\u0026#34; android:padding=\u0026#34;16dp\u0026#34;\u0026gt; \u0026lt;TextView android:layout_width=\u0026#34;match_parent\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:text=\u0026#34;è¿™é‡Œæ˜¯ä¸»è¦å†…å®¹...\u0026#34; android:textSize=\u0026#34;16sp\u0026#34; android:lineSpacingMultiplier=\u0026#34;1.5\u0026#34; /\u0026gt; \u0026lt;/ScrollView\u0026gt; \u0026lt;!-- æµ®åŠ¨æ“ä½œæŒ‰é’® --\u0026gt; \u0026lt;com.google.android.material.floatingactionbutton.FloatingActionButton android:id=\u0026#34;@+id/fab\u0026#34; android:layout_width=\u0026#34;wrap_content\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:layout_alignParentBottom=\u0026#34;true\u0026#34; android:layout_alignParentRight=\u0026#34;true\u0026#34; android:layout_margin=\u0026#34;16dp\u0026#34; android:src=\u0026#34;@drawable/ic_add\u0026#34; app:backgroundTint=\u0026#34;@color/primary\u0026#34; app:tint=\u0026#34;@color/white\u0026#34; /\u0026gt; \u0026lt;/RelativeLayout\u0026gt; æ€§èƒ½ä¼˜åŒ–å»ºè®® # 1. é¿å…è¿‡åº¦åµŒå¥— # // ä¸å¥½çš„åšæ³•ï¼šè¿‡åº¦åµŒå¥—RelativeLayout RelativeLayout { RelativeLayout { RelativeLayout { TextView { } } } } // å¥½çš„åšæ³•ï¼šä½¿ç”¨ConstraintLayoutæ›¿ä»£ ConstraintLayout { TextView { } } 2. åˆç†ä½¿ç”¨è§„åˆ™ # class OptimizedRelativeLayout { fun setupOptimizedLayout() { // ä¼˜å…ˆä½¿ç”¨ç®€å•çš„å¯¹é½è§„åˆ™ val layoutParams = RelativeLayout.LayoutParams( RelativeLayout.LayoutParams.WRAP_CONTENT, RelativeLayout.LayoutParams.WRAP_CONTENT ).apply { // ä½¿ç”¨ç®€å•çš„è§„åˆ™ addRule(RelativeLayout.CENTER_IN_PARENT) } // é¿å…å¤æ‚çš„è§„åˆ™ç»„åˆ val complexParams = RelativeLayout.LayoutParams( RelativeLayout.LayoutParams.WRAP_CONTENT, RelativeLayout.LayoutParams.WRAP_CONTENT ).apply { // é¿å…è¿‡å¤šè§„åˆ™ç»„åˆ addRule(RelativeLayout.BELOW, R.id.view1) addRule(RelativeLayout.RIGHT_OF, R.id.view2) addRule(RelativeLayout.ALIGN_TOP, R.id.view3) // ... æ›´å¤šè§„åˆ™ } } } 3. ä½¿ç”¨ ViewStub å»¶è¿ŸåŠ è½½ # \u0026lt;RelativeLayout android:layout_width=\u0026#34;match_parent\u0026#34; android:layout_height=\u0026#34;match_parent\u0026#34;\u0026gt; \u0026lt;!-- ä¸»è¦å†…å®¹ --\u0026gt; \u0026lt;TextView android:text=\u0026#34;ä¸»è¦å†…å®¹\u0026#34; /\u0026gt; \u0026lt;!-- å»¶è¿ŸåŠ è½½çš„å†…å®¹ --\u0026gt; \u0026lt;ViewStub android:id=\u0026#34;@+id/viewStub\u0026#34; android:layout_width=\u0026#34;match_parent\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:layout_alignParentBottom=\u0026#34;true\u0026#34; android:layout=\u0026#34;@layout/delayed_content\u0026#34; /\u0026gt; \u0026lt;/RelativeLayout\u0026gt; å¸¸è§é—®é¢˜è§£å†³ # 1. æ§ä»¶é‡å  # \u0026lt;!-- é”™è¯¯ï¼šæ²¡æœ‰æ­£ç¡®è®¾ç½®ç›¸å¯¹å…³ç³» --\u0026gt; \u0026lt;RelativeLayout\u0026gt; \u0026lt;TextView android:id=\u0026#34;@+id/text1\u0026#34; android:text=\u0026#34;æ–‡æœ¬1\u0026#34; /\u0026gt; \u0026lt;TextView android:text=\u0026#34;æ–‡æœ¬2\u0026#34; /\u0026gt; \u0026lt;/RelativeLayout\u0026gt; \u0026lt;!-- æ­£ç¡®ï¼šè®¾ç½®ç›¸å¯¹å…³ç³» --\u0026gt; \u0026lt;RelativeLayout\u0026gt; \u0026lt;TextView android:id=\u0026#34;@+id/text1\u0026#34; android:text=\u0026#34;æ–‡æœ¬1\u0026#34; /\u0026gt; \u0026lt;TextView android:layout_below=\u0026#34;@id/text1\u0026#34; android:text=\u0026#34;æ–‡æœ¬2\u0026#34; /\u0026gt; \u0026lt;/RelativeLayout\u0026gt; 2. è§„åˆ™å†²çª # // é¿å…è§„åˆ™å†²çª val layoutParams = RelativeLayout.LayoutParams( RelativeLayout.LayoutParams.WRAP_CONTENT, RelativeLayout.LayoutParams.WRAP_CONTENT ).apply { // ä¸è¦åŒæ—¶è®¾ç½®å†²çªçš„è§„åˆ™ // addRule(RelativeLayout.ALIGN_PARENT_LEFT) // addRule(RelativeLayout.ALIGN_PARENT_RIGHT) // ä½¿ç”¨ä¸å†²çªçš„è§„åˆ™ addRule(RelativeLayout.CENTER_HORIZONTAL) } ğŸ“‹ æ€»ç»“ # RelativeLayout æ˜¯ Android å¼€å‘ä¸­é‡è¦çš„å¸ƒå±€å®¹å™¨ï¼š\nç›¸å¯¹å®šä½ï¼šåŸºäºæ§ä»¶é—´çš„ç›¸å¯¹å…³ç³»ç¡®å®šä½ç½® çµæ´»å¸ƒå±€ï¼šæ”¯æŒå¤æ‚çš„å¸ƒå±€éœ€æ±‚ æ€§èƒ½è€ƒè™‘ï¼šé¿å…è¿‡åº¦åµŒå¥—å’Œå¤æ‚è§„åˆ™ å®é™…åº”ç”¨ï¼šå¡ç‰‡å¸ƒå±€ã€èŠå¤©ç•Œé¢ã€æµ®åŠ¨æŒ‰é’®ç­‰ ç°ä»£æ›¿ä»£ï¼šConstraintLayout æä¾›æ›´å¥½çš„æ€§èƒ½ æŒæ¡ RelativeLayout çš„ä½¿ç”¨æ–¹æ³•æœ‰åŠ©äºç†è§£ Android å¸ƒå±€ç³»ç»Ÿï¼Œä½†åœ¨ç°ä»£å¼€å‘ä¸­å»ºè®®ä¼˜å…ˆä½¿ç”¨ ConstraintLayoutã€‚\n","date":"24 October 2025","externalUrl":null,"permalink":"/posts/android/03---relativelayout-%E7%9B%B8%E5%AF%B9%E5%B8%83%E5%B1%80/","section":"Posts","summary":"è¯¦ç»†ä»‹ç»Android RelativeLayoutç›¸å¯¹å¸ƒå±€çš„ä½¿ç”¨æ–¹æ³•ã€å±æ€§é…ç½®å’Œå®é™…åº”ç”¨åœºæ™¯","title":"RelativeLayout ç›¸å¯¹å¸ƒå±€","type":"posts"},{"content":" SimpleAdapter åˆ—è¡¨å•ä¸€å…ƒç´  # SimpleAdapter æ˜¯ Android ä¸­ç”¨äºæ˜¾ç¤ºå¤æ‚åˆ—è¡¨é¡¹çš„é€‚é…å™¨ï¼Œå¯ä»¥å°† Map æ•°æ®æ˜ å°„åˆ°å¸ƒå±€ä¸­çš„å¤šä¸ªæ§ä»¶ä¸Šã€‚\nSimpleAdapter åŸºæœ¬æ¦‚å¿µ # SimpleAdapter ç”¨äºæ˜¾ç¤ºåŒ…å«å¤šä¸ªå­—æ®µçš„åˆ—è¡¨é¡¹ï¼Œæ¯ä¸ªåˆ—è¡¨é¡¹å¯ä»¥åŒ…å«å¤šä¸ªæ–‡æœ¬ã€å›¾ç‰‡ç­‰æ§ä»¶ã€‚å®ƒé€šè¿‡ Map æ•°æ®ç»“æ„æ¥å­˜å‚¨æ¯ä¸ªåˆ—è¡¨é¡¹çš„æ•°æ®ã€‚\næ„é€ æ–¹æ³• # SimpleAdapter(Context context, List\u0026lt;? extends Map\u0026lt;String, ?\u0026gt;\u0026gt; data, int resource, String[] from, int[] to) å‚æ•° è¯´æ˜ ç¤ºä¾‹ context ç¯å¢ƒä¸Šä¸‹æ–‡ this data æ•°æ®æºï¼ˆMapåˆ—è¡¨ï¼‰ listOf(map1, map2) resource å¸ƒå±€èµ„æºID R.layout.list_item from Mapä¸­çš„é”®åæ•°ç»„ arrayOf(\u0026quot;title\u0026quot;, \u0026quot;subtitle\u0026quot;) to å¸ƒå±€ä¸­æ§ä»¶çš„IDæ•°ç»„ arrayOf(R.id.title, R.id.subtitle) åŸºæœ¬ä½¿ç”¨ç¤ºä¾‹ # 1. ç®€å•åˆ—è¡¨é¡¹ # class SimpleAdapterActivity : AppCompatActivity() { private lateinit var listView: ListView private lateinit var adapter: SimpleAdapter private val dataList = mutableListOf\u0026lt;Map\u0026lt;String, Any\u0026gt;\u0026gt;() override fun onCreate(savedInstanceState: Bundle?) { super.onCreate(savedInstanceState) setContentView(R.layout.activity_simple_adapter) initViews() setupData() setupAdapter() setupListView() } private fun initViews() { listView = findViewById(R.id.listView) } private fun setupData() { dataList.addAll(listOf( mapOf( \u0026#34;title\u0026#34; to \u0026#34;Androidå¼€å‘\u0026#34;, \u0026#34;subtitle\u0026#34; to \u0026#34;ç§»åŠ¨åº”ç”¨å¼€å‘æŠ€æœ¯\u0026#34;, \u0026#34;icon\u0026#34; to android.R.drawable.ic_menu_info_details ), mapOf( \u0026#34;title\u0026#34; to \u0026#34;Kotlinç¼–ç¨‹\u0026#34;, \u0026#34;subtitle\u0026#34; to \u0026#34;ç°ä»£ç¼–ç¨‹è¯­è¨€\u0026#34;, \u0026#34;icon\u0026#34; to android.R.drawable.ic_menu_edit ), mapOf( \u0026#34;title\u0026#34; to \u0026#34;JavaåŸºç¡€\u0026#34;, \u0026#34;subtitle\u0026#34; to \u0026#34;é¢å‘å¯¹è±¡ç¼–ç¨‹\u0026#34;, \u0026#34;icon\u0026#34; to android.R.drawable.ic_menu_help ), mapOf( \u0026#34;title\u0026#34; to \u0026#34;UIè®¾è®¡\u0026#34;, \u0026#34;subtitle\u0026#34; to \u0026#34;ç”¨æˆ·ç•Œé¢è®¾è®¡\u0026#34;, \u0026#34;icon\u0026#34; to android.R.drawable.ic_menu_gallery ) )) } private fun setupAdapter() { adapter = SimpleAdapter( this, dataList, R.layout.simple_list_item, arrayOf(\u0026#34;title\u0026#34;, \u0026#34;subtitle\u0026#34;, \u0026#34;icon\u0026#34;), arrayOf(R.id.titleText, R.id.subtitleText, R.id.iconImage) ) } private fun setupListView() { listView.adapter = adapter listView.onItemClickListener = AdapterView.OnItemClickListener { _, _, position, _ -\u0026gt; val item = dataList[position] val title = item[\u0026#34;title\u0026#34;] as String Toast.makeText(this, \u0026#34;é€‰æ‹©äº†: $title\u0026#34;, Toast.LENGTH_SHORT).show() } listView.onItemLongClickListener = AdapterView.OnItemLongClickListener { _, _, position, _ -\u0026gt; showItemOptions(position) true } } private fun showItemOptions(position: Int) { val item = dataList[position] val title = item[\u0026#34;title\u0026#34;] as String AlertDialog.Builder(this) .setTitle(\u0026#34;æ“ä½œé€‰é¡¹\u0026#34;) .setMessage(\u0026#34;å¯¹ \u0026#39;$title\u0026#39; æ‰§è¡Œä»€ä¹ˆæ“ä½œï¼Ÿ\u0026#34;) .setPositiveButton(\u0026#34;ç¼–è¾‘\u0026#34;) { _, _ -\u0026gt; editItem(position) } .setNegativeButton(\u0026#34;åˆ é™¤\u0026#34;) { _, _ -\u0026gt; removeItem(position) } .setNeutralButton(\u0026#34;å–æ¶ˆ\u0026#34;) { _, _ -\u0026gt; // ä»€ä¹ˆéƒ½ä¸åš } .show() } private fun editItem(position: Int) { val item = dataList[position] val currentTitle = item[\u0026#34;title\u0026#34;] as String val currentSubtitle = item[\u0026#34;subtitle\u0026#34;] as String val editText = EditText(this).apply { setText(currentTitle) } AlertDialog.Builder(this) .setTitle(\u0026#34;ç¼–è¾‘æ ‡é¢˜\u0026#34;) .setView(editText) .setPositiveButton(\u0026#34;ç¡®å®š\u0026#34;) { _, _ -\u0026gt; val newTitle = editText.text.toString() if (newTitle.isNotEmpty()) { dataList[position] = mapOf( \u0026#34;title\u0026#34; to newTitle, \u0026#34;subtitle\u0026#34; to currentSubtitle, \u0026#34;icon\u0026#34; to item[\u0026#34;icon\u0026#34;]!! ) adapter.notifyDataSetChanged() Toast.makeText(this, \u0026#34;å·²æ›´æ–°\u0026#34;, Toast.LENGTH_SHORT).show() } } .setNegativeButton(\u0026#34;å–æ¶ˆ\u0026#34;) { _, _ -\u0026gt; // ä»€ä¹ˆéƒ½ä¸åš } .show() } private fun removeItem(position: Int) { dataList.removeAt(position) adapter.notifyDataSetChanged() Toast.makeText(this, \u0026#34;å·²åˆ é™¤\u0026#34;, Toast.LENGTH_SHORT).show() } } 2. è‡ªå®šä¹‰å¸ƒå±€æ–‡ä»¶ # \u0026lt;!-- res/layout/simple_list_item.xml --\u0026gt; \u0026lt;LinearLayout xmlns:android=\u0026#34;http://schemas.android.com/apk/res/android\u0026#34; android:layout_width=\u0026#34;match_parent\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:orientation=\u0026#34;horizontal\u0026#34; android:padding=\u0026#34;16dp\u0026#34; android:background=\u0026#34;?android:attr/selectableItemBackground\u0026#34;\u0026gt; \u0026lt;ImageView android:id=\u0026#34;@+id/iconImage\u0026#34; android:layout_width=\u0026#34;48dp\u0026#34; android:layout_height=\u0026#34;48dp\u0026#34; android:src=\u0026#34;@drawable/ic_default\u0026#34; android:layout_marginEnd=\u0026#34;16dp\u0026#34; android:scaleType=\u0026#34;centerCrop\u0026#34; /\u0026gt; \u0026lt;LinearLayout android:layout_width=\u0026#34;0dp\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:layout_weight=\u0026#34;1\u0026#34; android:orientation=\u0026#34;vertical\u0026#34;\u0026gt; \u0026lt;TextView android:id=\u0026#34;@+id/titleText\u0026#34; android:layout_width=\u0026#34;wrap_content\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:textSize=\u0026#34;16sp\u0026#34; android:textStyle=\u0026#34;bold\u0026#34; android:textColor=\u0026#34;@android:color/black\u0026#34; /\u0026gt; \u0026lt;TextView android:id=\u0026#34;@+id/subtitleText\u0026#34; android:layout_width=\u0026#34;wrap_content\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:textSize=\u0026#34;14sp\u0026#34; android:textColor=\u0026#34;@android:color/darker_gray\u0026#34; android:layout_marginTop=\u0026#34;4dp\u0026#34; /\u0026gt; \u0026lt;/LinearLayout\u0026gt; \u0026lt;ImageView android:id=\u0026#34;@+id/arrowImage\u0026#34; android:layout_width=\u0026#34;24dp\u0026#34; android:layout_height=\u0026#34;24dp\u0026#34; android:src=\u0026#34;@drawable/ic_arrow_right\u0026#34; android:layout_gravity=\u0026#34;center_vertical\u0026#34; /\u0026gt; \u0026lt;/LinearLayout\u0026gt; 3. å¤æ‚åˆ—è¡¨é¡¹ # class ComplexSimpleAdapterActivity : AppCompatActivity() { private lateinit var listView: ListView private lateinit var adapter: SimpleAdapter private val dataList = mutableListOf\u0026lt;Map\u0026lt;String, Any\u0026gt;\u0026gt;() override fun onCreate(savedInstanceState: Bundle?) { super.onCreate(savedInstanceState) setContentView(R.layout.activity_complex_simple_adapter) initViews() setupComplexData() setupAdapter() setupListView() } private fun initViews() { listView = findViewById(R.id.listView) } private fun setupComplexData() { dataList.addAll(listOf( mapOf( \u0026#34;name\u0026#34; to \u0026#34;å¼ ä¸‰\u0026#34;, \u0026#34;phone\u0026#34; to \u0026#34;13800138000\u0026#34;, \u0026#34;email\u0026#34; to \u0026#34;zhangsan@example.com\u0026#34;, \u0026#34;avatar\u0026#34; to android.R.drawable.ic_menu_myplaces, \u0026#34;status\u0026#34; to \u0026#34;åœ¨çº¿\u0026#34;, \u0026#34;lastMessage\u0026#34; to \u0026#34;ä½ å¥½ï¼Œæœ€è¿‘æ€ä¹ˆæ ·ï¼Ÿ\u0026#34; ), mapOf( \u0026#34;name\u0026#34; to \u0026#34;æå››\u0026#34;, \u0026#34;phone\u0026#34; to \u0026#34;13800138001\u0026#34;, \u0026#34;email\u0026#34; to \u0026#34;lisi@example.com\u0026#34;, \u0026#34;avatar\u0026#34; to android.R.drawable.ic_menu_camera, \u0026#34;status\u0026#34; to \u0026#34;ç¦»çº¿\u0026#34;, \u0026#34;lastMessage\u0026#34; to \u0026#34;æ˜å¤©è§é¢å§\u0026#34; ), mapOf( \u0026#34;name\u0026#34; to \u0026#34;ç‹äº”\u0026#34;, \u0026#34;phone\u0026#34; to \u0026#34;13800138002\u0026#34;, \u0026#34;email\u0026#34; to \u0026#34;wangwu@example.com\u0026#34;, \u0026#34;avatar\u0026#34; to android.R.drawable.ic_menu_send, \u0026#34;status\u0026#34; to \u0026#34;åœ¨çº¿\u0026#34;, \u0026#34;lastMessage\u0026#34; to \u0026#34;å¥½çš„ï¼Œæ²¡é—®é¢˜\u0026#34; ), mapOf( \u0026#34;name\u0026#34; to \u0026#34;èµµå…­\u0026#34;, \u0026#34;phone\u0026#34; to \u0026#34;13800138003\u0026#34;, \u0026#34;email\u0026#34; to \u0026#34;zhaoliu@example.com\u0026#34;, \u0026#34;avatar\u0026#34; to android.R.drawable.ic_menu_share, \u0026#34;status\u0026#34; to \u0026#34;å¿™ç¢Œ\u0026#34;, \u0026#34;lastMessage\u0026#34; to \u0026#34;ç¨åå›å¤\u0026#34; ) )) } private fun setupAdapter() { adapter = SimpleAdapter( this, dataList, R.layout.complex_list_item, arrayOf(\u0026#34;name\u0026#34;, \u0026#34;phone\u0026#34;, \u0026#34;email\u0026#34;, \u0026#34;avatar\u0026#34;, \u0026#34;status\u0026#34;, \u0026#34;lastMessage\u0026#34;), arrayOf(R.id.nameText, R.id.phoneText, R.id.emailText, R.id.avatarImage, R.id.statusText, R.id.lastMessageText) ) } private fun setupListView() { listView.adapter = adapter listView.onItemClickListener = AdapterView.OnItemClickListener { _, _, position, _ -\u0026gt; val item = dataList[position] val name = item[\u0026#34;name\u0026#34;] as String val phone = item[\u0026#34;phone\u0026#34;] as String showContactDetail(name, phone) } } private fun showContactDetail(name: String, phone: String) { AlertDialog.Builder(this) .setTitle(\u0026#34;è”ç³»äººè¯¦æƒ…\u0026#34;) .setMessage(\u0026#34;å§“å: $name\\nç”µè¯: $phone\u0026#34;) .setPositiveButton(\u0026#34;ç¡®å®š\u0026#34;) { _, _ -\u0026gt; // ä»€ä¹ˆéƒ½ä¸åš } .show() } } 4. å¤æ‚å¸ƒå±€æ–‡ä»¶ # \u0026lt;!-- res/layout/complex_list_item.xml --\u0026gt; \u0026lt;LinearLayout xmlns:android=\u0026#34;http://schemas.android.com/apk/res/android\u0026#34; android:layout_width=\u0026#34;match_parent\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:orientation=\u0026#34;horizontal\u0026#34; android:padding=\u0026#34;16dp\u0026#34; android:background=\u0026#34;?android:attr/selectableItemBackground\u0026#34;\u0026gt; \u0026lt;ImageView android:id=\u0026#34;@+id/avatarImage\u0026#34; android:layout_width=\u0026#34;60dp\u0026#34; android:layout_height=\u0026#34;60dp\u0026#34; android:src=\u0026#34;@drawable/ic_default_avatar\u0026#34; android:layout_marginEnd=\u0026#34;16dp\u0026#34; android:scaleType=\u0026#34;centerCrop\u0026#34; android:background=\u0026#34;@drawable/circle_background\u0026#34; /\u0026gt; \u0026lt;LinearLayout android:layout_width=\u0026#34;0dp\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:layout_weight=\u0026#34;1\u0026#34; android:orientation=\u0026#34;vertical\u0026#34;\u0026gt; \u0026lt;LinearLayout android:layout_width=\u0026#34;match_parent\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:orientation=\u0026#34;horizontal\u0026#34; android:gravity=\u0026#34;center_vertical\u0026#34;\u0026gt; \u0026lt;TextView android:id=\u0026#34;@+id/nameText\u0026#34; android:layout_width=\u0026#34;0dp\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:layout_weight=\u0026#34;1\u0026#34; android:textSize=\u0026#34;18sp\u0026#34; android:textStyle=\u0026#34;bold\u0026#34; android:textColor=\u0026#34;@android:color/black\u0026#34; /\u0026gt; \u0026lt;TextView android:id=\u0026#34;@+id/statusText\u0026#34; android:layout_width=\u0026#34;wrap_content\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:textSize=\u0026#34;12sp\u0026#34; android:textColor=\u0026#34;@android:color/holo_green_dark\u0026#34; android:background=\u0026#34;@drawable/status_background\u0026#34; android:padding=\u0026#34;4dp\u0026#34; /\u0026gt; \u0026lt;/LinearLayout\u0026gt; \u0026lt;TextView android:id=\u0026#34;@+id/phoneText\u0026#34; android:layout_width=\u0026#34;wrap_content\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:textSize=\u0026#34;14sp\u0026#34; android:textColor=\u0026#34;@android:color/darker_gray\u0026#34; android:layout_marginTop=\u0026#34;4dp\u0026#34; /\u0026gt; \u0026lt;TextView android:id=\u0026#34;@+id/emailText\u0026#34; android:layout_width=\u0026#34;wrap_content\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:textSize=\u0026#34;12sp\u0026#34; android:textColor=\u0026#34;@android:color/darker_gray\u0026#34; android:layout_marginTop=\u0026#34;2dp\u0026#34; /\u0026gt; \u0026lt;TextView android:id=\u0026#34;@+id/lastMessageText\u0026#34; android:layout_width=\u0026#34;wrap_content\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:textSize=\u0026#34;14sp\u0026#34; android:textColor=\u0026#34;@android:color/black\u0026#34; android:layout_marginTop=\u0026#34;8dp\u0026#34; android:maxLines=\u0026#34;2\u0026#34; android:ellipsize=\u0026#34;end\u0026#34; /\u0026gt; \u0026lt;/LinearLayout\u0026gt; \u0026lt;/LinearLayout\u0026gt; é«˜çº§ç”¨æ³•ç¤ºä¾‹ # 1. åŠ¨æ€æ•°æ®æ›´æ–° # class DynamicSimpleAdapterActivity : AppCompatActivity() { private lateinit var listView: ListView private lateinit var adapter: SimpleAdapter private lateinit var addButton: Button private lateinit var refreshButton: Button private val dataList = mutableListOf\u0026lt;Map\u0026lt;String, Any\u0026gt;\u0026gt;() override fun onCreate(savedInstanceState: Bundle?) { super.onCreate(savedInstanceState) setContentView(R.layout.activity_dynamic_simple_adapter) initViews() setupInitialData() setupAdapter() setupListView() setupButtons() } private fun initViews() { listView = findViewById(R.id.listView) addButton = findViewById(R.id.addButton) refreshButton = findViewById(R.id.refreshButton) } private fun setupInitialData() { dataList.addAll(listOf( mapOf( \u0026#34;title\u0026#34; to \u0026#34;åˆå§‹é¡¹ç›®1\u0026#34;, \u0026#34;subtitle\u0026#34; to \u0026#34;è¿™æ˜¯åˆå§‹æ•°æ®\u0026#34;, \u0026#34;icon\u0026#34; to android.R.drawable.ic_menu_info_details, \u0026#34;timestamp\u0026#34; to System.currentTimeMillis() ), mapOf( \u0026#34;title\u0026#34; to \u0026#34;åˆå§‹é¡¹ç›®2\u0026#34;, \u0026#34;subtitle\u0026#34; to \u0026#34;è¿™ä¹Ÿæ˜¯åˆå§‹æ•°æ®\u0026#34;, \u0026#34;icon\u0026#34; to android.R.drawable.ic_menu_edit, \u0026#34;timestamp\u0026#34; to System.currentTimeMillis() ) )) } private fun setupAdapter() { adapter = SimpleAdapter( this, dataList, R.layout.dynamic_list_item, arrayOf(\u0026#34;title\u0026#34;, \u0026#34;subtitle\u0026#34;, \u0026#34;icon\u0026#34;, \u0026#34;timestamp\u0026#34;), arrayOf(R.id.titleText, R.id.subtitleText, R.id.iconImage, R.id.timestampText) ) } private fun setupListView() { listView.adapter = adapter listView.onItemClickListener = AdapterView.OnItemClickListener { _, _, position, _ -\u0026gt; val item = dataList[position] val title = item[\u0026#34;title\u0026#34;] as String Toast.makeText(this, \u0026#34;é€‰æ‹©äº†: $title\u0026#34;, Toast.LENGTH_SHORT).show() } } private fun setupButtons() { addButton.setOnClickListener { addNewItem() } refreshButton.setOnClickListener { refreshData() } } private fun addNewItem() { val editText = EditText(this).apply { hint = \u0026#34;è¯·è¾“å…¥æ–°é¡¹ç›®æ ‡é¢˜\u0026#34; } AlertDialog.Builder(this) .setTitle(\u0026#34;æ·»åŠ æ–°é¡¹ç›®\u0026#34;) .setView(editText) .setPositiveButton(\u0026#34;æ·»åŠ \u0026#34;) { _, _ -\u0026gt; val newTitle = editText.text.toString() if (newTitle.isNotEmpty()) { val newItem = mapOf( \u0026#34;title\u0026#34; to newTitle, \u0026#34;subtitle\u0026#34; to \u0026#34;æ–°æ·»åŠ çš„é¡¹ç›®\u0026#34;, \u0026#34;icon\u0026#34; to android.R.drawable.ic_menu_add, \u0026#34;timestamp\u0026#34; to System.currentTimeMillis() ) dataList.add(newItem) adapter.notifyDataSetChanged() Toast.makeText(this, \u0026#34;å·²æ·»åŠ : $newTitle\u0026#34;, Toast.LENGTH_SHORT).show() } } .setNegativeButton(\u0026#34;å–æ¶ˆ\u0026#34;) { _, _ -\u0026gt; // ä»€ä¹ˆéƒ½ä¸åš } .show() } private fun refreshData() { dataList.clear() setupInitialData() // æ·»åŠ ä¸€äº›éšæœºæ•°æ® repeat(3) { index -\u0026gt; val randomItem = mapOf( \u0026#34;title\u0026#34; to \u0026#34;åˆ·æ–°é¡¹ç›®${index + 1}\u0026#34;, \u0026#34;subtitle\u0026#34; to \u0026#34;è¿™æ˜¯åˆ·æ–°åçš„æ•°æ®\u0026#34;, \u0026#34;icon\u0026#34; to android.R.drawable.ic_menu_refresh, \u0026#34;timestamp\u0026#34; to System.currentTimeMillis() ) dataList.add(randomItem) } adapter.notifyDataSetChanged() Toast.makeText(this, \u0026#34;æ•°æ®å·²åˆ·æ–°\u0026#34;, Toast.LENGTH_SHORT).show() } } 2. è‡ªå®šä¹‰æ•°æ®è½¬æ¢ # class CustomSimpleAdapterActivity : AppCompatActivity() { private lateinit var listView: ListView private lateinit var adapter: SimpleAdapter private val dataList = mutableListOf\u0026lt;Map\u0026lt;String, Any\u0026gt;\u0026gt;() override fun onCreate(savedInstanceState: Bundle?) { super.onCreate(savedInstanceState) setContentView(R.layout.activity_custom_simple_adapter) initViews() setupCustomData() setupCustomAdapter() setupListView() } private fun initViews() { listView = findViewById(R.id.listView) } private fun setupCustomData() { dataList.addAll(listOf( mapOf( \u0026#34;name\u0026#34; to \u0026#34;å¼ ä¸‰\u0026#34;, \u0026#34;age\u0026#34; to 25, \u0026#34;salary\u0026#34; to 8000.0, \u0026#34;department\u0026#34; to \u0026#34;æŠ€æœ¯éƒ¨\u0026#34;, \u0026#34;avatar\u0026#34; to android.R.drawable.ic_menu_myplaces ), mapOf( \u0026#34;name\u0026#34; to \u0026#34;æå››\u0026#34;, \u0026#34;age\u0026#34; to 30, \u0026#34;salary\u0026#34; to 12000.0, \u0026#34;department\u0026#34; to \u0026#34;äº§å“éƒ¨\u0026#34;, \u0026#34;avatar\u0026#34; to android.R.drawable.ic_menu_camera ), mapOf( \u0026#34;name\u0026#34; to \u0026#34;ç‹äº”\u0026#34;, \u0026#34;age\u0026#34; to 28, \u0026#34;salary\u0026#34; to 10000.0, \u0026#34;department\u0026#34; to \u0026#34;è®¾è®¡éƒ¨\u0026#34;, \u0026#34;avatar\u0026#34; to android.R.drawable.ic_menu_send ) )) } private fun setupCustomAdapter() { adapter = object : SimpleAdapter( this, dataList, R.layout.custom_list_item, arrayOf(\u0026#34;name\u0026#34;, \u0026#34;age\u0026#34;, \u0026#34;salary\u0026#34;, \u0026#34;department\u0026#34;, \u0026#34;avatar\u0026#34;), arrayOf(R.id.nameText, R.id.ageText, R.id.salaryText, R.id.departmentText, R.id.avatarImage) ) { override fun setViewText(TextView v: TextView, String text: String) { when (v.id) { R.id.ageText -\u0026gt; { v.text = \u0026#34;å¹´é¾„: $text å²\u0026#34; } R.id.salaryText -\u0026gt; { v.text = \u0026#34;è–ªèµ„: Â¥$text\u0026#34; } R.id.departmentText -\u0026gt; { v.text = \u0026#34;éƒ¨é—¨: $text\u0026#34; } else -\u0026gt; { super.setViewText(v, text) } } } override fun setViewImage(ImageView v: ImageView, Int value: Int) { v.setImageResource(value) } } } private fun setupListView() { listView.adapter = adapter listView.onItemClickListener = AdapterView.OnItemClickListener { _, _, position, _ -\u0026gt; val item = dataList[position] val name = item[\u0026#34;name\u0026#34;] as String val age = item[\u0026#34;age\u0026#34;] as Int val salary = item[\u0026#34;salary\u0026#34;] as Double val department = item[\u0026#34;department\u0026#34;] as String showEmployeeDetail(name, age, salary, department) } } private fun showEmployeeDetail(name: String, age: Int, salary: Double, department: String) { AlertDialog.Builder(this) .setTitle(\u0026#34;å‘˜å·¥è¯¦æƒ…\u0026#34;) .setMessage(\u0026#34;å§“å: $name\\nå¹´é¾„: $age\\nè–ªèµ„: Â¥$salary\\néƒ¨é—¨: $department\u0026#34;) .setPositiveButton(\u0026#34;ç¡®å®š\u0026#34;) { _, _ -\u0026gt; // ä»€ä¹ˆéƒ½ä¸åš } .show() } } å®é™…åº”ç”¨åœºæ™¯ # 1. è”ç³»äººåˆ—è¡¨ # class ContactListActivity : AppCompatActivity() { private lateinit var listView: ListView private lateinit var adapter: SimpleAdapter private val contactList = mutableListOf\u0026lt;Map\u0026lt;String, Any\u0026gt;\u0026gt;() override fun onCreate(savedInstanceState: Bundle?) { super.onCreate(savedInstanceState) setContentView(R.layout.activity_contact_list) initViews() loadContacts() setupAdapter() setupListView() } private fun initViews() { listView = findViewById(R.id.listView) } private fun loadContacts() { contactList.addAll(listOf( mapOf( \u0026#34;name\u0026#34; to \u0026#34;å¼ ä¸‰\u0026#34;, \u0026#34;phone\u0026#34; to \u0026#34;13800138000\u0026#34;, \u0026#34;email\u0026#34; to \u0026#34;zhangsan@example.com\u0026#34;, \u0026#34;avatar\u0026#34; to android.R.drawable.ic_menu_myplaces, \u0026#34;isOnline\u0026#34; to true ), mapOf( \u0026#34;name\u0026#34; to \u0026#34;æå››\u0026#34;, \u0026#34;phone\u0026#34; to \u0026#34;13800138001\u0026#34;, \u0026#34;email\u0026#34; to \u0026#34;lisi@example.com\u0026#34;, \u0026#34;avatar\u0026#34; to android.R.drawable.ic_menu_camera, \u0026#34;isOnline\u0026#34; to false ), mapOf( \u0026#34;name\u0026#34; to \u0026#34;ç‹äº”\u0026#34;, \u0026#34;phone\u0026#34; to \u0026#34;13800138002\u0026#34;, \u0026#34;email\u0026#34; to \u0026#34;wangwu@example.com\u0026#34;, \u0026#34;avatar\u0026#34; to android.R.drawable.ic_menu_send, \u0026#34;isOnline\u0026#34; to true ) )) } private fun setupAdapter() { adapter = SimpleAdapter( this, contactList, R.layout.contact_list_item, arrayOf(\u0026#34;name\u0026#34;, \u0026#34;phone\u0026#34;, \u0026#34;email\u0026#34;, \u0026#34;avatar\u0026#34;, \u0026#34;isOnline\u0026#34;), arrayOf(R.id.nameText, R.id.phoneText, R.id.emailText, R.id.avatarImage, R.id.statusIndicator) ) } private fun setupListView() { listView.adapter = adapter listView.onItemClickListener = AdapterView.OnItemClickListener { _, _, position, _ -\u0026gt; val contact = contactList[position] val name = contact[\u0026#34;name\u0026#34;] as String val phone = contact[\u0026#34;phone\u0026#34;] as String callContact(name, phone) } } private fun callContact(name: String, phone: String) { AlertDialog.Builder(this) .setTitle(\u0026#34;æ‹¨æ‰“ç”µè¯\u0026#34;) .setMessage(\u0026#34;æ˜¯å¦æ‹¨æ‰“ $name çš„ç”µè¯: $phone\u0026#34;) .setPositiveButton(\u0026#34;æ‹¨æ‰“\u0026#34;) { _, _ -\u0026gt; Toast.makeText(this, \u0026#34;æ­£åœ¨æ‹¨æ‰“ $phone\u0026#34;, Toast.LENGTH_SHORT).show() } .setNegativeButton(\u0026#34;å–æ¶ˆ\u0026#34;) { _, _ -\u0026gt; // ä»€ä¹ˆéƒ½ä¸åš } .show() } } SimpleAdapter æœ€ä½³å®è·µ # 1. æ•°æ®æ¨¡å‹ç±» # data class ListItem( val title: String, val subtitle: String, val icon: Int, val timestamp: Long = System.currentTimeMillis() ) { fun toMap(): Map\u0026lt;String, Any\u0026gt; { return mapOf( \u0026#34;title\u0026#34; to title, \u0026#34;subtitle\u0026#34; to subtitle, \u0026#34;icon\u0026#34; to icon, \u0026#34;timestamp\u0026#34; to timestamp ) } } object ListItemMapper { fun fromMap(map: Map\u0026lt;String, Any\u0026gt;): ListItem { return ListItem( title = map[\u0026#34;title\u0026#34;] as String, subtitle = map[\u0026#34;subtitle\u0026#34;] as String, icon = map[\u0026#34;icon\u0026#34;] as Int, timestamp = map[\u0026#34;timestamp\u0026#34;] as Long ) } } 2. é€‚é…å™¨å·¥å…·ç±» # object SimpleAdapterUtils { fun createSimpleAdapter( context: Context, data: List\u0026lt;Map\u0026lt;String, Any\u0026gt;\u0026gt;, layoutRes: Int, fromKeys: Array\u0026lt;String\u0026gt;, toIds: IntArray ): SimpleAdapter { return SimpleAdapter(context, data, layoutRes, fromKeys, toIds) } fun createContactAdapter( context: Context, contacts: List\u0026lt;Map\u0026lt;String, Any\u0026gt;\u0026gt; ): SimpleAdapter { return SimpleAdapter( context, contacts, R.layout.contact_list_item, arrayOf(\u0026#34;name\u0026#34;, \u0026#34;phone\u0026#34;, \u0026#34;email\u0026#34;, \u0026#34;avatar\u0026#34;), arrayOf(R.id.nameText, R.id.phoneText, R.id.emailText, R.id.avatarImage) ) } fun createMessageAdapter( context: Context, messages: List\u0026lt;Map\u0026lt;String, Any\u0026gt;\u0026gt; ): SimpleAdapter { return SimpleAdapter( context, messages, R.layout.message_list_item, arrayOf(\u0026#34;sender\u0026#34;, \u0026#34;content\u0026#34;, \u0026#34;time\u0026#34;, \u0026#34;avatar\u0026#34;), arrayOf(R.id.senderText, R.id.contentText, R.id.timeText, R.id.avatarImage) ) } } ğŸ“‹ æ€»ç»“ # SimpleAdapter æ˜¯ Android å¼€å‘ä¸­ç”¨äºå¤æ‚åˆ—è¡¨é¡¹çš„é€‚é…å™¨ï¼š\nåŸºæœ¬ç”¨æ³•ï¼šMapæ•°æ®æ˜ å°„åˆ°å¤šä¸ªæ§ä»¶ æ•°æ®ç»‘å®šï¼šæ”¯æŒæ–‡æœ¬ã€å›¾ç‰‡ç­‰å¤šç§æ•°æ®ç±»å‹ è‡ªå®šä¹‰è½¬æ¢ï¼šæ”¯æŒè‡ªå®šä¹‰æ•°æ®è½¬æ¢é€»è¾‘ å®é™…åº”ç”¨ï¼šè”ç³»äººåˆ—è¡¨ã€æ¶ˆæ¯åˆ—è¡¨ã€å‘˜å·¥åˆ—è¡¨ç­‰åœºæ™¯ æœ€ä½³å®è·µï¼šæ•°æ®æ¨¡å‹ç±»ã€å·¥å…·ç±»å°è£… æŒæ¡ SimpleAdapter çš„ä½¿ç”¨æ–¹æ³•å¯¹äºåˆ›å»ºå¤æ‚çš„åˆ—è¡¨ç•Œé¢è‡³å…³é‡è¦ã€‚\n","date":"24 October 2025","externalUrl":null,"permalink":"/posts/android/17---simpleadapter-%E5%88%97%E8%A1%A8%E5%8D%95%E4%B8%80%E5%85%83%E7%B4%A0/","section":"Posts","summary":"è¯¦ç»†ä»‹ç»Android SimpleAdapterçš„ä½¿ç”¨æ–¹æ³•ã€æ•°æ®æ˜ å°„å’Œå®é™…åº”ç”¨åœºæ™¯","title":"SimpleAdapter åˆ—è¡¨å•ä¸€å…ƒç´ ","type":"posts"},{"content":"","date":"24 October 2025","externalUrl":null,"permalink":"/","section":"TsanChing Kim's Blog","summary":"","title":"TsanChing Kim's Blog","type":"page"},{"content":" UI åŸºç¡€æ§ä»¶ View # View æ˜¯ Android UI çš„åŸºç¡€ç»„ä»¶ï¼Œæ‰€æœ‰çš„ UI æ§ä»¶éƒ½ç»§æ‰¿è‡ª View ç±»ã€‚View æä¾›äº†åŸºæœ¬çš„ç»˜åˆ¶å’Œäº‹ä»¶å¤„ç†åŠŸèƒ½ã€‚\nView åˆ†ç±» # æ–‡æœ¬æ˜¾ç¤ºç±» # TextViewï¼šæ˜¾ç¤ºæ–‡æœ¬å†…å®¹ Buttonï¼šå¯ç‚¹å‡»çš„æŒ‰é’® EditTextï¼šæ–‡æœ¬è¾“å…¥æ¡† å›¾ç‰‡æ˜¾ç¤ºç±» # ImageViewï¼šæ˜¾ç¤ºå›¾ç‰‡ ImageButtonï¼šå›¾ç‰‡æŒ‰é’® è¿›åº¦æ˜¾ç¤ºç±» # ProgressBarï¼šè¿›åº¦æ¡ SeekBarï¼šå¯æ‹–æ‹½çš„è¿›åº¦æ¡ é€‰æ‹©ç±» # CheckBoxï¼šå¤é€‰æ¡† RadioButtonï¼šå•é€‰æŒ‰é’® Switchï¼šå¼€å…³ ğŸ“š TextView æ–‡æœ¬æ˜¾ç¤ºæ§ä»¶ # TextView æ˜¯ Android ä¸­æœ€åŸºç¡€çš„æ–‡æœ¬æ˜¾ç¤ºæ§ä»¶ï¼Œç±»ä¼¼äº Swing ä¸­çš„ JLabelã€‚\nåŸºæœ¬å±æ€§ # \u0026lt;TextView android:id=\u0026#34;@+id/textView\u0026#34; android:layout_width=\u0026#34;wrap_content\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:text=\u0026#34;Hello World!\u0026#34; android:textSize=\u0026#34;16sp\u0026#34; android:textColor=\u0026#34;#333333\u0026#34; android:gravity=\u0026#34;center\u0026#34; android:padding=\u0026#34;16dp\u0026#34; /\u0026gt; å¸¸ç”¨å±æ€§è¯´æ˜ # å±æ€§ è¯´æ˜ ç¤ºä¾‹å€¼ textSize è®¾ç½®å­—ä½“å¤§å° 16sp, 20dp textColor è®¾ç½®æ–‡å­—é¢œè‰² #333333, @color/primary gravity è®¾ç½®æ–‡å­—å¯¹é½æ–¹å¼ center, left, right lineSpacingMultiplier è®¾ç½®è¡Œé—´è·å€æ•° 1.2 maxLines è®¾ç½®æœ€å¤§è¡Œæ•° 3 ellipsize è®¾ç½®çœç•¥å·ä½ç½® end, start, middle é•¿æ–‡æœ¬å¤„ç† # æ»šåŠ¨æ˜¾ç¤º # å½“æ–‡æœ¬å†…å®¹è¶…è¿‡å±å¹•é«˜åº¦æ—¶ï¼Œä½¿ç”¨ ScrollView åŒ…è£…ï¼š\n\u0026lt;ScrollView android:layout_width=\u0026#34;match_parent\u0026#34; android:layout_height=\u0026#34;match_parent\u0026#34;\u0026gt; \u0026lt;TextView android:layout_width=\u0026#34;match_parent\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:text=\u0026#34;@string/long_text\u0026#34; android:textSize=\u0026#34;14sp\u0026#34; android:lineSpacingMultiplier=\u0026#34;1.2\u0026#34; /\u0026gt; \u0026lt;/ScrollView\u0026gt; è·‘é©¬ç¯æ•ˆæœ # å®ç°æ–‡å­—æ»šåŠ¨æ˜¾ç¤ºï¼š\n\u0026lt;TextView android:layout_width=\u0026#34;match_parent\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:text=\u0026#34;è¿™æ˜¯ä¸€æ®µå¾ˆé•¿çš„æ–‡å­—ï¼Œä¼šä»¥è·‘é©¬ç¯çš„å½¢å¼æ»šåŠ¨æ˜¾ç¤º\u0026#34; android:singleLine=\u0026#34;true\u0026#34; android:ellipsize=\u0026#34;marquee\u0026#34; android:marqueeRepeatLimit=\u0026#34;marquee_forever\u0026#34; android:focusable=\u0026#34;true\u0026#34; android:focusableInTouchMode=\u0026#34;true\u0026#34; /\u0026gt; Kotlin ä»£ç ç¤ºä¾‹ # class MainActivity : AppCompatActivity() { private lateinit var textView: TextView override fun onCreate(savedInstanceState: Bundle?) { super.onCreate(savedInstanceState) setContentView(R.layout.activity_main) initViews() setupTextView() } private fun initViews() { textView = findViewById(R.id.textView) } private fun setupTextView() { // è®¾ç½®æ–‡æœ¬å†…å®¹ textView.text = \u0026#34;Hello Kotlin!\u0026#34; // è®¾ç½®æ–‡å­—é¢œè‰² textView.setTextColor(ContextCompat.getColor(this, R.color.primary)) // è®¾ç½®æ–‡å­—å¤§å° textView.textSize = 18f // è®¾ç½®ç‚¹å‡»äº‹ä»¶ textView.setOnClickListener { Toast.makeText(this, \u0026#34;TextViewè¢«ç‚¹å‡»äº†\u0026#34;, Toast.LENGTH_SHORT).show() } // åŠ¨æ€è®¾ç½®è·‘é©¬ç¯æ•ˆæœ textView.isSelected = true } } ğŸ“ EditText æ–‡æœ¬è¾“å…¥æ§ä»¶ # EditText ç»§æ‰¿è‡ª TextViewï¼Œç”¨äºæ¥æ”¶ç”¨æˆ·è¾“å…¥çš„æ–‡æœ¬ã€‚\nåŸºæœ¬å±æ€§ # \u0026lt;EditText android:id=\u0026#34;@+id/editText\u0026#34; android:layout_width=\u0026#34;match_parent\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:hint=\u0026#34;è¯·è¾“å…¥ç”¨æˆ·å\u0026#34; android:inputType=\u0026#34;text\u0026#34; android:maxLength=\u0026#34;20\u0026#34; android:background=\u0026#34;@drawable/edit_text_background\u0026#34; android:padding=\u0026#34;12dp\u0026#34; /\u0026gt; è¾“å…¥ç±»å‹ (inputType) # ç±»å‹ è¯´æ˜ é”®ç›˜ç±»å‹ text æ™®é€šæ–‡æœ¬ æ ‡å‡†é”®ç›˜ textPassword å¯†ç è¾“å…¥ æ•°å­—é”®ç›˜ number æ­£æ•´æ•° æ•°å­—é”®ç›˜ numberSigned æ•´æ•°ï¼ˆå«è´Ÿæ•°ï¼‰ æ•°å­—é”®ç›˜ numberDecimal å°æ•° æ•°å­—é”®ç›˜ phone ç”µè¯å·ç  ç”µè¯é”®ç›˜ email é‚®ç®±åœ°å€ é‚®ç®±é”®ç›˜ textMultiLine å¤šè¡Œæ–‡æœ¬ æ ‡å‡†é”®ç›˜ å¸¸ç”¨å±æ€§ # å±æ€§ è¯´æ˜ ç¤ºä¾‹å€¼ hint æç¤ºæ–‡å­— \u0026quot;è¯·è¾“å…¥ç”¨æˆ·å\u0026quot; maxLength æœ€å¤§è¾“å…¥é•¿åº¦ 20 minLines æœ€å°è¡Œæ•° 3 maxLines æœ€å¤§è¡Œæ•° 5 lines å›ºå®šè¡Œæ•° 3 Kotlin ä»£ç ç¤ºä¾‹ # class MainActivity : AppCompatActivity() { private lateinit var editText: EditText private lateinit var button: Button override fun onCreate(savedInstanceState: Bundle?) { super.onCreate(savedInstanceState) setContentView(R.layout.activity_main) initViews() setupEditText() } private fun initViews() { editText = findViewById(R.id.editText) button = findViewById(R.id.button) } private fun setupEditText() { // è®¾ç½®è¾“å…¥ç›‘å¬ editText.addTextChangedListener(object : TextWatcher { override fun beforeTextChanged(s: CharSequence?, start: Int, count: Int, after: Int) { // æ–‡æœ¬æ”¹å˜å‰çš„å›è°ƒ } override fun onTextChanged(s: CharSequence?, start: Int, before: Int, count: Int) { // æ–‡æœ¬æ”¹å˜æ—¶çš„å›è°ƒ val inputText = s.toString() button.isEnabled = inputText.isNotEmpty() } override fun afterTextChanged(s: Editable?) { // æ–‡æœ¬æ”¹å˜åçš„å›è°ƒ } }) // è®¾ç½®ç„¦ç‚¹å˜åŒ–ç›‘å¬ editText.onFocusChangeListener = View.OnFocusChangeListener { _, hasFocus -\u0026gt; if (hasFocus) { // è·å¾—ç„¦ç‚¹æ—¶çš„å¤„ç† editText.setBackgroundResource(R.drawable.edit_text_focused) } else { // å¤±å»ç„¦ç‚¹æ—¶çš„å¤„ç† editText.setBackgroundResource(R.drawable.edit_text_normal) } } // è·å–è¾“å…¥å†…å®¹ button.setOnClickListener { val inputText = editText.text.toString() if (inputText.isNotEmpty()) { Toast.makeText(this, \u0026#34;è¾“å…¥å†…å®¹ï¼š$inputText\u0026#34;, Toast.LENGTH_SHORT).show() } else { Toast.makeText(this, \u0026#34;è¯·è¾“å…¥å†…å®¹\u0026#34;, Toast.LENGTH_SHORT).show() } } } // éªŒè¯è¾“å…¥å†…å®¹ private fun validateInput(): Boolean { val inputText = editText.text.toString() return inputText.length \u0026gt;= 3 \u0026amp;\u0026amp; inputText.length \u0026lt;= 20 } } ğŸ¨ æ ·å¼å’Œä¸»é¢˜ # è‡ªå®šä¹‰æ ·å¼ # åœ¨ res/values/styles.xml ä¸­å®šä¹‰ï¼š\n\u0026lt;style name=\u0026#34;CustomTextViewStyle\u0026#34;\u0026gt; \u0026lt;item name=\u0026#34;android:textSize\u0026#34;\u0026gt;16sp\u0026lt;/item\u0026gt; \u0026lt;item name=\u0026#34;android:textColor\u0026#34;\u0026gt;#333333\u0026lt;/item\u0026gt; \u0026lt;item name=\u0026#34;android:background\u0026#34;\u0026gt;@drawable/text_view_background\u0026lt;/item\u0026gt; \u0026lt;item name=\u0026#34;android:padding\u0026#34;\u0026gt;12dp\u0026lt;/item\u0026gt; \u0026lt;/style\u0026gt; åº”ç”¨æ ·å¼ # \u0026lt;TextView android:layout_width=\u0026#34;wrap_content\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; style=\u0026#34;@style/CustomTextViewStyle\u0026#34; android:text=\u0026#34;åº”ç”¨è‡ªå®šä¹‰æ ·å¼\u0026#34; /\u0026gt; ğŸ“± å“åº”å¼è®¾è®¡ # ä¸åŒå±å¹•å°ºå¯¸é€‚é… # \u0026lt;!-- å°å±å¹• --\u0026gt; \u0026lt;TextView android:layout_width=\u0026#34;wrap_content\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:textSize=\u0026#34;14sp\u0026#34; android:minWidth=\u0026#34;120dp\u0026#34; /\u0026gt; \u0026lt;!-- å¤§å±å¹• --\u0026gt; \u0026lt;TextView android:layout_width=\u0026#34;wrap_content\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:textSize=\u0026#34;18sp\u0026#34; android:minWidth=\u0026#34;200dp\u0026#34; /\u0026gt; ğŸ”§ å®ç”¨æŠ€å·§ # 1. åŠ¨æ€è®¾ç½®æ–‡æœ¬ # // ä½¿ç”¨å­—ç¬¦ä¸²èµ„æº textView.text = getString(R.string.welcome_message, userName) // ä½¿ç”¨æ ¼å¼åŒ–å­—ç¬¦ä¸² textView.text = String.format(\u0026#34;æ¬¢è¿ %sï¼Œä»Šå¤©æ˜¯ %s\u0026#34;, userName, currentDate) 2. æ–‡æœ¬é€‰æ‹© # // è®¾ç½®æ–‡æœ¬å¯é€‰æ‹© textView.setTextIsSelectable(true) // é€‰ä¸­æŒ‡å®šèŒƒå›´çš„æ–‡æœ¬ textView.setSelection(0, 5) 3. é“¾æ¥å¤„ç† # // è®¾ç½®HTMLå†…å®¹ textView.text = Html.fromHtml(\u0026#34;\u0026lt;a href=\u0026#39;https://www.example.com\u0026#39;\u0026gt;ç‚¹å‡»è®¿é—®\u0026lt;/a\u0026gt;\u0026#34;) textView.movementMethod = LinkMovementMethod.getInstance() ğŸ“‹ æ€»ç»“ # TextView å’Œ EditText æ˜¯ Android å¼€å‘ä¸­æœ€å¸¸ç”¨çš„åŸºç¡€æ§ä»¶ï¼š\nTextViewï¼šç”¨äºæ˜¾ç¤ºæ–‡æœ¬å†…å®¹ï¼Œæ”¯æŒå¤šç§æ ·å¼å’Œæ•ˆæœ EditTextï¼šç”¨äºæ¥æ”¶ç”¨æˆ·è¾“å…¥ï¼Œæ”¯æŒå¤šç§è¾“å…¥ç±»å‹å’ŒéªŒè¯ æ ·å¼å®šåˆ¶ï¼šé€šè¿‡æ ·å¼å’Œä¸»é¢˜å®ç°ç»Ÿä¸€çš„è§†è§‰æ•ˆæœ å“åº”å¼è®¾è®¡ï¼šé€‚é…ä¸åŒå±å¹•å°ºå¯¸å’Œå¯†åº¦ æŒæ¡è¿™äº›åŸºç¡€æ§ä»¶çš„ä½¿ç”¨æ–¹æ³•æ˜¯ Android å¼€å‘çš„é‡è¦åŸºç¡€ã€‚\n","date":"24 October 2025","externalUrl":null,"permalink":"/posts/android/04---ui%E5%9F%BA%E7%A1%80%E6%8E%A7%E4%BB%B6-view/","section":"Posts","summary":"è¯¦ç»†ä»‹ç»Android UIåŸºç¡€æ§ä»¶Viewçš„åˆ†ç±»ã€TextViewå’ŒEditTextçš„ä½¿ç”¨æ–¹æ³•åŠå±æ€§é…ç½®","title":"UIåŸºç¡€æ§ä»¶ View","type":"posts"},{"content":" ViewHolder è§†å›¾ä¿æŒå™¨ # ViewHolder æ˜¯ Android å¼€å‘ä¸­ç”¨äºä¼˜åŒ– ListView å’Œ RecyclerView æ€§èƒ½çš„é‡è¦è®¾è®¡æ¨¡å¼ï¼Œé€šè¿‡ç¼“å­˜è§†å›¾å¼•ç”¨é¿å…é‡å¤çš„ findViewById æ“ä½œã€‚\nViewHolder åŸºæœ¬æ¦‚å¿µ # ViewHolder æ¨¡å¼æ˜¯ Android å¼€å‘ä¸­çš„æ€§èƒ½ä¼˜åŒ–æŠ€æœ¯ï¼Œä¸»è¦ç”¨äºåˆ—è¡¨æ§ä»¶ï¼ˆListViewã€RecyclerViewï¼‰ä¸­ã€‚å½“ç”¨æˆ·æ»‘åŠ¨åˆ—è¡¨æ—¶ï¼Œç³»ç»Ÿä¼šå¤ç”¨å·²åˆ›å»ºçš„è§†å›¾ï¼ŒViewHolder å¸®åŠ©ç¼“å­˜è¿™äº›è§†å›¾çš„å¼•ç”¨ï¼Œé¿å…é‡å¤æŸ¥æ‰¾æ§ä»¶ã€‚\næ€§èƒ½é—®é¢˜ # å½“æ»‘åŠ¨åˆ° ListView ä¸­çš„æŸä¸ªå…ƒç´ æ—¶ï¼Œä¼šå°†å…¶åŠ è½½å‡ºæ¥ï¼Œè€Œæ»‘åˆ°åˆ«çš„å…ƒç´ åé‡æ–°æ»‘åŠ¨åˆ°å·²ç»åŠ è½½è¿‡çš„å…ƒç´ æ—¶ï¼Œä¼šè¿›è¡Œé‡æ–°åŠ è½½ã€‚æ¯æ¬¡é‡æ–°åŠ è½½éƒ½ä¼šè°ƒç”¨ findViewById() æ–¹æ³•ï¼Œè¿™æ˜¯ä¸€ä¸ªæ˜‚è´µçš„æ“ä½œã€‚\nViewHolder å®ç°åŸç† # 1. åŸºæœ¬å®ç°æ­¥éª¤ # class ViewHolderActivity : AppCompatActivity() { private lateinit var listView: ListView private lateinit var adapter: ViewHolderAdapter private val dataList = mutableListOf\u0026lt;String\u0026gt;() override fun onCreate(savedInstanceState: Bundle?) { super.onCreate(savedInstanceState) setContentView(R.layout.activity_viewholder) initViews() setupData() setupAdapter() setupListView() } private fun initViews() { listView = findViewById(R.id.listView) } private fun setupData() { dataList.addAll(listOf( \u0026#34;é¡¹ç›®1\u0026#34;, \u0026#34;é¡¹ç›®2\u0026#34;, \u0026#34;é¡¹ç›®3\u0026#34;, \u0026#34;é¡¹ç›®4\u0026#34;, \u0026#34;é¡¹ç›®5\u0026#34;, \u0026#34;é¡¹ç›®6\u0026#34;, \u0026#34;é¡¹ç›®7\u0026#34;, \u0026#34;é¡¹ç›®8\u0026#34;, \u0026#34;é¡¹ç›®9\u0026#34;, \u0026#34;é¡¹ç›®10\u0026#34; )) } private fun setupAdapter() { adapter = ViewHolderAdapter(this, dataList) } private fun setupListView() { listView.adapter = adapter listView.onItemClickListener = AdapterView.OnItemClickListener { _, _, position, _ -\u0026gt; val item = dataList[position] Toast.makeText(this, \u0026#34;é€‰æ‹©äº†: $item\u0026#34;, Toast.LENGTH_SHORT).show() } } } class ViewHolderAdapter( private val context: Context, private val dataList: MutableList\u0026lt;String\u0026gt; ) : BaseAdapter() { override fun getCount(): Int = dataList.size override fun getItem(position: Int): String = dataList[position] override fun getItemId(position: Int): Long = position.toLong() override fun getView(position: Int, convertView: View?, parent: ViewGroup?): View { val view: View val holder: ViewHolder // 1. åˆ¤æ–­ convertView æ˜¯å¦ä¸º null if (convertView == null) { // 2. åˆ›å»ºæ–°çš„è§†å›¾ view = LayoutInflater.from(context).inflate(R.layout.viewholder_item, parent, false) // 3. åˆ›å»º ViewHolder å®ä¾‹ holder = ViewHolder(view) // 4. å°† ViewHolder ç»‘å®šåˆ°è§†å›¾ view.tag = holder } else { // 5. å¤ç”¨å·²å­˜åœ¨çš„è§†å›¾ view = convertView // 6. ä»è§†å›¾æ ‡ç­¾ä¸­è·å– ViewHolder holder = view.tag as ViewHolder } // 7. ç»‘å®šæ•°æ®åˆ°è§†å›¾ val item = dataList[position] holder.titleText.text = item holder.subtitleText.text = \u0026#34;è¿™æ˜¯ç¬¬ ${position + 1} ä¸ªé¡¹ç›®\u0026#34; return view } // ViewHolder ç±»å®šä¹‰ private class ViewHolder(view: View) { val titleText: TextView = view.findViewById(R.id.titleText) val subtitleText: TextView = view.findViewById(R.id.subtitleText) val iconImage: ImageView = view.findViewById(R.id.iconImage) } } 2. å¸ƒå±€æ–‡ä»¶ # \u0026lt;!-- res/layout/viewholder_item.xml --\u0026gt; \u0026lt;LinearLayout xmlns:android=\u0026#34;http://schemas.android.com/apk/res/android\u0026#34; android:layout_width=\u0026#34;match_parent\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:orientation=\u0026#34;horizontal\u0026#34; android:padding=\u0026#34;16dp\u0026#34; android:background=\u0026#34;?android:attr/selectableItemBackground\u0026#34;\u0026gt; \u0026lt;ImageView android:id=\u0026#34;@+id/iconImage\u0026#34; android:layout_width=\u0026#34;48dp\u0026#34; android:layout_height=\u0026#34;48dp\u0026#34; android:src=\u0026#34;@drawable/ic_default\u0026#34; android:layout_marginEnd=\u0026#34;16dp\u0026#34; android:scaleType=\u0026#34;centerCrop\u0026#34; /\u0026gt; \u0026lt;LinearLayout android:layout_width=\u0026#34;0dp\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:layout_weight=\u0026#34;1\u0026#34; android:orientation=\u0026#34;vertical\u0026#34;\u0026gt; \u0026lt;TextView android:id=\u0026#34;@+id/titleText\u0026#34; android:layout_width=\u0026#34;wrap_content\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:textSize=\u0026#34;16sp\u0026#34; android:textStyle=\u0026#34;bold\u0026#34; android:textColor=\u0026#34;@android:color/black\u0026#34; /\u0026gt; \u0026lt;TextView android:id=\u0026#34;@+id/subtitleText\u0026#34; android:layout_width=\u0026#34;wrap_content\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:textSize=\u0026#34;14sp\u0026#34; android:textColor=\u0026#34;@android:color/darker_gray\u0026#34; android:layout_marginTop=\u0026#34;4dp\u0026#34; /\u0026gt; \u0026lt;/LinearLayout\u0026gt; \u0026lt;ImageView android:id=\u0026#34;@+id/arrowImage\u0026#34; android:layout_width=\u0026#34;24dp\u0026#34; android:layout_height=\u0026#34;24dp\u0026#34; android:src=\u0026#34;@drawable/ic_arrow_right\u0026#34; android:layout_gravity=\u0026#34;center_vertical\u0026#34; /\u0026gt; \u0026lt;/LinearLayout\u0026gt; é«˜çº§ç”¨æ³•ç¤ºä¾‹ # 1. å¤æ‚æ•°æ®æ¨¡å‹ViewHolder # class ComplexViewHolderActivity : AppCompatActivity() { private lateinit var listView: ListView private lateinit var adapter: ComplexViewHolderAdapter private val dataList = mutableListOf\u0026lt;ContactItem\u0026gt;() override fun onCreate(savedInstanceState: Bundle?) { super.onCreate(savedInstanceState) setContentView(R.layout.activity_complex_viewholder) initViews() setupData() setupAdapter() setupListView() } private fun initViews() { listView = findViewById(R.id.listView) } private fun setupData() { dataList.addAll(listOf( ContactItem(\u0026#34;å¼ ä¸‰\u0026#34;, \u0026#34;13800138000\u0026#34;, \u0026#34;zhangsan@example.com\u0026#34;, true), ContactItem(\u0026#34;æå››\u0026#34;, \u0026#34;13800138001\u0026#34;, \u0026#34;lisi@example.com\u0026#34;, false), ContactItem(\u0026#34;ç‹äº”\u0026#34;, \u0026#34;13800138002\u0026#34;, \u0026#34;wangwu@example.com\u0026#34;, true), ContactItem(\u0026#34;èµµå…­\u0026#34;, \u0026#34;13800138003\u0026#34;, \u0026#34;zhaoliu@example.com\u0026#34;, false), ContactItem(\u0026#34;é’±ä¸ƒ\u0026#34;, \u0026#34;13800138004\u0026#34;, \u0026#34;qianqi@example.com\u0026#34;, true) )) } private fun setupAdapter() { adapter = ComplexViewHolderAdapter(this, dataList) } private fun setupListView() { listView.adapter = adapter listView.onItemClickListener = AdapterView.OnItemClickListener { _, _, position, _ -\u0026gt; val contact = dataList[position] showContactDetail(contact) } } private fun showContactDetail(contact: ContactItem) { AlertDialog.Builder(this) .setTitle(\u0026#34;è”ç³»äººè¯¦æƒ…\u0026#34;) .setMessage(\u0026#34;å§“å: ${contact.name}\\nç”µè¯: ${contact.phone}\\né‚®ç®±: ${contact.email}\\nçŠ¶æ€: ${if (contact.isOnline) \u0026#34;åœ¨çº¿\u0026#34; else \u0026#34;ç¦»çº¿\u0026#34;}\u0026#34;) .setPositiveButton(\u0026#34;ç¡®å®š\u0026#34;) { _, _ -\u0026gt; // ä»€ä¹ˆéƒ½ä¸åš } .show() } } data class ContactItem( val name: String, val phone: String, val email: String, val isOnline: Boolean ) class ComplexViewHolderAdapter( private val context: Context, private val dataList: MutableList\u0026lt;ContactItem\u0026gt; ) : BaseAdapter() { override fun getCount(): Int = dataList.size override fun getItem(position: Int): ContactItem = dataList[position] override fun getItemId(position: Int): Long = position.toLong() override fun getView(position: Int, convertView: View?, parent: ViewGroup?): View { val view: View val holder: ContactViewHolder if (convertView == null) { view = LayoutInflater.from(context).inflate(R.layout.contact_item, parent, false) holder = ContactViewHolder(view) view.tag = holder } else { view = convertView holder = view.tag as ContactViewHolder } val contact = dataList[position] // ç»‘å®šæ•°æ® holder.nameText.text = contact.name holder.phoneText.text = contact.phone holder.emailText.text = contact.email // è®¾ç½®åœ¨çº¿çŠ¶æ€ if (contact.isOnline) { holder.statusIndicator.setBackgroundColor(ContextCompat.getColor(context, R.color.online_color)) holder.statusText.text = \u0026#34;åœ¨çº¿\u0026#34; holder.statusText.setTextColor(ContextCompat.getColor(context, R.color.online_color)) } else { holder.statusIndicator.setBackgroundColor(ContextCompat.getColor(context, R.color.offline_color)) holder.statusText.text = \u0026#34;ç¦»çº¿\u0026#34; holder.statusText.setTextColor(ContextCompat.getColor(context, R.color.offline_color)) } // è®¾ç½®å¤´åƒ holder.avatarImage.setImageResource( when (position % 4) { 0 -\u0026gt; android.R.drawable.ic_menu_myplaces 1 -\u0026gt; android.R.drawable.ic_menu_camera 2 -\u0026gt; android.R.drawable.ic_menu_send else -\u0026gt; android.R.drawable.ic_menu_share } ) return view } private class ContactViewHolder(view: View) { val container: LinearLayout = view.findViewById(R.id.container) val avatarImage: ImageView = view.findViewById(R.id.avatarImage) val nameText: TextView = view.findViewById(R.id.nameText) val phoneText: TextView = view.findViewById(R.id.phoneText) val emailText: TextView = view.findViewById(R.id.emailText) val statusIndicator: View = view.findViewById(R.id.statusIndicator) val statusText: TextView = view.findViewById(R.id.statusText) } } 2. å¤šç±»å‹ViewHolder # class MultiTypeViewHolderActivity : AppCompatActivity() { private lateinit var listView: ListView private lateinit var adapter: MultiTypeViewHolderAdapter private val dataList = mutableListOf\u0026lt;Any\u0026gt;() override fun onCreate(savedInstanceState: Bundle?) { super.onCreate(savedInstanceState) setContentView(R.layout.activity_multi_type_viewholder) initViews() setupData() setupAdapter() setupListView() } private fun initViews() { listView = findViewById(R.id.listView) } private fun setupData() { dataList.addAll(listOf( HeaderItem(\u0026#34;è”ç³»äºº\u0026#34;), ContactItem(\u0026#34;å¼ ä¸‰\u0026#34;, \u0026#34;13800138000\u0026#34;, \u0026#34;zhangsan@example.com\u0026#34;, true), ContactItem(\u0026#34;æå››\u0026#34;, \u0026#34;13800138001\u0026#34;, \u0026#34;lisi@example.com\u0026#34;, false), HeaderItem(\u0026#34;ç¾¤ç»„\u0026#34;), GroupItem(\u0026#34;å·¥ä½œç¾¤\u0026#34;, \u0026#34;5äºº\u0026#34;, \u0026#34;æœ€æ–°æ¶ˆæ¯ï¼šæ˜å¤©å¼€ä¼š\u0026#34;), GroupItem(\u0026#34;æœ‹å‹ç¾¤\u0026#34;, \u0026#34;8äºº\u0026#34;, \u0026#34;æœ€æ–°æ¶ˆæ¯ï¼šå‘¨æœ«èšé¤\u0026#34;) )) } private fun setupAdapter() { adapter = MultiTypeViewHolderAdapter(this, dataList) } private fun setupListView() { listView.adapter = adapter listView.onItemClickListener = AdapterView.OnItemClickListener { _, _, position, _ -\u0026gt; val item = dataList[position] when (item) { is ContactItem -\u0026gt; Toast.makeText(this, \u0026#34;è”ç³»äºº: ${item.name}\u0026#34;, Toast.LENGTH_SHORT).show() is GroupItem -\u0026gt; Toast.makeText(this, \u0026#34;ç¾¤ç»„: ${item.name}\u0026#34;, Toast.LENGTH_SHORT).show() else -\u0026gt; Toast.makeText(this, \u0026#34;ç‚¹å‡»äº†æ ‡é¢˜\u0026#34;, Toast.LENGTH_SHORT).show() } } } } data class HeaderItem(val title: String) data class GroupItem(val name: String, val memberCount: String, val lastMessage: String) class MultiTypeViewHolderAdapter( private val context: Context, private val dataList: MutableList\u0026lt;Any\u0026gt; ) : BaseAdapter() { companion object { private const val TYPE_HEADER = 0 private const val TYPE_CONTACT = 1 private const val TYPE_GROUP = 2 } override fun getCount(): Int = dataList.size override fun getItem(position: Int): Any = dataList[position] override fun getItemId(position: Int): Long = position.toLong() override fun getViewTypeCount(): Int = 3 override fun getItemViewType(position: Int): Int { return when (dataList[position]) { is HeaderItem -\u0026gt; TYPE_HEADER is ContactItem -\u0026gt; TYPE_CONTACT is GroupItem -\u0026gt; TYPE_GROUP else -\u0026gt; TYPE_HEADER } } override fun getView(position: Int, convertView: View?, parent: ViewGroup?): View { val item = dataList[position] val viewType = getItemViewType(position) when (viewType) { TYPE_HEADER -\u0026gt; { val view = convertView ?: LayoutInflater.from(context).inflate(R.layout.header_item, parent, false) val holder = view.tag as? HeaderViewHolder ?: HeaderViewHolder(view).also { view.tag = it } val header = item as HeaderItem holder.titleText.text = header.title return view } TYPE_CONTACT -\u0026gt; { val view = convertView ?: LayoutInflater.from(context).inflate(R.layout.contact_item, parent, false) val holder = view.tag as? ContactViewHolder ?: ContactViewHolder(view).also { view.tag = it } val contact = item as ContactItem holder.nameText.text = contact.name holder.phoneText.text = contact.phone holder.emailText.text = contact.email return view } TYPE_GROUP -\u0026gt; { val view = convertView ?: LayoutInflater.from(context).inflate(R.layout.group_item, parent, false) val holder = view.tag as? GroupViewHolder ?: GroupViewHolder(view).also { view.tag = it } val group = item as GroupItem holder.nameText.text = group.name holder.memberCountText.text = group.memberCount holder.lastMessageText.text = group.lastMessage return view } else -\u0026gt; return convertView ?: View(context) } } private class HeaderViewHolder(view: View) { val titleText: TextView = view.findViewById(R.id.titleText) } private class ContactViewHolder(view: View) { val nameText: TextView = view.findViewById(R.id.nameText) val phoneText: TextView = view.findViewById(R.id.phoneText) val emailText: TextView = view.findViewById(R.id.emailText) } private class GroupViewHolder(view: View) { val nameText: TextView = view.findViewById(R.id.nameText) val memberCountText: TextView = view.findViewById(R.id.memberCountText) val lastMessageText: TextView = view.findViewById(R.id.lastMessageText) } } ViewHolder æ€§èƒ½ä¼˜åŒ– # 1. æ€§èƒ½å¯¹æ¯” # // ä¸ä½¿ç”¨ ViewHolderï¼ˆæ€§èƒ½è¾ƒå·®ï¼‰ class BadAdapter(private val context: Context, private val dataList: List\u0026lt;String\u0026gt;) : BaseAdapter() { override fun getView(position: Int, convertView: View?, parent: ViewGroup?): View { val view = convertView ?: LayoutInflater.from(context).inflate(R.layout.item_layout, parent, false) // æ¯æ¬¡éƒ½è°ƒç”¨ findViewByIdï¼ˆæ€§èƒ½å¼€é”€å¤§ï¼‰ val titleText = view.findViewById\u0026lt;TextView\u0026gt;(R.id.titleText) val subtitleText = view.findViewById\u0026lt;TextView\u0026gt;(R.id.subtitleText) val iconImage = view.findViewById\u0026lt;ImageView\u0026gt;(R.id.iconImage) titleText.text = dataList[position] subtitleText.text = \u0026#34;å‰¯æ ‡é¢˜\u0026#34; return view } } // ä½¿ç”¨ ViewHolderï¼ˆæ€§èƒ½ä¼˜åŒ–ï¼‰ class GoodAdapter(private val context: Context, private val dataList: List\u0026lt;String\u0026gt;) : BaseAdapter() { override fun getView(position: Int, convertView: View?, parent: ViewGroup?): View { val view: View val holder: ViewHolder if (convertView == null) { view = LayoutInflater.from(context).inflate(R.layout.item_layout, parent, false) holder = ViewHolder(view) view.tag = holder } else { view = convertView holder = view.tag as ViewHolder } // ç›´æ¥ä½¿ç”¨ç¼“å­˜çš„å¼•ç”¨ï¼ˆæ€§èƒ½ä¼˜åŒ–ï¼‰ holder.titleText.text = dataList[position] holder.subtitleText.text = \u0026#34;å‰¯æ ‡é¢˜\u0026#34; return view } private class ViewHolder(view: View) { val titleText: TextView = view.findViewById(R.id.titleText) val subtitleText: TextView = view.findViewById(R.id.subtitleText) val iconImage: ImageView = view.findViewById(R.id.iconImage) } } 2. æ€§èƒ½æµ‹è¯• # class ViewHolderPerformanceTest : AppCompatActivity() { private lateinit var listView: ListView private lateinit var performanceButton: Button private val dataList = mutableListOf\u0026lt;String\u0026gt;() override fun onCreate(savedInstanceState: Bundle?) { super.onCreate(savedInstanceState) setContentView(R.layout.activity_viewholder_performance_test) initViews() setupData() setupListView() setupPerformanceTest() } private fun initViews() { listView = findViewById(R.id.listView) performanceButton = findViewById(R.id.performanceButton) } private fun setupData() { // ç”Ÿæˆå¤§é‡æµ‹è¯•æ•°æ® repeat(1000) { index -\u0026gt; dataList.add(\u0026#34;æµ‹è¯•é¡¹ç›® $index\u0026#34;) } } private fun setupListView() { listView.adapter = OptimizedViewHolderAdapter(this, dataList) } private fun setupPerformanceTest() { performanceButton.setOnClickListener { testPerformance() } } private fun testPerformance() { val startTime = System.currentTimeMillis() // æ¨¡æ‹Ÿå¿«é€Ÿæ»šåŠ¨ listView.smoothScrollToPosition(dataList.size - 1) listView.post { val endTime = System.currentTimeMillis() val duration = endTime - startTime Toast.makeText(this, \u0026#34;æ»šåŠ¨è€—æ—¶: ${duration}ms\u0026#34;, Toast.LENGTH_SHORT).show() } } } class OptimizedViewHolderAdapter( private val context: Context, private val dataList: List\u0026lt;String\u0026gt; ) : BaseAdapter() { override fun getCount(): Int = dataList.size override fun getItem(position: Int): String = dataList[position] override fun getItemId(position: Int): Long = position.toLong() override fun getView(position: Int, convertView: View?, parent: ViewGroup?): View { val view: View val holder: OptimizedViewHolder if (convertView == null) { view = LayoutInflater.from(context).inflate(R.layout.optimized_item, parent, false) holder = OptimizedViewHolder(view) view.tag = holder } else { view = convertView holder = view.tag as OptimizedViewHolder } val item = dataList[position] holder.titleText.text = item holder.subtitleText.text = \u0026#34;ä½ç½®: $position\u0026#34; // æ ¹æ®ä½ç½®è®¾ç½®ä¸åŒçš„èƒŒæ™¯è‰² when (position % 3) { 0 -\u0026gt; holder.container.setBackgroundColor(ContextCompat.getColor(context, R.color.colorPrimary)) 1 -\u0026gt; holder.container.setBackgroundColor(ContextCompat.getColor(context, R.color.colorAccent)) 2 -\u0026gt; holder.container.setBackgroundColor(ContextCompat.getColor(context, R.color.colorSecondary)) } return view } private class OptimizedViewHolder(view: View) { val container: LinearLayout = view.findViewById(R.id.container) val titleText: TextView = view.findViewById(R.id.titleText) val subtitleText: TextView = view.findViewById(R.id.subtitleText) } } ViewHolder æœ€ä½³å®è·µ # 1. æŠ½è±¡ViewHolderåŸºç±» # abstract class BaseViewHolder { abstract fun bindData(data: Any) } class ContactViewHolder(view: View) : BaseViewHolder() { val nameText: TextView = view.findViewById(R.id.nameText) val phoneText: TextView = view.findViewById(R.id.phoneText) val emailText: TextView = view.findViewById(R.id.emailText) override fun bindData(data: Any) { if (data is ContactItem) { nameText.text = data.name phoneText.text = data.phone emailText.text = data.email } } } 2. ViewHolderå·¥å…·ç±» # object ViewHolderUtils { fun \u0026lt;T\u0026gt; createViewHolder(view: View, bindView: (View, T) -\u0026gt; Unit): (T) -\u0026gt; Unit { return { data -\u0026gt; bindView(view, data) } } fun createContactViewHolder(view: View): (ContactItem) -\u0026gt; Unit { val nameText = view.findViewById\u0026lt;TextView\u0026gt;(R.id.nameText) val phoneText = view.findViewById\u0026lt;TextView\u0026gt;(R.id.phoneText) val emailText = view.findViewById\u0026lt;TextView\u0026gt;(R.id.emailText) return { contact -\u0026gt; nameText.text = contact.name phoneText.text = contact.phone emailText.text = contact.email } } } 3. é€šç”¨ViewHolderé€‚é…å™¨ # class GenericViewHolderAdapter\u0026lt;T\u0026gt;( private val context: Context, private val dataList: List\u0026lt;T\u0026gt;, private val layoutRes: Int, private val bindViewHolder: (View, T, Int) -\u0026gt; Unit ) : BaseAdapter() { override fun getCount(): Int = dataList.size override fun getItem(position: Int): T = dataList[position] override fun getItemId(position: Int): Long = position.toLong() override fun getView(position: Int, convertView: View?, parent: ViewGroup?): View { val view = convertView ?: LayoutInflater.from(context).inflate(layoutRes, parent, false) bindViewHolder(view, dataList[position], position) return view } } ğŸ“‹ æ€»ç»“ # ViewHolder æ˜¯ Android å¼€å‘ä¸­é‡è¦çš„æ€§èƒ½ä¼˜åŒ–æŠ€æœ¯ï¼š\næ€§èƒ½ä¼˜åŒ–ï¼šé¿å…é‡å¤çš„ findViewById æ“ä½œ è§†å›¾å¤ç”¨ï¼šé€šè¿‡ convertView å¤ç”¨å·²åˆ›å»ºçš„è§†å›¾ å†…å­˜ä¼˜åŒ–ï¼šå‡å°‘ä¸å¿…è¦çš„å¯¹è±¡åˆ›å»º å¤šç±»å‹æ”¯æŒï¼šæ”¯æŒä¸åŒç±»å‹çš„åˆ—è¡¨é¡¹ æœ€ä½³å®è·µï¼šæŠ½è±¡åŸºç±»ã€å·¥å…·ç±»å°è£…ã€é€šç”¨é€‚é…å™¨ æŒæ¡ ViewHolder æ¨¡å¼å¯¹äºåˆ›å»ºé«˜æ€§èƒ½çš„åˆ—è¡¨ç•Œé¢è‡³å…³é‡è¦ã€‚\n","date":"24 October 2025","externalUrl":null,"permalink":"/posts/android/19---viewholder-%E8%A7%86%E5%9B%BE%E4%BF%9D%E6%8C%81%E5%99%A8/","section":"Posts","summary":"è¯¦ç»†ä»‹ç»Android ViewHolderæ¨¡å¼çš„ä½¿ç”¨æ–¹æ³•ã€æ€§èƒ½ä¼˜åŒ–åŸç†å’Œæœ€ä½³å®è·µ","title":"ViewHolder è§†å›¾ä¿æŒå™¨","type":"posts"},{"content":" ViewPager2 æ»‘åŠ¨åˆ‡æ¢è§†å›¾ # ViewPager2 æ˜¯ Android ä¸­ç”¨äºå®ç°é¡µé¢æ»‘åŠ¨åˆ‡æ¢çš„é‡è¦ç»„ä»¶ï¼Œå®ƒæ”¯æŒæ°´å¹³æ»‘åŠ¨ã€å‚ç›´æ»‘åŠ¨ï¼Œå¹¶ä¸”æä¾›äº†ä¸°å¯Œçš„è‡ªå®šä¹‰é€‰é¡¹ã€‚\nåº”ç”¨åœºæ™¯ # 1. å¼•å¯¼ç•Œé¢ # åº”ç”¨é¦–æ¬¡å¯åŠ¨æ—¶çš„åŠŸèƒ½ä»‹ç» æ–°åŠŸèƒ½å¼•å¯¼é¡µé¢ ç”¨æˆ·æ“ä½œæŒ‡å¼• 2. ç›¸å†Œå¤šå›¾ç‰‡é¢„è§ˆ # å›¾ç‰‡æµè§ˆå™¨çš„æ»‘åŠ¨åˆ‡æ¢ ç›¸å†Œä¸­çš„å›¾ç‰‡è½®æ’­ åª’ä½“æ–‡ä»¶çš„è¿ç»­æ’­æ”¾ 3. å¤šTabé¡µé¢ # Appä¸»ç•Œé¢çš„Tabåˆ‡æ¢ åˆ†ç±»é¡µé¢çš„æ»‘åŠ¨æµè§ˆ å†…å®¹åˆ†é¡µå±•ç¤º 4. å¹¿å‘Šæ’­æ”¾ # Bannerå¹¿å‘Šè½®æ’­ äº§å“å±•ç¤ºè½®æ’­ æ–°é—»èµ„è®¯è½®æ’­ ViewPager2 çš„ä¼˜åŠ¿ # ç›¸æ¯”ä¼ ç»Ÿçš„ ViewPagerï¼ŒViewPager2 å…·æœ‰ä»¥ä¸‹ä¼˜åŠ¿ï¼š\nåŸºäº RecyclerViewï¼šæ€§èƒ½æ›´å¥½ï¼Œå†…å­˜å ç”¨æ›´å°‘ æ”¯æŒå‚ç›´æ»‘åŠ¨ï¼šå¯ä»¥å‚ç›´æ–¹å‘æ»‘åŠ¨ Fragment æ”¯æŒï¼šåŸç”Ÿæ”¯æŒ Fragment æ›´å¥½çš„ç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼šè‡ªåŠ¨å¤„ç† Fragment ç”Ÿå‘½å‘¨æœŸ RTL æ”¯æŒï¼šæ”¯æŒä»å³åˆ°å·¦çš„è¯­è¨€ å¼•å…¥æ–¹å¼ # 1. æ·»åŠ ä¾èµ– # åœ¨ build.gradle (Module: app) ä¸­æ·»åŠ ï¼š\ndependencies { implementation \u0026#39;androidx.viewpager2:viewpager2:1.0.0\u0026#39; } 2. ç‰ˆæœ¬è¯´æ˜ # ViewPager2: æœ€æ–°ç‰ˆæœ¬ï¼Œæ¨èä½¿ç”¨ ViewPager: æ—§ç‰ˆæœ¬ï¼Œå·²ä¸æ¨è Support Library: å·²åºŸå¼ƒï¼Œå»ºè®®è¿ç§»åˆ° AndroidX ä½¿ç”¨æ­¥éª¤ # æ­¥éª¤1ï¼šå¸ƒå±€æ–‡ä»¶ä¸­æ·»åŠ  ViewPager2 # \u0026lt;!-- activity_main.xml --\u0026gt; \u0026lt;?xml version=\u0026#34;1.0\u0026#34; encoding=\u0026#34;utf-8\u0026#34;?\u0026gt; \u0026lt;LinearLayout xmlns:android=\u0026#34;http://schemas.android.com/apk/res/android\u0026#34; android:layout_width=\u0026#34;match_parent\u0026#34; android:layout_height=\u0026#34;match_parent\u0026#34; android:orientation=\u0026#34;vertical\u0026#34;\u0026gt; \u0026lt;androidx.viewpager2.widget.ViewPager2 android:id=\u0026#34;@+id/viewPager2\u0026#34; android:layout_width=\u0026#34;match_parent\u0026#34; android:layout_height=\u0026#34;0dp\u0026#34; android:layout_weight=\u0026#34;1\u0026#34; /\u0026gt; \u0026lt;!-- æŒ‡ç¤ºå™¨ --\u0026gt; \u0026lt;LinearLayout android:id=\u0026#34;@+id/indicatorLayout\u0026#34; android:layout_width=\u0026#34;wrap_content\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:layout_gravity=\u0026#34;center\u0026#34; android:layout_marginTop=\u0026#34;16dp\u0026#34; android:orientation=\u0026#34;horizontal\u0026#34; /\u0026gt; \u0026lt;/LinearLayout\u0026gt; æ­¥éª¤2ï¼šåˆ›å»ºé¡µé¢å¸ƒå±€ # \u0026lt;!-- item_page.xml --\u0026gt; \u0026lt;?xml version=\u0026#34;1.0\u0026#34; encoding=\u0026#34;utf-8\u0026#34;?\u0026gt; \u0026lt;LinearLayout xmlns:android=\u0026#34;http://schemas.android.com/apk/res/android\u0026#34; android:layout_width=\u0026#34;match_parent\u0026#34; android:layout_height=\u0026#34;match_parent\u0026#34; android:orientation=\u0026#34;vertical\u0026#34; android:gravity=\u0026#34;center\u0026#34; android:padding=\u0026#34;16dp\u0026#34;\u0026gt; \u0026lt;ImageView android:id=\u0026#34;@+id/imageView\u0026#34; android:layout_width=\u0026#34;200dp\u0026#34; android:layout_height=\u0026#34;200dp\u0026#34; android:layout_marginBottom=\u0026#34;16dp\u0026#34; android:scaleType=\u0026#34;centerCrop\u0026#34; /\u0026gt; \u0026lt;TextView android:id=\u0026#34;@+id/textView\u0026#34; android:layout_width=\u0026#34;wrap_content\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:textSize=\u0026#34;18sp\u0026#34; android:textStyle=\u0026#34;bold\u0026#34; android:textColor=\u0026#34;#333333\u0026#34; /\u0026gt; \u0026lt;TextView android:id=\u0026#34;@+id/descriptionTextView\u0026#34; android:layout_width=\u0026#34;wrap_content\u0026#34; android:layout_height=\u0026#34;wrap_content\u0026#34; android:layout_marginTop=\u0026#34;8dp\u0026#34; android:textSize=\u0026#34;14sp\u0026#34; android:textColor=\u0026#34;#666666\u0026#34; android:gravity=\u0026#34;center\u0026#34; /\u0026gt; \u0026lt;/LinearLayout\u0026gt; æ­¥éª¤3ï¼šåˆ›å»ºé€‚é…å™¨ # class ViewPagerAdapter(private val pageList: List\u0026lt;PageData\u0026gt;) : RecyclerView.Adapter\u0026lt;ViewPagerAdapter.ViewHolder\u0026gt;() { override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): ViewHolder { val view = LayoutInflater.from(parent.context) .inflate(R.layout.item_page, parent, false) return ViewHolder(view) } override fun onBindViewHolder(holder: ViewHolder, position: Int) { val pageData = pageList[position] holder.imageView.setImageResource(pageData.imageRes) holder.textView.text = pageData.title holder.descriptionTextView.text = pageData.description } override fun getItemCount(): Int = pageList.size class ViewHolder(itemView: View) : RecyclerView.ViewHolder(itemView) { val imageView: ImageView = itemView.findViewById(R.id.imageView) val textView: TextView = itemView.findViewById(R.id.textView) val descriptionTextView: TextView = itemView.findViewById(R.id.descriptionTextView) } } æ­¥éª¤4ï¼šæ•°æ®æ¨¡å‹ # data class PageData( val imageRes: Int, val title: String, val description: String ) æ­¥éª¤5ï¼šåœ¨ Activity ä¸­ä½¿ç”¨ # class MainActivity : AppCompatActivity() { private lateinit var viewPager2: ViewPager2 private lateinit var indicatorLayout: LinearLayout private lateinit var adapter: ViewPagerAdapter override fun onCreate(savedInstanceState: Bundle?) { super.onCreate(savedInstanceState) setContentView(R.layout.activity_main) initViews() setupViewPager() setupIndicators() } private fun initViews() { viewPager2 = findViewById(R.id.viewPager2) indicatorLayout = findViewById(R.id.indicatorLayout) } private fun setupViewPager() { // å‡†å¤‡æ•°æ® val pageList = listOf( PageData(R.drawable.image1, \u0026#34;æ¬¢è¿ä½¿ç”¨\u0026#34;, \u0026#34;è¿™æ˜¯ç¬¬ä¸€ä¸ªé¡µé¢\u0026#34;), PageData(R.drawable.image2, \u0026#34;åŠŸèƒ½ä»‹ç»\u0026#34;, \u0026#34;è¿™æ˜¯ç¬¬äºŒä¸ªé¡µé¢\u0026#34;), PageData(R.drawable.image3, \u0026#34;å¼€å§‹ä½¿ç”¨\u0026#34;, \u0026#34;è¿™æ˜¯ç¬¬ä¸‰ä¸ªé¡µé¢\u0026#34;) ) // è®¾ç½®é€‚é…å™¨ adapter = ViewPagerAdapter(pageList) viewPager2.adapter = adapter // è®¾ç½®é¡µé¢å˜åŒ–ç›‘å¬ viewPager2.registerOnPageChangeCallback(object : ViewPager2.OnPageChangeCallback() { override fun onPageSelected(position: Int) { super.onPageSelected(position) updateIndicators(position) } }) } private fun setupIndicators() { // åˆ›å»ºæŒ‡ç¤ºå™¨ repeat(adapter.itemCount) { i -\u0026gt; val indicator = View(this).apply { setBackgroundResource(R.drawable.indicator_unselected) layoutParams = LinearLayout.LayoutParams( dpToPx(8), dpToPx(8) ).apply { setMargins(dpToPx(4), 0, dpToPx(4), 0) } } indicatorLayout.addView(indicator) } // è®¾ç½®ç¬¬ä¸€ä¸ªæŒ‡ç¤ºå™¨ä¸ºé€‰ä¸­çŠ¶æ€ updateIndicators(0) } private fun updateIndicators(position: Int) { repeat(indicatorLayout.childCount) { i -\u0026gt; val indicator = indicatorLayout.getChildAt(i) indicator.setBackgroundResource( if (i == position) R.drawable.indicator_selected else R.drawable.indicator_unselected ) } } private fun dpToPx(dp: Int): Int { return (dp * resources.displayMetrics.density).toInt() } } é«˜çº§åŠŸèƒ½ # 1. å‚ç›´æ»‘åŠ¨ # // è®¾ç½®å‚ç›´æ»‘åŠ¨ viewPager2.orientation = ViewPager2.ORIENTATION_VERTICAL 2. ç¦ç”¨æ»‘åŠ¨ # // ç¦ç”¨ç”¨æˆ·æ»‘åŠ¨ viewPager2.isUserInputEnabled = false 3. é¢„åŠ è½½é¡µé¢ # // è®¾ç½®é¢„åŠ è½½é¡µé¢æ•°é‡ viewPager2.offscreenPageLimit = 2 4. Fragment æ”¯æŒ # class FragmentAdapter(fragmentActivity: FragmentActivity) : FragmentStateAdapter(fragmentActivity) { override fun createFragment(position: Int): Fragment { // æ ¹æ®ä½ç½®è¿”å›å¯¹åº”çš„ Fragment return PageFragment.newInstance(position) } override fun getItemCount(): Int = 3 // é¡µé¢æ•°é‡ } æ³¨æ„äº‹é¡¹ # å†…å­˜ç®¡ç†ï¼šViewPager2 ä¼šè‡ªåŠ¨å›æ”¶ä¸å¯è§çš„é¡µé¢ï¼Œä½†ä»éœ€æ³¨æ„å›¾ç‰‡ç­‰èµ„æºçš„é‡Šæ”¾ ç”Ÿå‘½å‘¨æœŸï¼šFragment çš„ç”Ÿå‘½å‘¨æœŸä¼šè¢« ViewPager2 è‡ªåŠ¨ç®¡ç† æ€§èƒ½ä¼˜åŒ–ï¼šå¯¹äºå¤§é‡é¡µé¢ï¼Œå»ºè®®ä½¿ç”¨ FragmentStateAdapter è€Œä¸æ˜¯ RecyclerView.Adapter æ»‘åŠ¨å†²çªï¼šå¦‚æœé¡µé¢å†…éƒ¨æœ‰æ»‘åŠ¨ç»„ä»¶ï¼Œéœ€è¦æ³¨æ„æ»‘åŠ¨å†²çªçš„å¤„ç† æ€»ç»“ # ViewPager2 æ˜¯ Android å¼€å‘ä¸­å®ç°é¡µé¢æ»‘åŠ¨åˆ‡æ¢çš„æœ€ä½³é€‰æ‹©ï¼Œå®ƒæä¾›äº†ä¸°å¯Œçš„åŠŸèƒ½å’Œè‰¯å¥½çš„æ€§èƒ½ã€‚é€šè¿‡åˆç†ä½¿ç”¨ ViewPager2ï¼Œå¯ä»¥åˆ›å»ºå‡ºæµç•…çš„ç”¨æˆ·ä½“éªŒå’Œç¾è§‚çš„ç•Œé¢æ•ˆæœã€‚\n","date":"24 October 2025","externalUrl":null,"permalink":"/posts/android/20---viewpager-%E6%BB%91%E5%8A%A8%E5%88%87%E6%8D%A2%E8%A7%86%E5%9B%BE/","section":"Posts","summary":"è¯¦ç»†ä»‹ç»äº†ViewPager2çš„ä½œç”¨ã€åº”ç”¨åœºæ™¯ã€å¼•å…¥æ–¹å¼ç­‰","title":"ViewPager æ»‘åŠ¨åˆ‡æ¢è§†å›¾","type":"posts"},{"content":"","externalUrl":null,"permalink":"/authors/","section":"Authors","summary":"","title":"Authors","type":"authors"},{"content":"","externalUrl":null,"permalink":"/series/","section":"Series","summary":"","title":"Series","type":"series"},{"content":"","externalUrl":null,"permalink":"/tags/","section":"Tags","summary":"","title":"Tags","type":"tags"}]